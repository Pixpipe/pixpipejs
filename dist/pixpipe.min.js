// Build date: 2017-0824T16:29:39

/*
* Author   Jonathan Lurie - http://me.jonahanlurie.fr
* License  MIT
* Link     https://github.com/Pixpipe/pixpipejs
* Lab      MCIN - Montreal Neurological Institute
*/
/*
 Chen, Yi-Cyuan 2014-2017
 @license MIT
 The buffer module from node.js, for the browser.

 @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 @license  MIT
 @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js  Determine if an object is a Buffer

 @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 @license  MIT
 Based on ndef.parser, by Raphael Graf(r@undefined.ch)
 http://www.undefined.ch/mparser/index.html

 Ported to JavaScript and modified by Matthew Crumley (email@matthewcrumley.com, http://silentmatt.com/)

 You are free to use and modify this code in anyway you find useful. Please leave this comment in the code
 to acknowledge its original source. If you feel like it, I enjoy hearing about projects that use my code,
 but don't feel like you have to let me know or ask permission.
*/
'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.inherits=function(n,G){function J(){}J.prototype=G.prototype;n.prototype=new J;n.prototype.constructor=n;for(var N in G)if(Object.defineProperties){var V=Object.getOwnPropertyDescriptor(G,N);V&&Object.defineProperty(n,N,V)}else n[N]=G[N]};
$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(n,G,J){if(J.get||J.set)throw new TypeError("ES3 does not support getters and setters.");n!=Array.prototype&&n!=Object.prototype&&(n[G]=J.value)};$jscomp.getGlobal=function(n){return"undefined"!=typeof window&&window===n?n:"undefined"!=typeof global&&null!=global?global:n};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(n){return $jscomp.SYMBOL_PREFIX+(n||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var n=$jscomp.global.Symbol.iterator;n||(n=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[n]&&$jscomp.defineProperty(Array.prototype,n,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(n){var G=0;return $jscomp.iteratorPrototype(function(){return G<n.length?{done:!1,value:n[G++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(n){$jscomp.initSymbolIterator();n={next:n};n[$jscomp.global.Symbol.iterator]=function(){return this};return n};$jscomp.makeIterator=function(n){$jscomp.initSymbolIterator();var G=n[Symbol.iterator];return G?G.call(n):$jscomp.arrayIterator(n)};$jscomp.arrayFromIterator=function(n){for(var G,J=[];!(G=n.next()).done;)J.push(G.value);return J};$jscomp.arrayFromIterable=function(n){return n instanceof Array?n:$jscomp.arrayFromIterator($jscomp.makeIterator(n))};
$jscomp.iteratorFromArray=function(n,G){$jscomp.initSymbolIterator();n instanceof String&&(n+="");var J=0,N={next:function(){if(J<n.length){var V=J++;return{value:G(V,n[V]),done:!1}}N.next=function(){return{done:!0,value:void 0}};return N.next()}};N[Symbol.iterator]=function(){return N};return N};
$jscomp.polyfill=function(n,G,J,N){if(G){J=$jscomp.global;n=n.split(".");for(N=0;N<n.length-1;N++){var V=n[N];V in J||(J[V]={});J=J[V]}n=n[n.length-1];N=J[n];G=G(N);G!=N&&null!=G&&$jscomp.defineProperty(J,n,{configurable:!0,writable:!0,value:G})}};$jscomp.polyfill("Array.prototype.keys",function(n){return n?n:function(){return $jscomp.iteratorFromArray(this,function(n){return n})}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.fill",function(n){return n?n:function(n,J,N){var G=this.length||0;0>J&&(J=Math.max(0,G+J));if(null==N||N>G)N=G;N=Number(N);0>N&&(N=Math.max(0,G+N));for(J=Number(J||0);J<N;J++)this[J]=n;return this}},"es6-impl","es3");$jscomp.polyfill("Math.log2",function(n){return n?n:function(n){return Math.log(n)/Math.LN2}},"es6-impl","es3");
$jscomp.findInternal=function(n,G,J){n instanceof String&&(n=String(n));for(var N=n.length,V=0;V<N;V++){var la=n[V];if(G.call(J,la,V,n))return{i:V,v:la}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(n){return n?n:function(n,J){return $jscomp.findInternal(this,n,J).v}},"es6-impl","es3");$jscomp.polyfill("Array.prototype.values",function(n){return n?n:function(){return $jscomp.iteratorFromArray(this,function(n,J){return J})}},"es6","es3");
$jscomp.polyfill("Math.sinh",function(n){if(n)return n;var G=Math.exp;return function(n){n=Number(n);return 0===n?n:(G(n)-G(-n))/2}},"es6-impl","es3");$jscomp.polyfill("Math.cosh",function(n){if(n)return n;var G=Math.exp;return function(n){n=Number(n);return(G(n)+G(-n))/2}},"es6-impl","es3");$jscomp.polyfill("Math.tanh",function(n){return n?n:function(n){n=Number(n);if(0===n)return n;var G=Math.exp(-2*Math.abs(n)),G=(1-G)/(1+G);return 0>n?-G:G}},"es6-impl","es3");
$jscomp.polyfill("Math.asinh",function(n){return n?n:function(n){n=Number(n);if(0===n)return n;var G=Math.log(Math.abs(n)+Math.sqrt(n*n+1));return 0>n?-G:G}},"es6-impl","es3");$jscomp.polyfill("Math.acosh",function(n){return n?n:function(n){n=Number(n);return Math.log(n+Math.sqrt(n*n-1))}},"es6-impl","es3");
$jscomp.polyfill("Math.log1p",function(n){return n?n:function(n){n=Number(n);if(.25>n&&-.25<n){for(var G=n,N=1,V=n,la=0,ya=1;la!=V;)G*=n,ya*=-1,V=(la=V)+ya*G/++N;return V}return Math.log(1+n)}},"es6-impl","es3");$jscomp.polyfill("Math.atanh",function(n){if(n)return n;var G=Math.log1p;return function(n){n=Number(n);return(G(n)-G(-n))/2}},"es6-impl","es3");$jscomp.polyfill("Math.log10",function(n){return n?n:function(n){return Math.log(n)/Math.LN10}},"es6-impl","es3");
$jscomp.polyfill("Math.trunc",function(n){return n?n:function(n){n=Number(n);if(isNaN(n)||Infinity===n||-Infinity===n||0===n)return n;var G=Math.floor(Math.abs(n));return 0>n?-G:G}},"es6-impl","es3");
$jscomp.polyfill("Math.hypot",function(n){return n?n:function(n,J,N){n=Number(n);J=Number(J);var G,la,ya,Fa=Math.max(Math.abs(n),Math.abs(J));for(G=2;G<arguments.length;G++)Fa=Math.max(Fa,Math.abs(arguments[G]));if(1E100<Fa||1E-100>Fa){n/=Fa;J/=Fa;ya=n*n+J*J;for(G=2;G<arguments.length;G++)la=Number(arguments[G])/Fa,ya+=la*la;return Math.sqrt(ya)*Fa}ya=n*n+J*J;for(G=2;G<arguments.length;G++)la=Number(arguments[G]),ya+=la*la;return Math.sqrt(ya)}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.findIndex",function(n){return n?n:function(n,J){return $jscomp.findInternal(this,n,J).i}},"es6-impl","es3");
(function(n,G){"object"===typeof exports&&"undefined"!==typeof module?G(exports):"function"===typeof define&&define.amd?define(["exports"],G):G(n.pixpipe=n.pixpipe||{})})(this,function(n){function G(){throw Error("setTimeout has not been defined");}function J(){throw Error("clearTimeout has not been defined");}function N(a){if(Xa===setTimeout)return setTimeout(a,0);if((Xa===G||!Xa)&&setTimeout)return Xa=setTimeout,setTimeout(a,0);try{return Xa(a,0)}catch(b){try{return Xa.call(null,a,0)}catch(c){return Xa.call(this,
a,0)}}}function V(a){if(Ya===clearTimeout)return clearTimeout(a);if((Ya===J||!Ya)&&clearTimeout)return Ya=clearTimeout,clearTimeout(a);try{return Ya(a)}catch(b){try{return Ya.call(null,a)}catch(c){return Ya.call(this,a)}}}function la(){rb&&fb&&(rb=!1,fb.length?Qa=fb.concat(Qa):hc=-1,Qa.length&&ya())}function ya(){if(!rb){var a=N(la);rb=!0;for(var b=Qa.length;b;){fb=Qa;for(Qa=[];++hc<b;)fb&&fb[hc].run();hc=-1;b=Qa.length}fb=null;rb=!1;V(a)}}function Fa(a,b){this.fun=a;this.array=b}function gb(){}function pg(){throw Error("Dynamic requires are not currently supported by rollup-plugin-commonjs");
}function va(a,b){return b={exports:{}},a(b,b.exports),b.exports}function Yd(){Oc=!0;for(var a=0;64>a;++a)Ha[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a],za["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(a)]=a;za[45]=62;za[95]=63}function qg(a,b,c){for(var d=[],e=b;e<c;e+=3)b=(a[e]<<16)+(a[e+1]<<8)+a[e+2],d.push(Ha[b>>18&63]+Ha[b>>12&63]+Ha[b>>6&63]+Ha[b&63]);return d.join("")}function Zd(a){Oc||Yd();for(var b=a.length,c=b%3,d="",e=[],f=0,
g=b-c;f<g;f+=16383)e.push(qg(a,f,f+16383>g?g:f+16383));1===c?(a=a[b-1],d+=Ha[a>>2],d+=Ha[a<<4&63],d+="=="):2===c&&(a=(a[b-2]<<8)+a[b-1],d+=Ha[a>>10],d+=Ha[a>>4&63],d+=Ha[a<<2&63],d+="=");e.push(d);return e.join("")}function ic(a,b,c,d,e){var f;f=8*e-d-1;var g=(1<<f)-1,h=g>>1,l=-7;e=c?e-1:0;var k=c?-1:1,m=a[b+e];e+=k;c=m&(1<<-l)-1;m>>=-l;for(l+=f;0<l;c=256*c+a[b+e],e+=k,l-=8);f=c&(1<<-l)-1;c>>=-l;for(l+=d;0<l;f=256*f+a[b+e],e+=k,l-=8);if(0===c)c=1-h;else{if(c===g)return f?NaN:Infinity*(m?-1:1);f+=
Math.pow(2,d);c-=h}return(m?-1:1)*f*Math.pow(2,c-d)}function $d(a,b,c,d,e,f){var g,h=8*f-e-1,l=(1<<h)-1,k=l>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;f=d?0:f-1;var r=d?1:-1,t=0>b||0===b&&0>1/b?1:0;b=Math.abs(b);isNaN(b)||Infinity===b?(b=isNaN(b)?1:0,d=l):(d=Math.floor(Math.log(b)/Math.LN2),1>b*(g=Math.pow(2,-d))&&(d--,g*=2),b=1<=d+k?b+m/g:b+m*Math.pow(2,1-k),2<=b*g&&(d++,g/=2),d+k>=l?(b=0,d=l):1<=d+k?(b=(b*g-1)*Math.pow(2,e),d+=k):(b=b*Math.pow(2,k-1)*Math.pow(2,e),d=0));for(;8<=e;a[c+f]=b&255,
f+=r,b/=256,e-=8);d=d<<e|b;for(h+=e;0<h;a[c+f]=d&255,f+=r,d/=256,h-=8);a[c+f-r]|=128*t}function Ra(a,b){if((u.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<b)throw new RangeError("Invalid typed array length");u.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(b),a.__proto__=u.prototype):(null===a&&(a=new u(b)),a.length=b);return a}function u(a,b,c){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(a,b,c);if("number"===typeof a){if("string"===typeof b)throw Error("If encoding is specified then the first argument must be a string");
return Pc(this,a)}return ae(this,a,b,c)}function ae(a,b,c,d){if("number"===typeof b)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&b instanceof ArrayBuffer){b.byteLength;if(0>c||b.byteLength<c)throw new RangeError("'offset' is out of bounds");if(b.byteLength<c+(d||0))throw new RangeError("'length' is out of bounds");b=void 0===c&&void 0===d?new Uint8Array(b):void 0===d?new Uint8Array(b,c):new Uint8Array(b,c,d);u.TYPED_ARRAY_SUPPORT?(a=b,a.__proto__=
u.prototype):a=Qc(a,b);return a}if("string"===typeof b){d=a;a=c;if("string"!==typeof a||""===a)a="utf8";if(!u.isEncoding(a))throw new TypeError('"encoding" must be a valid string encoding');c=be(b,a)|0;d=Ra(d,c);b=d.write(b,a);b!==c&&(d=d.slice(0,b));return d}return rg(a,b)}function ce(a){if("number"!==typeof a)throw new TypeError('"size" argument must be a number');if(0>a)throw new RangeError('"size" argument must not be negative');}function Pc(a,b){ce(b);a=Ra(a,0>b?0:Rc(b)|0);if(!u.TYPED_ARRAY_SUPPORT)for(var c=
0;c<b;++c)a[c]=0;return a}function Qc(a,b){var c=0>b.length?0:Rc(b.length)|0;a=Ra(a,c);for(var d=0;d<c;d+=1)a[d]=b[d]&255;return a}function rg(a,b){if(Ia(b)){var c=Rc(b.length)|0;a=Ra(a,c);if(0===a.length)return a;b.copy(a,0,0,c);return a}if(b){if("undefined"!==typeof ArrayBuffer&&b.buffer instanceof ArrayBuffer||"length"in b)return(c="number"!==typeof b.length)||(c=b.length,c=c!==c),c?Ra(a,0):Qc(a,b);if("Buffer"===b.type&&de(b.data))return Qc(a,b.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");
}function Rc(a){if(a>=(u.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(u.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return a|0}function Ia(a){return!(null==a||!a._isBuffer)}function be(a,b){if(Ia(a))return a.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;"string"!==typeof a&&(a=""+a);var c=a.length;
if(0===c)return 0;for(var d=!1;;)switch(b){case "ascii":case "latin1":case "binary":return c;case "utf8":case "utf-8":case void 0:return jc(a).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*c;case "hex":return c>>>1;case "base64":return ee(a).length;default:if(d)return jc(a).length;b=(""+b).toLowerCase();d=!0}}function sg(a,b,c){var d=!1;if(void 0===b||0>b)b=0;if(b>this.length)return"";if(void 0===c||c>this.length)c=this.length;if(0>=c)return"";c>>>=0;b>>>=0;if(c<=b)return"";
for(a||(a="utf8");;)switch(a){case "hex":a=b;b=c;c=this.length;if(!a||0>a)a=0;if(!b||0>b||b>c)b=c;d="";for(c=a;c<b;++c)a=d,d=this[c],d=16>d?"0"+d.toString(16):d.toString(16),d=a+d;return d;case "utf8":case "utf-8":return fe(this,b,c);case "ascii":a="";for(c=Math.min(this.length,c);b<c;++b)a+=String.fromCharCode(this[b]&127);return a;case "latin1":case "binary":a="";for(c=Math.min(this.length,c);b<c;++b)a+=String.fromCharCode(this[b]);return a;case "base64":return b=0===b&&c===this.length?Zd(this):
Zd(this.slice(b,c)),b;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=this.slice(b,c);c="";for(a=0;a<b.length;a+=2)c+=String.fromCharCode(b[a]+256*b[a+1]);return c;default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase();d=!0}}function hb(a,b,c){var d=a[b];a[b]=a[c];a[c]=d}function ge(a,b,c,d,e){if(0===a.length)return-1;"string"===typeof c?(d=c,c=0):2147483647<c?c=2147483647:-2147483648>c&&(c=-2147483648);c=+c;isNaN(c)&&(c=e?0:a.length-1);0>c&&(c=a.length+c);if(c>=
a.length){if(e)return-1;c=a.length-1}else if(0>c)if(e)c=0;else return-1;"string"===typeof b&&(b=u.from(b,d));if(Ia(b))return 0===b.length?-1:he(a,b,c,d,e);if("number"===typeof b)return b&=255,u.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):he(a,[b],c,d,e);throw new TypeError("val must be string, number or Buffer");}function he(a,b,c,d,e){function f(a,b){return 1===g?a[b]:a.readUInt16BE(b*
g)}var g=1,h=a.length,l=b.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>a.length||2>b.length)return-1;g=2;h/=2;l/=2;c/=2}if(e)for(d=-1;c<h;c++)if(f(a,c)===f(b,-1===d?0:c-d)){if(-1===d&&(d=c),c-d+1===l)return d*g}else-1!==d&&(c-=c-d),d=-1;else for(c+l>h&&(c=h-l);0<=c;c--){h=!0;for(d=0;d<l;d++)if(f(a,c+d)!==f(b,d)){h=!1;break}if(h)return c}return-1}function fe(a,b,c){c=Math.min(a.length,c);for(var d=[];b<c;){var e=a[b],f=null,g=239<e?
4:223<e?3:191<e?2:1;if(b+g<=c){var h,l,k;switch(g){case 1:128>e&&(f=e);break;case 2:h=a[b+1];128===(h&192)&&(e=(e&31)<<6|h&63,127<e&&(f=e));break;case 3:h=a[b+1];l=a[b+2];128===(h&192)&&128===(l&192)&&(e=(e&15)<<12|(h&63)<<6|l&63,2047<e&&(55296>e||57343<e)&&(f=e));break;case 4:h=a[b+1],l=a[b+2],k=a[b+3],128===(h&192)&&128===(l&192)&&128===(k&192)&&(e=(e&15)<<18|(h&63)<<12|(l&63)<<6|k&63,65535<e&&1114112>e&&(f=e))}}null===f?(f=65533,g=1):65535<f&&(f-=65536,d.push(f>>>10&1023|55296),f=56320|f&1023);
d.push(f);b+=g}a=d.length;if(a<=ie)d=String.fromCharCode.apply(String,d);else{c="";for(b=0;b<a;)c+=String.fromCharCode.apply(String,d.slice(b,b+=ie));d=c}return d}function da(a,b,c){if(0!==a%1||0>a)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length");}function ma(a,b,c,d,e,f){if(!Ia(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<f)throw new RangeError('"value" argument is out of bounds');if(c+d>a.length)throw new RangeError("Index out of range");
}function kc(a,b,c,d){0>b&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);e<f;++e)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function lc(a,b,c,d){0>b&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);e<f;++e)a[c+e]=b>>>8*(d?e:3-e)&255}function je(a,b,c,d,e,f){if(c+d>a.length)throw new RangeError("Index out of range");if(0>c)throw new RangeError("Index out of range");}function ke(a,b,c,d,e){e||je(a,b,c,4,3.4028234663852886E38,-3.4028234663852886E38);$d(a,b,c,d,23,4);return c+4}function le(a,
b,c,d,e){e||je(a,b,c,8,1.7976931348623157E308,-1.7976931348623157E308);$d(a,b,c,d,52,8);return c+8}function jc(a,b){b=b||Infinity;for(var c,d=a.length,e=null,f=[],g=0;g<d;++g){c=a.charCodeAt(g);if(55295<c&&57344>c){if(!e){if(56319<c){-1<(b-=3)&&f.push(239,191,189);continue}else if(g+1===d){-1<(b-=3)&&f.push(239,191,189);continue}e=c;continue}if(56320>c){-1<(b-=3)&&f.push(239,191,189);e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&-1<(b-=3)&&f.push(239,191,189);e=null;if(128>c){if(0>--b)break;
f.push(c)}else if(2048>c){if(0>(b-=2))break;f.push(c>>6|192,c&63|128)}else if(65536>c){if(0>(b-=3))break;f.push(c>>12|224,c>>6&63|128,c&63|128)}else if(1114112>c){if(0>(b-=4))break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw Error("Invalid code point");}return f}function me(a){for(var b=[],c=0;c<a.length;++c)b.push(a.charCodeAt(c)&255);return b}function ee(a){a=(a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")).replace(tg,"");if(2>a.length)a="";else for(;0!==a.length%4;)a+="=";Oc||Yd();
var b,c,d,e,f;b=a.length;if(0<b%4)throw Error("Invalid string. Length must be a multiple of 4");e="="===a[b-2]?2:"="===a[b-1]?1:0;f=new ug(3*b/4-e);c=0<e?b-4:b;var g=0;for(b=0;b<c;b+=4)d=za[a.charCodeAt(b)]<<18|za[a.charCodeAt(b+1)]<<12|za[a.charCodeAt(b+2)]<<6|za[a.charCodeAt(b+3)],f[g++]=d>>16&255,f[g++]=d>>8&255,f[g++]=d&255;2===e?(d=za[a.charCodeAt(b)]<<2|za[a.charCodeAt(b+1)]>>4,f[g++]=d&255):1===e&&(d=za[a.charCodeAt(b)]<<10|za[a.charCodeAt(b+1)]<<4|za[a.charCodeAt(b+2)]>>2,f[g++]=d>>8&255,
f[g++]=d&255);return f}function Ib(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function ne(a){return null!=a&&(!!a._isBuffer||oe(a)||"function"===typeof a.readFloatLE&&"function"===typeof a.slice&&oe(a.slice(0,0)))}function oe(a){return!!a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}function sb(a){for(var b=a.length;0<=--b;)a[b]=0}function Sc(a,b,c,d,e){this.static_tree=a;this.extra_bits=b;this.extra_base=c;this.elems=d;this.max_length=
e;this.has_stree=a&&a.length}function Tc(a,b){this.dyn_tree=a;this.max_code=0;this.stat_desc=b}function Jb(a,b){a.pending_buf[a.pending++]=b&255;a.pending_buf[a.pending++]=b>>>8&255}function na(a,b,c){a.bi_valid>16-c?(a.bi_buf|=b<<a.bi_valid&65535,Jb(a,a.bi_buf),a.bi_buf=b>>16-a.bi_valid,a.bi_valid+=c-16):(a.bi_buf|=b<<a.bi_valid&65535,a.bi_valid+=c)}function Ja(a,b,c){na(a,c[2*b],c[2*b+1])}function pe(a,b){var c=0;do c|=a&1,a>>>=1,c<<=1;while(0<--b);return c>>>1}function qe(a,b,c){var d=Array(16),
e=0,f;for(f=1;15>=f;f++)d[f]=e=e+c[f-1]<<1;for(c=0;c<=b;c++)e=a[2*c+1],0!==e&&(a[2*c]=pe(d[e]++,e))}function re(a){var b;for(b=0;286>b;b++)a.dyn_ltree[2*b]=0;for(b=0;30>b;b++)a.dyn_dtree[2*b]=0;for(b=0;19>b;b++)a.bl_tree[2*b]=0;a.dyn_ltree[512]=1;a.opt_len=a.static_len=0;a.last_lit=a.matches=0}function se(a){8<a.bi_valid?Jb(a,a.bi_buf):0<a.bi_valid&&(a.pending_buf[a.pending++]=a.bi_buf);a.bi_buf=0;a.bi_valid=0}function te(a,b,c,d){var e=2*b,f=2*c;return a[e]<a[f]||a[e]===a[f]&&d[b]<=d[c]}function Uc(a,
b,c){for(var d=a.heap[c],e=c<<1;e<=a.heap_len;){e<a.heap_len&&te(b,a.heap[e+1],a.heap[e],a.depth)&&e++;if(te(b,d,a.heap[e],a.depth))break;a.heap[c]=a.heap[e];c=e;e<<=1}a.heap[c]=d}function ue(a,b,c){var d,e,f=0,g,h;if(0!==a.last_lit){do d=a.pending_buf[a.d_buf+2*f]<<8|a.pending_buf[a.d_buf+2*f+1],e=a.pending_buf[a.l_buf+f],f++,0===d?Ja(a,e,b):(g=Kb[e],Ja(a,g+256+1,b),h=Vc[g],0!==h&&(e-=Wc[g],na(a,e,h)),d--,g=256>d?ib[d]:ib[256+(d>>>7)],Ja(a,g,c),h=mc[g],0!==h&&(d-=nc[g],na(a,d,h)));while(f<a.last_lit)
}Ja(a,256,b)}function Xc(a,b){var c=b.dyn_tree,d=b.stat_desc.static_tree,e=b.stat_desc.has_stree,f=b.stat_desc.elems,g,h=-1,l;a.heap_len=0;a.heap_max=573;for(g=0;g<f;g++)0!==c[2*g]?(a.heap[++a.heap_len]=h=g,a.depth[g]=0):c[2*g+1]=0;for(;2>a.heap_len;)l=a.heap[++a.heap_len]=2>h?++h:0,c[2*l]=1,a.depth[l]=0,a.opt_len--,e&&(a.static_len-=d[2*l+1]);b.max_code=h;for(g=a.heap_len>>1;1<=g;g--)Uc(a,c,g);l=f;do g=a.heap[1],a.heap[1]=a.heap[a.heap_len--],Uc(a,c,1),d=a.heap[1],a.heap[--a.heap_max]=g,a.heap[--a.heap_max]=
d,c[2*l]=c[2*g]+c[2*d],a.depth[l]=(a.depth[g]>=a.depth[d]?a.depth[g]:a.depth[d])+1,c[2*g+1]=c[2*d+1]=l,a.heap[1]=l++,Uc(a,c,1);while(2<=a.heap_len);a.heap[--a.heap_max]=a.heap[1];g=b.dyn_tree;l=b.max_code;var d=b.stat_desc.static_tree,e=b.stat_desc.has_stree,f=b.stat_desc.extra_bits,k=b.stat_desc.extra_base,m=b.stat_desc.max_length,r,t,p,q,v=0;for(t=0;15>=t;t++)a.bl_count[t]=0;g[2*a.heap[a.heap_max]+1]=0;for(b=a.heap_max+1;573>b;b++)r=a.heap[b],t=g[2*g[2*r+1]+1]+1,t>m&&(t=m,v++),g[2*r+1]=t,r>l||(a.bl_count[t]++,
p=0,r>=k&&(p=f[r-k]),q=g[2*r],a.opt_len+=q*(t+p),e&&(a.static_len+=q*(d[2*r+1]+p)));if(0!==v){do{for(t=m-1;0===a.bl_count[t];)t--;a.bl_count[t]--;a.bl_count[t+1]+=2;a.bl_count[m]--;v-=2}while(0<v);for(t=m;0!==t;t--)for(r=a.bl_count[t];0!==r;)d=a.heap[--b],d>l||(g[2*d+1]!==t&&(a.opt_len+=(t-g[2*d+1])*g[2*d],g[2*d+1]=t),r--)}qe(c,h,a.bl_count)}function ve(a,b,c){var d,e=-1,f,g=b[1],h=0,l=7,k=4;0===g&&(l=138,k=3);b[2*(c+1)+1]=65535;for(d=0;d<=c;d++)f=g,g=b[2*(d+1)+1],++h<l&&f===g||(h<k?a.bl_tree[2*f]+=
h:0!==f?(f!==e&&a.bl_tree[2*f]++,a.bl_tree[32]++):10>=h?a.bl_tree[34]++:a.bl_tree[36]++,h=0,e=f,0===g?(l=138,k=3):f===g?(l=6,k=3):(l=7,k=4))}function we(a,b,c){var d,e=-1,f,g=b[1],h=0,l=7,k=4;0===g&&(l=138,k=3);for(d=0;d<=c;d++)if(f=g,g=b[2*(d+1)+1],!(++h<l&&f===g)){if(h<k){do Ja(a,f,a.bl_tree);while(0!==--h)}else 0!==f?(f!==e&&(Ja(a,f,a.bl_tree),h--),Ja(a,16,a.bl_tree),na(a,h-3,2)):10>=h?(Ja(a,17,a.bl_tree),na(a,h-3,3)):(Ja(a,18,a.bl_tree),na(a,h-11,7));h=0;e=f;0===g?(l=138,k=3):f===g?(l=6,k=3):
(l=7,k=4)}}function vg(a){var b=4093624447,c;for(c=0;31>=c;c++,b>>>=1)if(b&1&&0!==a.dyn_ltree[2*c])return 0;if(0!==a.dyn_ltree[18]||0!==a.dyn_ltree[20]||0!==a.dyn_ltree[26])return 1;for(c=32;256>c;c++)if(0!==a.dyn_ltree[2*c])return 1;return 0}function xe(a,b,c,d){na(a,0+(d?1:0),3);se(a);Jb(a,c);Jb(a,~c);L.arraySet(a.pending_buf,a.window,b,c,a.pending);a.pending+=c}function Za(a,b){a.msg=tb[b];return b}function $a(a){for(var b=a.length;0<=--b;)a[b]=0}function ab(a){var b=a.state,c=b.pending;c>a.avail_out&&
(c=a.avail_out);0!==c&&(L.arraySet(a.output,b.pending_buf,b.pending_out,c,a.next_out),a.next_out+=c,b.pending_out+=c,a.total_out+=c,a.avail_out-=c,b.pending-=c,0===b.pending&&(b.pending_out=0))}function ha(a,b){Aa._tr_flush_block(a,0<=a.block_start?a.block_start:-1,a.strstart-a.block_start,b);a.block_start=a.strstart;ab(a.strm)}function S(a,b){a.pending_buf[a.pending++]=b}function Lb(a,b){a.pending_buf[a.pending++]=b>>>8&255;a.pending_buf[a.pending++]=b&255}function ye(a,b){var c=a.max_chain_length,
d=a.strstart,e,f=a.prev_length,g=a.nice_match,h=a.strstart>a.w_size-262?a.strstart-(a.w_size-262):0,l=a.window,k=a.w_mask,m=a.prev,r=a.strstart+258,t=l[d+f-1],p=l[d+f];a.prev_length>=a.good_match&&(c>>=2);g>a.lookahead&&(g=a.lookahead);do if(e=b,l[e+f]===p&&l[e+f-1]===t&&l[e]===l[d]&&l[++e]===l[d+1]){d+=2;for(e++;l[++d]===l[++e]&&l[++d]===l[++e]&&l[++d]===l[++e]&&l[++d]===l[++e]&&l[++d]===l[++e]&&l[++d]===l[++e]&&l[++d]===l[++e]&&l[++d]===l[++e]&&d<r;);e=258-(r-d);d=r-258;if(e>f){a.match_start=b;
f=e;if(e>=g)break;t=l[d+f-1];p=l[d+f]}}while((b=m[b&k])>h&&0!==--c);return f<=a.lookahead?f:a.lookahead}function jb(a){var b=a.w_size,c,d,e,f;do{f=a.window_size-a.lookahead-a.strstart;if(a.strstart>=b+(b-262)){L.arraySet(a.window,a.window,b,b,0);a.match_start-=b;a.strstart-=b;a.block_start-=b;c=d=a.hash_size;do e=a.head[--c],a.head[c]=e>=b?e-b:0;while(--d);c=d=b;do e=a.prev[--c],a.prev[c]=e>=b?e-b:0;while(--d);f+=b}if(0===a.strm.avail_in)break;c=a.strm;d=a.window;e=a.strstart+a.lookahead;var g=c.avail_in;
g>f&&(g=f);0===g?d=0:(c.avail_in-=g,L.arraySet(d,c.input,c.next_in,g,e),1===c.state.wrap?c.adler=Mb(c.adler,d,g,e):2===c.state.wrap&&(c.adler=ea(c.adler,d,g,e)),c.next_in+=g,c.total_in+=g,d=g);a.lookahead+=d;if(3<=a.lookahead+a.insert)for(f=a.strstart-a.insert,a.ins_h=a.window[f],a.ins_h=(a.ins_h<<a.hash_shift^a.window[f+1])&a.hash_mask;a.insert&&!(a.ins_h=(a.ins_h<<a.hash_shift^a.window[f+3-1])&a.hash_mask,a.prev[f&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=f,f++,a.insert--,3>a.lookahead+a.insert););
}while(262>a.lookahead&&0!==a.strm.avail_in)}function Yc(a,b){for(var c;;){if(262>a.lookahead){jb(a);if(262>a.lookahead&&0===b)return 1;if(0===a.lookahead)break}c=0;3<=a.lookahead&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);0!==c&&a.strstart-c<=a.w_size-262&&(a.match_length=ye(a,c));if(3<=a.match_length)if(c=Aa._tr_tally(a,a.strstart-a.match_start,a.match_length-3),a.lookahead-=a.match_length,a.match_length<=
a.max_lazy_match&&3<=a.lookahead){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(0!==--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;else c=Aa._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(c&&(ha(a,!1),0===a.strm.avail_out))return 1}a.insert=
2>a.strstart?a.strstart:2;return 4===b?(ha(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(ha(a,!1),0===a.strm.avail_out)?1:2}function ub(a,b){for(var c,d;;){if(262>a.lookahead){jb(a);if(262>a.lookahead&&0===b)return 1;if(0===a.lookahead)break}c=0;3<=a.lookahead&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);a.prev_length=a.match_length;a.prev_match=a.match_start;a.match_length=2;0!==c&&a.prev_length<a.max_lazy_match&&
a.strstart-c<=a.w_size-262&&(a.match_length=ye(a,c),5>=a.match_length&&(1===a.strategy||3===a.match_length&&4096<a.strstart-a.match_start)&&(a.match_length=2));if(3<=a.prev_length&&a.match_length<=a.prev_length){d=a.strstart+a.lookahead-3;c=Aa._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-3);a.lookahead-=a.prev_length-1;a.prev_length-=2;do++a.strstart<=d&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);
while(0!==--a.prev_length);a.match_available=0;a.match_length=2;a.strstart++;if(c&&(ha(a,!1),0===a.strm.avail_out))return 1}else if(a.match_available){if((c=Aa._tr_tally(a,0,a.window[a.strstart-1]))&&ha(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return 1}else a.match_available=1,a.strstart++,a.lookahead--}a.match_available&&(Aa._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0);a.insert=2>a.strstart?a.strstart:2;return 4===b?(ha(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(ha(a,
!1),0===a.strm.avail_out)?1:2}function wg(a,b){for(var c,d,e,f=a.window;;){if(258>=a.lookahead){jb(a);if(258>=a.lookahead&&0===b)return 1;if(0===a.lookahead)break}a.match_length=0;if(3<=a.lookahead&&0<a.strstart&&(d=a.strstart-1,c=f[d],c===f[++d]&&c===f[++d]&&c===f[++d])){for(e=a.strstart+258;c===f[++d]&&c===f[++d]&&c===f[++d]&&c===f[++d]&&c===f[++d]&&c===f[++d]&&c===f[++d]&&c===f[++d]&&d<e;);a.match_length=258-(e-d);a.match_length>a.lookahead&&(a.match_length=a.lookahead)}3<=a.match_length?(c=Aa._tr_tally(a,
1,a.match_length-3),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(c=Aa._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++);if(c&&(ha(a,!1),0===a.strm.avail_out))return 1}a.insert=0;return 4===b?(ha(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(ha(a,!1),0===a.strm.avail_out)?1:2}function xg(a,b){for(var c;;){if(0===a.lookahead&&(jb(a),0===a.lookahead)){if(0===b)return 1;break}a.match_length=0;c=Aa._tr_tally(a,0,a.window[a.strstart]);a.lookahead--;a.strstart++;
if(c&&(ha(a,!1),0===a.strm.avail_out))return 1}a.insert=0;return 4===b?(ha(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(ha(a,!1),0===a.strm.avail_out)?1:2}function Ka(a,b,c,d,e){this.good_length=a;this.max_lazy=b;this.nice_length=c;this.max_chain=d;this.func=e}function yg(){this.strm=null;this.status=0;this.pending_buf=null;this.wrap=this.pending=this.pending_out=this.pending_buf_size=0;this.gzhead=null;this.gzindex=0;this.method=8;this.last_flush=-1;this.w_mask=this.w_bits=this.w_size=0;this.window=
null;this.window_size=0;this.head=this.prev=null;this.nice_match=this.good_match=this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=this.hash_shift=this.hash_mask=this.hash_bits=this.hash_size=this.ins_h=0;this.dyn_ltree=new L.Buf16(1146);this.dyn_dtree=new L.Buf16(122);this.bl_tree=new L.Buf16(78);$a(this.dyn_ltree);$a(this.dyn_dtree);$a(this.bl_tree);
this.bl_desc=this.d_desc=this.l_desc=null;this.bl_count=new L.Buf16(16);this.heap=new L.Buf16(573);$a(this.heap);this.heap_max=this.heap_len=0;this.depth=new L.Buf16(573);$a(this.depth);this.bi_valid=this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=this.d_buf=this.last_lit=this.lit_bufsize=this.l_buf=0}function ze(a){var b;if(!a||!a.state)return Za(a,-2);a.total_in=a.total_out=0;a.data_type=2;b=a.state;b.pending=0;b.pending_out=0;0>b.wrap&&(b.wrap=-b.wrap);b.status=b.wrap?42:113;
a.adler=2===b.wrap?0:1;b.last_flush=0;Aa._tr_init(b);return 0}function Ae(a){var b=ze(a);0===b&&(a=a.state,a.window_size=2*a.w_size,$a(a.head),a.max_lazy_match=vb[a.level].max_lazy,a.good_match=vb[a.level].good_length,a.nice_match=vb[a.level].nice_length,a.max_chain_length=vb[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=2,a.match_available=0,a.ins_h=0);return b}function Be(a,b,c,d,e,f){if(!a)return-2;var g=1;-1===b&&(b=6);0>d?(g=0,d=-d):15<
d&&(g=2,d-=16);if(1>e||9<e||8!==c||8>d||15<d||0>b||9<b||0>f||4<f)return Za(a,-2);8===d&&(d=9);var h=new yg;a.state=h;h.strm=a;h.wrap=g;h.gzhead=null;h.w_bits=d;h.w_size=1<<h.w_bits;h.w_mask=h.w_size-1;h.hash_bits=e+7;h.hash_size=1<<h.hash_bits;h.hash_mask=h.hash_size-1;h.hash_shift=~~((h.hash_bits+3-1)/3);h.window=new L.Buf8(2*h.w_size);h.head=new L.Buf16(h.hash_size);h.prev=new L.Buf16(h.w_size);h.lit_bufsize=1<<e+6;h.pending_buf_size=4*h.lit_bufsize;h.pending_buf=new L.Buf8(h.pending_buf_size);
h.d_buf=1*h.lit_bufsize;h.l_buf=3*h.lit_bufsize;h.level=b;h.strategy=f;h.method=c;return Ae(a)}function Ce(a,b){if(65537>b&&(a.subarray&&De||!a.subarray&&Ee))return String.fromCharCode.apply(null,L.shrinkBuf(a,b));for(var c="",d=0;d<b;d++)c+=String.fromCharCode(a[d]);return c}function kb(a){if(!(this instanceof kb))return new kb(a);a=this.options=L.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},a||{});a.raw&&0<a.windowBits?a.windowBits=-a.windowBits:a.gzip&&0<
a.windowBits&&16>a.windowBits&&(a.windowBits+=16);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new Fe;this.strm.avail_out=0;var b=Nb.deflateInit2(this.strm,a.level,a.method,a.windowBits,a.memLevel,a.strategy);if(0!==b)throw Error(tb[b]);a.header&&Nb.deflateSetHeader(this.strm,a.header);if(a.dictionary){a="string"===typeof a.dictionary?lb.string2buf(a.dictionary):"[object ArrayBuffer]"===Ge.call(a.dictionary)?new Uint8Array(a.dictionary):a.dictionary;b=Nb.deflateSetDictionary(this.strm,
a);if(0!==b)throw Error(tb[b]);this._dict_set=!0}}function Zc(a,b){b=new kb(b);b.push(a,!0);if(b.err)throw b.msg||tb[b.err];return b.result}function He(a){return(a>>>24&255)+(a>>>8&65280)+((a&65280)<<8)+((a&255)<<24)}function zg(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=0;this.window=null;this.extra=this.offset=this.length=this.bits=this.hold=0;this.distcode=this.lencode=null;this.have=
this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0;this.next=null;this.lens=new L.Buf16(320);this.work=new L.Buf16(288);this.distdyn=this.lendyn=null;this.was=this.back=this.sane=0}function Ie(a){var b;if(!a||!a.state)return-2;b=a.state;a.total_in=a.total_out=b.total=0;a.msg="";b.wrap&&(a.adler=b.wrap&1);b.mode=1;b.last=0;b.havedict=0;b.dmax=32768;b.head=null;b.hold=0;b.bits=0;b.lencode=b.lendyn=new L.Buf32(852);b.distcode=b.distdyn=new L.Buf32(592);b.sane=1;b.back=-1;return 0}function Je(a){var b;
if(!a||!a.state)return-2;b=a.state;b.wsize=0;b.whave=0;b.wnext=0;return Ie(a)}function Ke(a,b){var c,d;if(!a||!a.state)return-2;d=a.state;0>b?(c=0,b=-b):(c=(b>>4)+1,48>b&&(b&=15));if(b&&(8>b||15<b))return-2;null!==d.window&&d.wbits!==b&&(d.window=null);d.wrap=c;d.wbits=b;return Je(a)}function Le(a,b){var c;if(!a)return-2;c=new zg;a.state=c;c.window=null;b=Ke(a,b);0!==b&&(a.state=null);return b}function Me(a,b,c,d){var e=a.state;null===e.window&&(e.wsize=1<<e.wbits,e.wnext=0,e.whave=0,e.window=new L.Buf8(e.wsize));
d>=e.wsize?(L.arraySet(e.window,b,c-e.wsize,e.wsize,0),e.wnext=0,e.whave=e.wsize):(a=e.wsize-e.wnext,a>d&&(a=d),L.arraySet(e.window,b,c-d,a,e.wnext),(d-=a)?(L.arraySet(e.window,b,c-d,d,0),e.wnext=d,e.whave=e.wsize):(e.wnext+=a,e.wnext===e.wsize&&(e.wnext=0),e.whave<e.wsize&&(e.whave+=a)));return 0}function mb(a){if(!(this instanceof mb))return new mb(a);var b=this.options=L.assign({chunkSize:16384,windowBits:0,to:""},a||{});b.raw&&0<=b.windowBits&&16>b.windowBits&&(b.windowBits=-b.windowBits,0===
b.windowBits&&(b.windowBits=-15));!(0<=b.windowBits&&16>b.windowBits)||a&&a.windowBits||(b.windowBits+=32);15<b.windowBits&&48>b.windowBits&&0===(b.windowBits&15)&&(b.windowBits|=15);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new Fe;this.strm.avail_out=0;a=Ob.inflateInit2(this.strm,b.windowBits);if(a!==Y.Z_OK)throw Error(tb[a]);this.header=new Ag;Ob.inflateGetHeader(this.strm,this.header)}function $c(a,b){b=new mb(b);b.push(a,!0);if(b.err)throw b.msg||tb[b.err];return b.result}
function Ne(){}function Bg(a,b,c,d,e){function f(a){var b=a.slice(1,-1);if(b in c)return c[b];if("#"===b.charAt(0))return a=parseInt(b.substr(1).replace("x","0x")),65535<a?(a-=65536,a=String.fromCharCode(55296+(a>>10),56320+(a&1023))):a=String.fromCharCode(a),a;e.error("entity not found:"+a);return a}function g(b){if(b>p){var c=a.substring(p,b).replace(/&#?\w+;/g,f);r&&h(p);d.characters(c,0,b-p);p=b}}function h(b,c){for(;b>=k&&(c=m.exec(a));)l=c.index,k=l+c[0].length,r.lineNumber++;r.columnNumber=
b-l+1}var l=0,k=0,m=/.*(?:\r\n?|\n)|.*$/g,r=d.locator;b=[{currentNSMap:b}];for(var t={},p=0;;){try{var q=a.indexOf("<",p);if(0>q){if(!a.substr(p).match(/^\s*$/)){var v=d.doc,B=v.createTextNode(a.substr(p));v.appendChild(B);d.currentElement=B}break}q>p&&g(q);switch(a.charAt(q+1)){case "/":var z=a.indexOf(">",q+3),x=a.substring(q+2,z),w=b.pop();0>z?(x=a.substring(q+2).replace(/[\s<].*/,""),e.error("end tag name: "+x+" is not complete:"+w.tagName),z=q+1+x.length):x.match(/\s</)&&(x=x.replace(/[\s<].*/,
""),e.error("end tag name: "+x+" maybe not complete"),z=q+1+x.length);var M=w.localNSMap,C=w.tagName==x;if(C||w.tagName&&w.tagName.toLowerCase()==x.toLowerCase()){d.endElement(w.uri,w.localName,x);if(M)for(var n in M)d.endPrefixMapping(n);C||e.fatalError("end tag name: "+x+" is not match the current start tagName:"+w.tagName)}else b.push(w);z++;break;case "?":r&&h(q);z=Cg(a,q,d);break;case "!":r&&h(q);z=Dg(a,q,d,e);break;default:r&&h(q);var D=new Oe,u=b[b.length-1].currentNSMap,z=Eg(a,q,D,u,f,e),
ja=D.length;!D.closed&&Fg(a,z,D.tagName,t)&&(D.closed=!0,c.nbsp||e.warning("unclosed xml attribute"));if(r&&ja){for(var y=Qe(r,{}),W=0;W<ja;W++){var F=D[W];h(F.offset);F.locator=Qe(r,{})}d.locator=y;Re(D,d,u)&&b.push(D);d.locator=r}else Re(D,d,u)&&b.push(D);"http://www.w3.org/1999/xhtml"!==D.uri||D.closed?z++:z=Gg(a,z,D.tagName,f,d)}}catch(H){e.error("element parse error: "+H),z=-1}z>p?p=z:g(Math.max(q,p)+1)}}function Qe(a,b){b.lineNumber=a.lineNumber;b.columnNumber=a.columnNumber;return b}function Eg(a,
b,c,d,e,f){for(var g,h,l=++b,k=0;;){var m=a.charAt(l);switch(m){case "=":if(1===k)g=a.slice(b,l),k=3;else if(2===k)k=3;else throw Error("attribute equal must after attrName");break;case "'":case '"':if(3===k||1===k)if(1===k&&(f.warning('attribute value must after "="'),g=a.slice(b,l)),b=l+1,l=a.indexOf(m,b),0<l)h=a.slice(b,l).replace(/&#?\w+;/g,e),c.add(g,h,b-1),k=5;else throw Error("attribute value no end '"+m+"' match");else if(4==k)h=a.slice(b,l).replace(/&#?\w+;/g,e),c.add(g,h,b),f.warning('attribute "'+
g+'" missed start quot('+m+")!!"),b=l+1,k=5;else throw Error('attribute value must after "="');break;case "/":switch(k){case 0:c.setTagName(a.slice(b,l));case 5:case 6:case 7:k=7,c.closed=!0;case 4:case 1:case 2:break;default:throw Error("attribute invalid close char('/')");}break;case "":return f.error("unexpected end of input"),0==k&&c.setTagName(a.slice(b,l)),l;case ">":switch(k){case 0:c.setTagName(a.slice(b,l));case 5:case 6:case 7:break;case 4:case 1:h=a.slice(b,l),"/"===h.slice(-1)&&(c.closed=
!0,h=h.slice(0,-1));case 2:2===k&&(h=g);4==k?(f.warning('attribute "'+h+'" missed quot(")!!'),c.add(g,h.replace(/&#?\w+;/g,e),b)):("http://www.w3.org/1999/xhtml"===d[""]&&h.match(/^(?:disabled|checked|selected)$/i)||f.warning('attribute "'+h+'" missed value!! "'+h+'" instead!!'),c.add(h,h,b));break;case 3:throw Error("attribute value missed!!");}return l;case "\u0080":m=" ";default:if(" ">=m)switch(k){case 0:c.setTagName(a.slice(b,l));k=6;break;case 1:g=a.slice(b,l);k=2;break;case 4:h=a.slice(b,l).replace(/&#?\w+;/g,
e),f.warning('attribute "'+h+'" missed quot(")!!'),c.add(g,h,b);case 5:k=6}else switch(k){case 2:"http://www.w3.org/1999/xhtml"===d[""]&&g.match(/^(?:disabled|checked|selected)$/i)||f.warning('attribute "'+g+'" missed value!! "'+g+'" instead2!!');c.add(g,g,b);b=l;k=1;break;case 5:f.warning('attribute space is required"'+g+'"!!');case 6:k=1;b=l;break;case 3:k=4;b=l;break;case 7:throw Error("elements closed character '/' and '>' must be connected to");}}l++}}function Re(a,b,c){for(var d=a.tagName,e=
null,f=a.length;f--;){var g=a[f],h=g.qName,l=g.value,k=h.indexOf(":");if(0<k)var m=g.prefix=h.slice(0,k),k=h.slice(k+1),m="xmlns"===m&&k;else k=h,m="xmlns"===h&&"";g.localName=k;!1!==m&&(null==e&&(e={},Se(c,c={})),c[m]=e[m]=l,g.uri="http://www.w3.org/2000/xmlns/",b.startPrefixMapping(m,l))}for(f=a.length;f--;)if(g=a[f],m=g.prefix)"xml"===m&&(g.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==m&&(g.uri=c[m||""]);k=d.indexOf(":");0<k?(m=a.prefix=d.slice(0,k),k=a.localName=d.slice(k+1)):(m=null,
k=a.localName=d);f=a.uri=c[m||""];b.startElement(f,k,d,a);if(a.closed){if(b.endElement(f,k,d),e)for(m in e)b.endPrefixMapping(m)}else return a.currentNSMap=c,a.localNSMap=e,!0}function Gg(a,b,c,d,e){if(/^(?:script|textarea)$/i.test(c)){var f=a.indexOf("</"+c+">",b);a=a.substring(b+1,f);if(/[&<]/.test(a)){if(/^script$/i.test(c))return e.characters(a,0,a.length),f;a=a.replace(/&#?\w+;/g,d);e.characters(a,0,a.length);return f}}return b+1}function Fg(a,b,c,d){var e=d[c];null==e&&(e=a.lastIndexOf("</"+
c+">"),e<b&&(e=a.lastIndexOf("</"+c)),d[c]=e);return e<b}function Se(a,b){for(var c in a)b[c]=a[c]}function Dg(a,b,c,d){switch(a.charAt(b+2)){case "-":if("-"===a.charAt(b+3)){var e=a.indexOf("--\x3e",b+4);if(e>b)return c.comment(a,b+4,e-b-4),e+3;d.error("Unclosed comment")}break;default:if("CDATA["==a.substr(b+3,6))return e=a.indexOf("]]\x3e",b+9),c.startCDATA(),c.characters(a,b+9,e-b-9),c.endCDATA(),e+3;a:{d=[];e=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;e.lastIndex=b;for(e.exec(a);b=e.exec(a);)if(d.push(b),
b[1]){e=d;break a}e=void 0}var f=e.length;if(1<f&&/!doctype/i.test(e[0][0]))return a=e[1][0],b=3<f&&/^public$/i.test(e[2][0])&&e[3][0],d=4<f&&e[4][0],e=e[f-1],c.startDTD(a,b&&b.replace(/^(['"])(.*?)\1$/,"$2"),d&&d.replace(/^(['"])(.*?)\1$/,"$2")),c.endDTD(),e.index+e[0].length}return-1}function Cg(a,b,c){var d=a.indexOf("?>",b);return d&&(a=a.substring(b,d).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/))?(c.processingInstruction(a[1],a[2]),d+2):-1}function Oe(a){}function oc(a,b){a.__proto__=b;return a}function Pb(a,
b){for(var c in a)b[c]=a[c]}function pa(a,b){var c=a.prototype;if(Object.create){var d=Object.create(b.prototype);c.__proto__=d}c instanceof b||(d=function(){},d.prototype=b.prototype,d=new d,Pb(c,d),a.prototype=c=d);c.constructor!=a&&("function"!=typeof a&&console.error("unknow Class:"+a),c.constructor=a)}function wb(a,b){if(b instanceof Error)var c=b;else c=this,Error.call(this,T[a]),this.message=T[a],Error.captureStackTrace&&Error.captureStackTrace(this,wb);c.code=a;b&&(this.message=this.message+
": "+b);return c}function bb(){}function Qb(a,b){this._node=a;this._refresh=b;ad(this)}function ad(a){var b=a._node._inc||a._node.ownerDocument._inc;if(a._inc!=b){var c=a._refresh(a._node);Te(a,"length",c.length);Pb(c,a);a._inc=b}}function pc(){}function Ue(a,b){for(var c=a.length;c--;)if(a[c]===b)return c}function Ve(a,b,c,d){d?b[Ue(b,d)]=c:b[b.length++]=c;a&&(c.ownerElement=a,b=a.ownerDocument)&&(d&&We(b,a,d),b&&b._inc++,"http://www.w3.org/2000/xmlns/"==c.namespaceURI&&(a._nsMap[c.prefix?c.localName:
""]=c.value))}function Xe(a,b,c){var d=Ue(b,c);if(0<=d){for(var e=b.length-1;d<e;)b[d]=b[++d];b.length=e;a&&(b=a.ownerDocument)&&(We(b,a,c),c.ownerElement=null)}else throw wb(Hg,Error(a.tagName+"@"+c));}function Ye(a){this._features={};if(a)for(var b in a)this._features=a[b]}function ia(){}function Ze(a){return"<"==a&&"&lt;"||">"==a&&"&gt;"||"&"==a&&"&amp;"||'"'==a&&"&quot;"||"&#"+a.charCodeAt()+";"}function qc(a,b){if(b(a))return!0;if(a=a.firstChild){do if(qc(a,b))return!0;while(a=a.nextSibling)
}}function Rb(){}function We(a,b,c,d){a&&a._inc++;"http://www.w3.org/2000/xmlns/"==c.namespaceURI&&delete b._nsMap[c.prefix?c.localName:""]}function bd(a,b,c){if(a&&a._inc)if(a._inc++,a=b.childNodes,c)a[a.length++]=c;else{b=b.firstChild;for(c=0;b;)a[c++]=b,b=b.nextSibling;a.length=c}}function $e(a,b){var c=b.previousSibling,d=b.nextSibling;c?c.nextSibling=d:a.firstChild=d;d?d.previousSibling=c:a.lastChild=c;bd(a.ownerDocument,a);return b}function af(a,b,c){var d=b.parentNode;d&&d.removeChild(b);if(b.nodeType===
Sa){d=b.firstChild;if(null==d)return b;var e=b.lastChild}else d=e=b;var f=c?c.previousSibling:a.lastChild;d.previousSibling=f;e.nextSibling=c;f?f.nextSibling=d:a.firstChild=d;null==c?a.lastChild=e:c.previousSibling=e;do d.parentNode=a;while(d!==e&&(d=d.nextSibling));bd(a.ownerDocument||a,a);b.nodeType==Sa&&(b.firstChild=b.lastChild=null);return b}function xb(){this._nsMap={}}function rc(){}function Sb(){}function cd(){}function dd(){}function ed(){}function fd(){}function bf(){}function cf(){}function gd(){}
function sc(){}function hd(){}function df(){}function ef(a,b){var c=[],d=9==this.nodeType?this.documentElement:this,e=d.prefix,f=d.namespaceURI;if(f&&null==e&&(e=d.lookupPrefix(f),null==e))var g=[{namespace:f,prefix:null}];yb(this,c,a,b,g);return c.join("")}function ff(a,b,c){b=a.prefix||"";a=a.namespaceURI;if(!b&&!a||"xml"===b&&"http://www.w3.org/XML/1998/namespace"===a||"http://www.w3.org/2000/xmlns/"==a)return!1;for(var d=c.length;d--;){var e=c[d];if(e.prefix==b)return e.namespace!=a}return!0}
function yb(a,b,c,d,e){if(d)if(a=d(a)){if("string"==typeof a){b.push(a);return}}else return;switch(a.nodeType){case La:e||(e=[]);var f=a.attributes,g=f.length,h=a.firstChild,l=a.tagName;c="http://www.w3.org/1999/xhtml"===a.namespaceURI||c;b.push("<",l);for(var k=0;k<g;k++){var m=f.item(k);"xmlns"==m.prefix?e.push({prefix:m.localName,namespace:m.value}):"xmlns"==m.nodeName&&e.push({prefix:"",namespace:m.value})}for(k=0;k<g;k++){m=f.item(k);if(ff(m,c,e)){var r=m.prefix||"",t=m.namespaceURI;b.push(r?
" xmlns:"+r:" xmlns",'="',t,'"');e.push({prefix:r,namespace:t})}yb(m,b,c,d,e)}ff(a,c,e)&&(r=a.prefix||"",t=a.namespaceURI,b.push(r?" xmlns:"+r:" xmlns",'="',t,'"'),e.push({prefix:r,namespace:t}));if(h||c&&!/^(?:meta|link|img|br|hr|input)$/i.test(l)){b.push(">");if(c&&/^script$/i.test(l))for(;h;)h.data?b.push(h.data):yb(h,b,c,d,e),h=h.nextSibling;else for(;h;)yb(h,b,c,d,e),h=h.nextSibling;b.push("</",l,">")}else b.push("/>");break;case gf:case Sa:for(h=a.firstChild;h;)yb(h,b,c,d,e),h=h.nextSibling;
break;case zb:return b.push(" ",a.name,'="',a.value.replace(/[<&"]/g,Ze),'"');case tc:return b.push(a.data.replace(/[<&]/g,Ze));case hf:return b.push("<![CDATA[",a.data,"]]\x3e");case jf:return b.push("\x3c!--",a.data,"--\x3e");case kf:c=a.publicId;d=a.systemId;b.push("<!DOCTYPE ",a.name);c?(b.push(' PUBLIC "',c),d&&"."!=d&&b.push('" "',d),b.push('">')):d&&"."!=d?b.push(' SYSTEM "',d,'">'):((a=a.internalSubset)&&b.push(" [",a,"]"),b.push(">"));break;case lf:return b.push("<?",a.target," ",a.data,
"?>");case mf:return b.push("&",a.nodeName,";");default:b.push("??",a.nodeName)}}function nf(a,b,c){var d;switch(b.nodeType){case La:d=b.cloneNode(!1),d.ownerDocument=a;case Sa:break;case zb:c=!0}d||(d=b.cloneNode(!1));d.ownerDocument=a;d.parentNode=null;if(c)for(b=b.firstChild;b;)d.appendChild(nf(a,b,c)),b=b.nextSibling;return d}function id(a,b,c){var d=new b.constructor,e;for(e in b){var f=b[e];"object"!=typeof f&&f!=d[e]&&(d[e]=f)}b.childNodes&&(d.childNodes=new bb);d.ownerDocument=a;switch(d.nodeType){case La:e=
b.attributes;var g=d.attributes=new pc,f=e.length;g._ownerElement=d;for(g=0;g<f;g++)d.setAttributeNode(id(a,e.item(g),!0));break;case zb:c=!0}if(c)for(b=b.firstChild;b;)d.appendChild(id(a,b,c)),b=b.nextSibling;return d}function Te(a,b,c){a[b]=c}function Tb(){}function Ub(){}function jd(){this.littleEndian=!1;this.position=0;this._makeEntryLookup=!1;this.dictionary=[]}function Vb(){this.decompressor=new jd}function Wb(){}function Xb(){}function of(a,b,c,d,e){this.fileDirectory=a;this.geoKeys=b;this.dataView=
c;this.littleEndian=d;this.tiles=e?{}:null;this.isTiled=a.StripOffsets?!1:!0;a=a.PlanarConfiguration;this.planarConfiguration="undefined"===typeof a?1:a;if(1!==this.planarConfiguration&&2!==this.planarConfiguration)throw Error("Invalid planar configuration.");switch(this.fileDirectory.Compression){case void 0:case 1:this.decoder=new Ig;break;case 5:this.decoder=new Jg;break;case 6:throw Error("JPEG compression not supported.");case 8:this.decoder=new Kg;break;case 32773:this.decoder=new Lg;break;
default:throw Error("Unknown compresseion method identifier: "+this.fileDirectory.Compression);}}function pf(a,b){this.dataView=new Mg(a);b=b||{};this.cache=b.cache||!1;a=this.dataView.getUint16(0,0);if(18761===a)this.littleEndian=!0;else if(19789===a)this.littleEndian=!1;else throw new TypeError("Invalid byte order value.");a=this.dataView.getUint16(2,this.littleEndian);if(42===this.dataView.getUint16(2,this.littleEndian))this.bigTiff=!1;else if(43===a){if(this.bigTiff=!0,8!==this.dataView.getUint16(4,
this.littleEndian))throw Error("Unsupported offset byte-size.");}else throw new TypeError("Invalid magic number.");this.fileDirectories=this.parseFileDirectories(this.getOffset(this.bigTiff?8:4))}function qf(){kd=!0;for(var a=0;64>a;++a)Ma[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a],Ba["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(a)]=a;Ba[45]=62;Ba[95]=63}function Ng(a,b,c){for(var d=[],e=b;e<c;e+=3)b=(a[e]<<16)+(a[e+1]<<8)+a[e+2],d.push(Ma[b>>
18&63]+Ma[b>>12&63]+Ma[b>>6&63]+Ma[b&63]);return d.join("")}function rf(a){kd||qf();for(var b=a.length,c=b%3,d="",e=[],f=0,g=b-c;f<g;f+=16383)e.push(Ng(a,f,f+16383>g?g:f+16383));1===c?(a=a[b-1],d+=Ma[a>>2],d+=Ma[a<<4&63],d+="=="):2===c&&(a=(a[b-2]<<8)+a[b-1],d+=Ma[a>>10],d+=Ma[a>>4&63],d+=Ma[a<<2&63],d+="=");e.push(d);return e.join("")}function uc(a,b,c,d,e){var f;f=8*e-d-1;var g=(1<<f)-1,h=g>>1,l=-7;e=c?e-1:0;var k=c?-1:1,m=a[b+e];e+=k;c=m&(1<<-l)-1;m>>=-l;for(l+=f;0<l;c=256*c+a[b+e],e+=k,l-=8);
f=c&(1<<-l)-1;c>>=-l;for(l+=d;0<l;f=256*f+a[b+e],e+=k,l-=8);if(0===c)c=1-h;else{if(c===g)return f?NaN:Infinity*(m?-1:1);f+=Math.pow(2,d);c-=h}return(m?-1:1)*f*Math.pow(2,c-d)}function sf(a,b,c,d,e,f){var g,h=8*f-e-1,l=(1<<h)-1,k=l>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;f=d?0:f-1;var r=d?1:-1,t=0>b||0===b&&0>1/b?1:0;b=Math.abs(b);isNaN(b)||Infinity===b?(b=isNaN(b)?1:0,d=l):(d=Math.floor(Math.log(b)/Math.LN2),1>b*(g=Math.pow(2,-d))&&(d--,g*=2),b=1<=d+k?b+m/g:b+m*Math.pow(2,1-k),2<=b*g&&(d++,
g/=2),d+k>=l?(b=0,d=l):1<=d+k?(b=(b*g-1)*Math.pow(2,e),d+=k):(b=b*Math.pow(2,k-1)*Math.pow(2,e),d=0));for(;8<=e;a[c+f]=b&255,f+=r,b/=256,e-=8);d=d<<e|b;for(h+=e;0<h;a[c+f]=d&255,f+=r,d/=256,h-=8);a[c+f-r]|=128*t}function Ta(a,b){if((y.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<b)throw new RangeError("Invalid typed array length");y.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(b),a.__proto__=y.prototype):(null===a&&(a=new y(b)),a.length=b);return a}function y(a,b,c){if(!(y.TYPED_ARRAY_SUPPORT||this instanceof
y))return new y(a,b,c);if("number"===typeof a){if("string"===typeof b)throw Error("If encoding is specified then the first argument must be a string");return ld(this,a)}return tf(this,a,b,c)}function tf(a,b,c,d){if("number"===typeof b)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&b instanceof ArrayBuffer){b.byteLength;if(0>c||b.byteLength<c)throw new RangeError("'offset' is out of bounds");if(b.byteLength<c+(d||0))throw new RangeError("'length' is out of bounds");
b=void 0===c&&void 0===d?new Uint8Array(b):void 0===d?new Uint8Array(b,c):new Uint8Array(b,c,d);y.TYPED_ARRAY_SUPPORT?(a=b,a.__proto__=y.prototype):a=md(a,b);return a}if("string"===typeof b){d=a;a=c;if("string"!==typeof a||""===a)a="utf8";if(!y.isEncoding(a))throw new TypeError('"encoding" must be a valid string encoding');c=uf(b,a)|0;d=Ta(d,c);b=d.write(b,a);b!==c&&(d=d.slice(0,b));return d}return Og(a,b)}function vf(a){if("number"!==typeof a)throw new TypeError('"size" argument must be a number');
if(0>a)throw new RangeError('"size" argument must not be negative');}function ld(a,b){vf(b);a=Ta(a,0>b?0:nd(b)|0);if(!y.TYPED_ARRAY_SUPPORT)for(var c=0;c<b;++c)a[c]=0;return a}function md(a,b){var c=0>b.length?0:nd(b.length)|0;a=Ta(a,c);for(var d=0;d<c;d+=1)a[d]=b[d]&255;return a}function Og(a,b){if(Na(b)){var c=nd(b.length)|0;a=Ta(a,c);if(0===a.length)return a;b.copy(a,0,0,c);return a}if(b){if("undefined"!==typeof ArrayBuffer&&b.buffer instanceof ArrayBuffer||"length"in b)return(c="number"!==typeof b.length)||
(c=b.length,c=c!==c),c?Ta(a,0):md(a,b);if("Buffer"===b.type&&wf(b.data))return md(a,b.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");}function nd(a){if(a>=(y.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(y.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return a|0}function Na(a){return!(null==a||!a._isBuffer)}function uf(a,b){if(Na(a))return a.length;
if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;"string"!==typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case "ascii":case "latin1":case "binary":return c;case "utf8":case "utf-8":case void 0:return vc(a).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*c;case "hex":return c>>>1;case "base64":return xf(a).length;default:if(d)return vc(a).length;b=
(""+b).toLowerCase();d=!0}}function Pg(a,b,c){var d=!1;if(void 0===b||0>b)b=0;if(b>this.length)return"";if(void 0===c||c>this.length)c=this.length;if(0>=c)return"";c>>>=0;b>>>=0;if(c<=b)return"";for(a||(a="utf8");;)switch(a){case "hex":a=b;b=c;c=this.length;if(!a||0>a)a=0;if(!b||0>b||b>c)b=c;d="";for(c=a;c<b;++c)a=d,d=this[c],d=16>d?"0"+d.toString(16):d.toString(16),d=a+d;return d;case "utf8":case "utf-8":return yf(this,b,c);case "ascii":a="";for(c=Math.min(this.length,c);b<c;++b)a+=String.fromCharCode(this[b]&
127);return a;case "latin1":case "binary":a="";for(c=Math.min(this.length,c);b<c;++b)a+=String.fromCharCode(this[b]);return a;case "base64":return b=0===b&&c===this.length?rf(this):rf(this.slice(b,c)),b;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=this.slice(b,c);c="";for(a=0;a<b.length;a+=2)c+=String.fromCharCode(b[a]+256*b[a+1]);return c;default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase();d=!0}}function nb(a,b,c){var d=a[b];a[b]=a[c];a[c]=d}function zf(a,
b,c,d,e){if(0===a.length)return-1;"string"===typeof c?(d=c,c=0):2147483647<c?c=2147483647:-2147483648>c&&(c=-2147483648);c=+c;isNaN(c)&&(c=e?0:a.length-1);0>c&&(c=a.length+c);if(c>=a.length){if(e)return-1;c=a.length-1}else if(0>c)if(e)c=0;else return-1;"string"===typeof b&&(b=y.from(b,d));if(Na(b))return 0===b.length?-1:Af(a,b,c,d,e);if("number"===typeof b)return b&=255,y.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,
b,c):Af(a,[b],c,d,e);throw new TypeError("val must be string, number or Buffer");}function Af(a,b,c,d,e){function f(a,b){return 1===g?a[b]:a.readUInt16BE(b*g)}var g=1,h=a.length,l=b.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>a.length||2>b.length)return-1;g=2;h/=2;l/=2;c/=2}if(e)for(d=-1;c<h;c++)if(f(a,c)===f(b,-1===d?0:c-d)){if(-1===d&&(d=c),c-d+1===l)return d*g}else-1!==d&&(c-=c-d),d=-1;else for(c+l>h&&(c=h-l);0<=c;c--){h=!0;for(d=
0;d<l;d++)if(f(a,c+d)!==f(b,d)){h=!1;break}if(h)return c}return-1}function yf(a,b,c){c=Math.min(a.length,c);for(var d=[];b<c;){var e=a[b],f=null,g=239<e?4:223<e?3:191<e?2:1;if(b+g<=c){var h,l,k;switch(g){case 1:128>e&&(f=e);break;case 2:h=a[b+1];128===(h&192)&&(e=(e&31)<<6|h&63,127<e&&(f=e));break;case 3:h=a[b+1];l=a[b+2];128===(h&192)&&128===(l&192)&&(e=(e&15)<<12|(h&63)<<6|l&63,2047<e&&(55296>e||57343<e)&&(f=e));break;case 4:h=a[b+1],l=a[b+2],k=a[b+3],128===(h&192)&&128===(l&192)&&128===(k&192)&&
(e=(e&15)<<18|(h&63)<<12|(l&63)<<6|k&63,65535<e&&1114112>e&&(f=e))}}null===f?(f=65533,g=1):65535<f&&(f-=65536,d.push(f>>>10&1023|55296),f=56320|f&1023);d.push(f);b+=g}a=d.length;if(a<=Bf)d=String.fromCharCode.apply(String,d);else{c="";for(b=0;b<a;)c+=String.fromCharCode.apply(String,d.slice(b,b+=Bf));d=c}return d}function ba(a,b,c){if(0!==a%1||0>a)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length");}function qa(a,b,c,d,e,f){if(!Na(a))throw new TypeError('"buffer" argument must be a Buffer instance');
if(b>e||b<f)throw new RangeError('"value" argument is out of bounds');if(c+d>a.length)throw new RangeError("Index out of range");}function wc(a,b,c,d){0>b&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);e<f;++e)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function xc(a,b,c,d){0>b&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);e<f;++e)a[c+e]=b>>>8*(d?e:3-e)&255}function Cf(a,b,c,d,e,f){if(c+d>a.length)throw new RangeError("Index out of range");if(0>c)throw new RangeError("Index out of range");
}function Df(a,b,c,d,e){e||Cf(a,b,c,4,3.4028234663852886E38,-3.4028234663852886E38);sf(a,b,c,d,23,4);return c+4}function Ef(a,b,c,d,e){e||Cf(a,b,c,8,1.7976931348623157E308,-1.7976931348623157E308);sf(a,b,c,d,52,8);return c+8}function vc(a,b){b=b||Infinity;for(var c,d=a.length,e=null,f=[],g=0;g<d;++g){c=a.charCodeAt(g);if(55295<c&&57344>c){if(!e){if(56319<c){-1<(b-=3)&&f.push(239,191,189);continue}else if(g+1===d){-1<(b-=3)&&f.push(239,191,189);continue}e=c;continue}if(56320>c){-1<(b-=3)&&f.push(239,
191,189);e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&-1<(b-=3)&&f.push(239,191,189);e=null;if(128>c){if(0>--b)break;f.push(c)}else if(2048>c){if(0>(b-=2))break;f.push(c>>6|192,c&63|128)}else if(65536>c){if(0>(b-=3))break;f.push(c>>12|224,c>>6&63|128,c&63|128)}else if(1114112>c){if(0>(b-=4))break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw Error("Invalid code point");}return f}function Ff(a){for(var b=[],c=0;c<a.length;++c)b.push(a.charCodeAt(c)&255);return b}function xf(a){a=
(a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")).replace(Qg,"");if(2>a.length)a="";else for(;0!==a.length%4;)a+="=";kd||qf();var b,c,d,e,f;b=a.length;if(0<b%4)throw Error("Invalid string. Length must be a multiple of 4");e="="===a[b-2]?2:"="===a[b-1]?1:0;f=new Rg(3*b/4-e);c=0<e?b-4:b;var g=0;for(b=0;b<c;b+=4)d=Ba[a.charCodeAt(b)]<<18|Ba[a.charCodeAt(b+1)]<<12|Ba[a.charCodeAt(b+2)]<<6|Ba[a.charCodeAt(b+3)],f[g++]=d>>16&255,f[g++]=d>>8&255,f[g++]=d&255;2===e?(d=Ba[a.charCodeAt(b)]<<2|Ba[a.charCodeAt(b+
1)]>>4,f[g++]=d&255):1===e&&(d=Ba[a.charCodeAt(b)]<<10|Ba[a.charCodeAt(b+1)]<<4|Ba[a.charCodeAt(b+2)]>>2,f[g++]=d>>8&255,f[g++]=d&255);return f}function Yb(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function Gf(a){return null!=a&&(!!a._isBuffer||Hf(a)||"function"===typeof a.readFloatLE&&"function"===typeof a.slice&&Hf(a.slice(0,0)))}function Hf(a){return!!a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}function Sg(a){function b(a,
b){for(var c=0,d=0,e=[],f=1;16>=f;f++){for(var g=1;g<=a[f];g++)e[b[d]]=[],e[b[d]][0]=c,e[b[d]][1]=f,d++,c++;c*=2}return e}function c(a){var b=a[0];for(a=a[1]-1;0<=a;)b&1<<a&&(C|=1<<n),a--,n--,0>n&&(255==C?(d(255),d(0)):d(C),n=7,C=0)}function d(a){M.push(a)}function e(a){d(a>>8&255);d(a&255)}function f(a,b,d,e,f){var g=f[0],h=f[240],k,m,l,r,t,p,v,q,C,Q=0;for(k=0;8>k;++k){m=a[Q];l=a[Q+1];r=a[Q+2];t=a[Q+3];p=a[Q+4];v=a[Q+5];q=a[Q+6];C=a[Q+7];var M=m+C;m-=C;C=l+q;l-=q;q=r+v;r-=v;v=t+p;t-=p;p=M+v;M-=v;
v=C+q;C-=q;a[Q]=p+v;a[Q+4]=p-v;p=.707106781*(C+M);a[Q+2]=M+p;a[Q+6]=M-p;p=t+r;v=r+l;C=l+m;r=.382683433*(p-C);t=.5411961*p+r;p=1.306562965*C+r;v*=.707106781;r=m+v;m-=v;a[Q+5]=m+t;a[Q+3]=m-t;a[Q+1]=r+p;a[Q+7]=r-p;Q+=8}for(k=Q=0;8>k;++k)m=a[Q],l=a[Q+8],r=a[Q+16],t=a[Q+24],p=a[Q+32],v=a[Q+40],q=a[Q+48],C=a[Q+56],M=m+C,m-=C,C=l+q,l-=q,q=r+v,r-=v,v=t+p,t-=p,p=M+v,M-=v,v=C+q,C-=q,a[Q]=p+v,a[Q+32]=p-v,p=.707106781*(C+M),a[Q+16]=M+p,a[Q+48]=M-p,p=t+r,v=r+l,C=l+m,r=.382683433*(p-C),t=.5411961*p+r,p=1.306562965*
C+r,v*=.707106781,r=m+v,m-=v,a[Q+40]=m+t,a[Q+24]=m-t,a[Q+8]=r+p,a[Q+56]=r-p,Q++;for(k=0;64>k;++k)Q=a[k]*b[k],x[k]=0<Q?Q+.5|0:Q-.5|0;a=x;for(b=0;64>b;++b)w[H[b]]=a[b];a=w[0]-d;d=w[0];0==a?c(e[0]):(k=32767+a,c(e[z[k]]),c(B[k]));for(e=63;0<e&&0==w[e];e--);if(0==e)return c(g),d;for(a=1;a<=e;){for(b=a;0==w[a]&&a<=e;++a);b=a-b;if(16<=b){k=b>>4;for(Q=1;Q<=k;++Q)c(h);b&=15}k=32767+w[a];c(f[(b<<4)+z[k]]);c(B[k]);a++}63!=e&&c(g);return d}function g(a){0>=a&&(a=1);100<a&&(a=100);if(F!=a){for(var b=50>a?Math.floor(5E3/
a):Math.floor(200-2*a),c=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],d=0;64>d;d++){var e=h((c[d]*b+50)/100);1>e?e=1:255<e&&(e=255);l[H[d]]=e}c=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99];for(d=
0;64>d;d++)e=h((c[d]*b+50)/100),1>e?e=1:255<e&&(e=255),k[H[d]]=e;b=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379];for(d=c=0;8>d;d++)for(e=0;8>e;e++)m[c]=1/(l[H[c]]*b[d]*b[e]*8),r[c]=1/(k[H[c]]*b[d]*b[e]*8),c++;F=a}}var h=Math.floor,l=Array(64),k=Array(64),m=Array(64),r=Array(64),t,p,q,v,B=Array(65535),z=Array(65535),x=Array(64),w=Array(64),M=[],C=0,n=7,D=Array(64),u=Array(64),ja=Array(64),fa=Array(256),W=Array(2048),F,H=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,
25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],A=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],G=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,
117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],K=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],J=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],N=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,
193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];
this.encode=function(a,b){(new Date).getTime();b&&g(b);M=[];C=0;n=7;e(65496);e(65504);e(16);d(74);d(70);d(73);d(70);d(0);d(1);d(1);d(0);e(1);e(1);d(0);d(0);e(65499);e(132);d(0);for(b=0;64>b;b++)d(l[b]);d(1);for(b=0;64>b;b++)d(k[b]);b=a.width;var h=a.height;e(65472);e(17);d(8);e(h);e(b);d(3);d(1);d(17);d(0);d(2);d(17);d(1);d(3);d(17);d(1);e(65476);e(418);d(0);for(b=0;16>b;b++)d(A[b+1]);for(b=0;11>=b;b++)d(E[b]);d(16);for(b=0;16>b;b++)d(G[b+1]);for(b=0;161>=b;b++)d(I[b]);d(1);for(b=0;16>b;b++)d(K[b+
1]);for(b=0;11>=b;b++)d(J[b]);d(17);for(b=0;16>b;b++)d(L[b+1]);for(b=0;161>=b;b++)d(N[b]);e(65498);e(12);d(3);d(1);d(0);d(2);d(17);d(3);d(17);d(0);d(63);d(0);var B=h=b=0;C=0;n=7;this.encode.displayName="_encode_";var w=a.data,z=a.height;a=4*a.width;for(var x,O=0,F,H,fa,Pe,cb;O<z;){for(x=0;x<a;){Pe=a*O+x;for(cb=0;64>cb;cb++)H=cb>>3,F=4*(cb&7),fa=Pe+H*a+F,O+H>=z&&(fa-=a*(O+1+H-z)),x+F>=a&&(fa-=x+F-a+4),F=w[fa++],H=w[fa++],fa=w[fa++],D[cb]=(W[F]+W[H+256>>0]+W[fa+512>>0]>>16)-128,u[cb]=(W[F+768>>0]+W[H+
1024>>0]+W[fa+1280>>0]>>16)-128,ja[cb]=(W[F+1280>>0]+W[H+1536>>0]+W[fa+1792>>0]>>16)-128;b=f(D,m,b,t,q);h=f(u,r,h,p,v);B=f(ja,r,B,p,v);x+=32}O+=8}0<=n&&(a=[],a[1]=n+1,a[0]=(1<<n+1)-1,c(a));e(65497);return new y(M)};(function(){(new Date).getTime();a||(a=50);for(var c=String.fromCharCode,d=0;256>d;d++)fa[d]=c(d);t=b(A,E);p=b(K,J);q=b(G,I);v=b(L,N);for(var c=1,d=2,e=1;15>=e;e++){for(var f=c;f<d;f++)z[32767+f]=e,B[32767+f]=[],B[32767+f][1]=e,B[32767+f][0]=f;for(f=-(d-1);f<=-c;f++)z[32767+f]=e,B[32767+
f]=[],B[32767+f][1]=e,B[32767+f][0]=d-1+f;c<<=1;d<<=1}for(c=0;256>c;c++)W[c]=19595*c,W[c+256>>0]=38470*c,W[c+512>>0]=7471*c+32768,W[c+768>>0]=-11059*c,W[c+1024>>0]=-21709*c,W[c+1280>>0]=32768*c+8421375,W[c+1536>>0]=-27439*c,W[c+1792>>0]=-5329*c;g(a);(new Date).getTime()})()}function If(a){return!!a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}function Ug(a,b){return a[0]-b[0]}function Vg(){var a=this.stride,b=Array(a.length),c;for(c=0;c<b.length;++c)b[c]=[Math.abs(a[c]),
c];b.sort(Ug);a=Array(b.length);for(c=0;c<a.length;++c)a[c]=b[c][1];return a}function Wg(a,b){var c=["View",b,"d",a].join("");0>b&&(c="View_Nil"+a);var d="generic"===a;if(-1===b){var e;b=new Function("function "+c+"(a){this.data=a;};var proto="+c+".prototype;proto.dtype='"+a+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+c+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+
c+"(a){return new "+c+"(a);}");return b()}if(0===b)return b=new Function("TrivialArray","function "+c+"(a,d) {this.data = a;this.offset = d};var proto="+c+".prototype;proto.dtype='"+a+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+c+"_copy() {return new "+c+"(this.data,this.offset)};proto.pick=function "+c+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+
c+"_get(){return "+(d?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+c+"_set(v){return "+(d?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+c+"(a,b,c,d){return new "+c+"(a,d)}"),b(yc[a][0]);e=["'use strict'"];var f=Xg(b),g=f.map(function(a){return"i"+a}),h="this.offset+"+f.map(function(a){return"this.stride["+a+"]*i"+a}).join("+"),l=f.map(function(a){return"b"+a}).join(","),k=f.map(function(a){return"c"+a}).join(",");e.push("function "+
c+"(a,"+l+","+k+",d){this.data=a","this.shape=["+l+"]","this.stride=["+k+"]","this.offset=d|0}","var proto="+c+".prototype","proto.dtype='"+a+"'","proto.dimension="+b);e.push("Object.defineProperty(proto,'size',{get:function "+c+"_size(){return "+f.map(function(a){return"this.shape["+a+"]"}).join("*"),"}})");1===b?e.push("proto.order=[0]"):(e.push("Object.defineProperty(proto,'order',{get:"),4>b?(e.push("function "+c+"_order(){"),2===b?e.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):
3===b&&e.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):e.push("ORDER})"));e.push("proto.set=function "+c+"_set("+g.join(",")+",v){");d?e.push("return this.data.set("+h+",v)}"):e.push("return this.data["+h+"]=v}");e.push("proto.get=function "+c+"_get("+g.join(",")+"){");d?e.push("return this.data.get("+
h+")}"):e.push("return this.data["+h+"]}");e.push("proto.index=function "+c+"_index(",g.join(),"){return "+h+"}");e.push("proto.hi=function "+c+"_hi("+g.join(",")+"){return new "+c+"(this.data,"+f.map(function(a){return["(typeof i",a,"!=='number'||i",a,"<0)?this.shape[",a,"]:i",a,"|0"].join("")}).join(",")+","+f.map(function(a){return"this.stride["+a+"]"}).join(",")+",this.offset)}");d=f.map(function(a){return"a"+a+"=this.shape["+a+"]"});h=f.map(function(a){return"c"+a+"=this.stride["+a+"]"});e.push("proto.lo=function "+
c+"_lo("+g.join(",")+"){var b=this.offset,d=0,"+d.join(",")+","+h.join(","));for(d=0;d<b;++d)e.push("if(typeof i"+d+"==='number'&&i"+d+">=0){d=i"+d+"|0;b+=c"+d+"*d;a"+d+"-=d}");e.push("return new "+c+"(this.data,"+f.map(function(a){return"a"+a}).join(",")+","+f.map(function(a){return"c"+a}).join(",")+",b)}");e.push("proto.step=function "+c+"_step("+g.join(",")+"){var "+f.map(function(a){return"a"+a+"=this.shape["+a+"]"}).join(",")+","+f.map(function(a){return"b"+a+"=this.stride["+a+"]"}).join(",")+
",c=this.offset,d=0,ceil=Math.ceil");for(d=0;d<b;++d)e.push("if(typeof i"+d+"==='number'){d=i"+d+"|0;if(d<0){c+=b"+d+"*(a"+d+"-1);a"+d+"=ceil(-a"+d+"/d)}else{a"+d+"=ceil(a"+d+"/d)}b"+d+"*=d}");e.push("return new "+c+"(this.data,"+f.map(function(a){return"a"+a}).join(",")+","+f.map(function(a){return"b"+a}).join(",")+",c)}");h=Array(b);l=Array(b);for(d=0;d<b;++d)h[d]="a[i"+d+"]",l[d]="b[i"+d+"]";e.push("proto.transpose=function "+c+"_transpose("+g+"){"+g.map(function(a,b){return a+"=("+a+"===undefined?"+
b+":"+a+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+c+"(this.data,"+h.join(",")+","+l.join(",")+",this.offset)}");e.push("proto.pick=function "+c+"_pick("+g+"){var a=[],b=[],c=this.offset");for(d=0;d<b;++d)e.push("if(typeof i"+d+"==='number'&&i"+d+">=0){c=(c+this.stride["+d+"]*i"+d+")|0}else{a.push(this.shape["+d+"]);b.push(this.stride["+d+"])}");e.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");e.push("return function construct_"+c+"(data,shape,stride,offset){return new "+
c+"(data,"+f.map(function(a){return"shape["+a+"]"}).join(",")+","+f.map(function(a){return"stride["+a+"]"}).join(",")+",offset)}");b=new Function("CTOR_LIST","ORDER",e.join("\n"));return b(yc[a],Vg)}function Yg(a){if(null!=a&&(If(a)||"function"===typeof a.readFloatLE&&"function"===typeof a.slice&&If(a.slice(0,0))||a._isBuffer))return"buffer";if(Zg)switch(Object.prototype.toString.call(a)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";
case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";case "[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(a)?"array":"generic"}function $g(a){switch(a){case "uint8":return Uint8Array;case "uint16":return Uint16Array;case "uint32":return Uint32Array;case "int8":return Int8Array;case "int16":return Int16Array;case "int32":return Int32Array;
case "float":case "float32":return Float32Array;case "double":case "float64":return Float64Array;case "uint8_clamped":return Uint8ClampedArray;case "generic":case "buffer":case "data":case "dataview":return ArrayBuffer;case "array":return Array}}function ah(a){var b=a.map(function(a){return a.getMetadata("width")});if(!b.reduce(function(a,c){return a&&c===b[0]},!0))return!1;var c=a.map(function(a){return a.getMetadata("height")});if(!c.reduce(function(a,b){return a&&b===c[0]},!0))return!1;var d=a.map(function(a){return a.getData().constructor});
return d.reduce(function(a,b){return a&&b===d[0]},!0)?!0:!1}function Jf(a,b,c){var d=a.length,e=b.arrayArgs.length;b=0<b.indexArgs.length;var f=[],g=[],h=0,l,k,m;for(k=0;k<d;++k)g.push(["i",k,"=0"].join(""));for(m=0;m<e;++m)for(k=0;k<d;++k)l=h,h=a[k],0===k?g.push(["d",m,"s",k,"=t",m,"p",h].join("")):g.push(["d",m,"s",k,"=(t",m,"p",h,"-s",l,"*t",m,"p",l,")"].join(""));0<g.length&&f.push("var "+g.join(","));for(k=d-1;0<=k;--k)h=a[k],f.push(["for(i",k,"=0;i",k,"<s",h,";++i",k,"){"].join(""));f.push(c);
for(k=0;k<d;++k){l=h;h=a[k];for(m=0;m<e;++m)f.push(["p",m,"+=d",m,"s",k].join(""));b&&(0<k&&f.push(["index[",l,"]-=s",l].join("")),f.push(["++index[",h,"]"].join("")));f.push("}")}return f.join("\n")}function bh(a,b,c,d){for(var e=b.length,f=c.arrayArgs.length,g=c.blockSize,h=0<c.indexArgs.length,l=[],k=0;k<f;++k)l.push(["var offset",k,"=p",k].join(""));for(k=a;k<e;++k)l.push(["for(var j"+k+"=SS[",b[k],"]|0;j",k,">0;){"].join("")),l.push(["if(j",k,"<",g,"){"].join("")),l.push(["s",b[k],"=j",k].join("")),
l.push(["j",k,"=0"].join("")),l.push(["}else{s",b[k],"=",g].join("")),l.push(["j",k,"-=",g,"}"].join("")),h&&l.push(["index[",b[k],"]=j",k].join(""));for(k=0;k<f;++k){g=["offset"+k];for(h=a;h<e;++h)g.push(["j",h,"*t",k,"p",b[h]].join(""));l.push(["p",k,"=(",g.join("+"),")"].join(""))}l.push(Jf(b,c,d));for(k=a;k<e;++k)l.push("}");return l.join("\n")}function od(a,b,c){for(var d=a.body,e=[],f=[],g=0;g<a.args.length;++g){var h=a.args[g];if(!(0>=h.count)){var l=new RegExp(h.name,"g"),k="",m=b.arrayArgs.indexOf(g);
switch(b.argTypes[g]){case "offset":var r=b.offsetArgIndex.indexOf(g),m=b.offsetArgs[r].array,k="+q"+r;case "array":var k="p"+m+k,t="l"+g,r="a"+m;if(0===b.arrayBlockIndices[m])1===h.count?"generic"===c[m]?h.lvalue?(e.push(["var ",t,"=",r,".get(",k,")"].join("")),d=d.replace(l,t),f.push([r,".set(",k,",",t,")"].join(""))):d=d.replace(l,[r,".get(",k,")"].join("")):d=d.replace(l,[r,"[",k,"]"].join("")):"generic"===c[m]?(e.push(["var ",t,"=",r,".get(",k,")"].join("")),d=d.replace(l,t),h.lvalue&&f.push([r,
".set(",k,",",t,")"].join(""))):(e.push(["var ",t,"=",r,"[",k,"]"].join("")),d=d.replace(l,t),h.lvalue&&f.push([r,"[",k,"]=",t].join("")));else{l=[h.name];h=[k];for(k=0;k<Math.abs(b.arrayBlockIndices[m]);k++)l.push("\\s*\\[([^\\]]+)\\]"),h.push("$"+(k+1)+"*t"+m+"b"+k);l=new RegExp(l.join(""),"g");k=h.join("+");if("generic"===c[m])throw Error("cwise: Generic arrays not supported in combination with blocks!");d=d.replace(l,[r,"[",k,"]"].join(""))}break;case "scalar":d=d.replace(l,"Y"+b.scalarArgs.indexOf(g));
break;case "index":d=d.replace(l,"index");break;case "shape":d=d.replace(l,"shape")}}}return[e.join("\n"),d,f.join("\n")].join("\n").trim()}function ch(a){for(var b=Array(a.length),c=!0,d=0;d<a.length;++d){var e=a[d],f=e.match(/\d+/),f=f?f[0]:"";0===e.charAt(0)?b[d]="u"+e.charAt(1)+f:b[d]=e.charAt(0)+f;0<d&&(c=c&&b[d]===b[d-1])}return c?b[0]:b.join("")}function dh(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=
[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}function Kf(a){var b=32;(a&=-a)&&b--;a&65535&&(b-=16);a&16711935&&(b-=8);a&252645135&&(b-=4);a&858993459&&(b-=2);a&1431655765&&--b;return b}function Lf(a,b,c){var d=a[c]|0;if(0>=d)return[];var e=Array(d),f;if(c===a.length-1)for(f=0;f<d;++f)e[f]=b;else for(f=0;f<d;++f)e[f]=Lf(a,b,c+1);return e}function zc(a,b,c,d,e,f){a|=0;b|=0;c|=0;e|=0;f|=0;var g,h,l,k,m,r,t,p,q,v,B,z,x,w,M,C,n,D;g=c;h=wa.log2(g);
for(M=0;M<b;++M){k=g>>1;for(l=m=0;l<g-1;l++){l<m&&(r=d[e+l],d[e+l]=d[e+m],d[e+m]=r,r=d[f+l],d[f+l]=d[f+m],d[f+m]=r);for(r=k;r<=m;)m-=r,r>>=1;m+=r}q=-1;v=0;p=1;for(r=0;r<h;r++){t=p;p<<=1;x=1;for(m=w=0;m<t;m++){for(l=m;l<g;l+=p)k=l+t,C=d[e+k],B=d[f+k],n=d[e+l],D=d[f+l],z=x*(C+B),C*=w-x,B*=x+w,B=z-B,z+=C,d[e+k]=n-B,d[f+k]=D-z,d[e+l]+=B,d[f+l]+=z;z=q*(x+w);C=x*(v-q);B=w*(q+v);x=z-B;w=z+C}v=Math.sqrt((1-q)/2);0>a&&(v=-v);q=Math.sqrt((1+q)/2)}if(0>a)for(m=1/g,l=0;l<g;l++)d[e+l]*=m,d[f+l]*=m;e+=c;f+=c}}
var pd={},Ua=function(){};Ua.addCoreType=function(a){"function"===typeof a&&(pd[a.name]=a)};Ua.getCoreType=function(a){return a in pd?pd[a]:null};var Z=function(){this._uuid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});this._metadata={};this._type=Z.TYPE()};Z.TYPE=function(){return"GENERIC"};Z.prototype.isOfType=function(a){return!this._type.localeCompare(a)};Z.prototype.getType=function(){this._type};Z.prototype.getUuid=
function(){return this._uuid.slice()};Z.prototype.setMetadata=function(a,b){"string"===typeof a||a instanceof String?this._metadata[a]=b:console.warn("The given key must be a String Object.")};Z.prototype.getMetadata=function(a){if(a in this._metadata)return this._metadata[a];console.warn("The metadata with key: "+a+" doe not exist.");return null};Z.prototype.hasMetadata=function(a){return a in this._metadata};Z.prototype.getMetadataKeys=function(){return Object.keys(this._metadata)};Z.prototype.copyMetadataFrom=
function(a){var b=this;a.getMetadataKeys().forEach(function(c){try{var d=JSON.parse(JSON.stringify(a.getMetadata(c)));b.setMetadata(c,d)}catch(e){console.error(e)}})};Z.prototype.getMetadataCopy=function(){return JSON.parse(JSON.stringify(this._metadata))};Z.prototype._getOption=function(a,b,c){return a?a[b]||c:c};Z.prototype.isMetadataCyclic=function(){try{JSON.stringify(this._metadata)}catch(a){return!0}return!1};var A=function(){var a;a=Z.call(this)||this;a._type=A.TYPE();a._events={};a._inputValidator=
{};a._allValidator=null;a._input={};a._output={};a._timer={};a._isOutputReady=!1;a.setMetadata("time",!0);return a};$jscomp.inherits(A,Z);A.TYPE=function(){return"FILTER"};A.prototype.addInput=function(a,b){b=void 0===b?0:b;a?(b in this._input||(this._input[b]=null),this._input[b]=a,this._isOutputReady=!1):console.warn("A null input cannot be added.")};A.prototype.getOutput=function(a){a=void 0===a?0:a;return a in this._output?this._output[a]:null};A.prototype.forEachOutput=function(a){if(a)for(var b=
this.getOutputCategories(),c=0;c<b.length;c++)a.call(this,b[c],this.getOutput(b[c]));else console.warn("forEachOutput requires a callback.")};A.prototype._forEachInput=function(a){if(a)for(var b=this.getInputCategories(),c=0;c<b.length;c++)a.call(this,b[c],this._getInput(b[c]));else console.warn("forEachOutput requires a callback.")};A.prototype._addOutput=function(a,b){b=void 0===b?0:b;var c=null;b in this._output?console.warn("An output of category "+b+" was already defined. Nothing to be done."):
(c=new a,this._output[b]=c,console.log("filter "+this.constructor.name+" creates a new output."));return c};A.prototype._getInput=function(a){a=void 0===a?0:a;return a in this._input?this._input[a]:null};A.prototype.hasInputOfCategory=function(a){return a in this._input};A.prototype.getInputCategories=function(){return Object.keys(this._input)};A.prototype.getOutputCategories=function(){return Object.keys(this._output)};A.prototype.setMetadata=function(a,b){Z.prototype.setMetadata.call(this,a,b);
this._isOutputReady=!1};A.prototype.hasOutputReady=function(){return this._isOutputReady};A.prototype.setOutputAsReady=function(){this._isOutputReady=!0};A.prototype.addInputValidator=function(a,b){"TYPE"in b?"ALL"===a?this._allValidator=b.TYPE():this._inputValidator[a]=b.TYPE():"ALL"===a?this._allValidator=b:this._inputValidator[a]=b};A.prototype.hasValidInput=function(){var a=this,b=this.getInputCategories(),c=!0;0===b.length&&(c=!1,console.warn("No input validator was added. Filter cannot run. Use addInputValidator(...) to specify input types."));
b.forEach(function(b){var d=a._getInput(b);if(d)if("isOfType"in d)a._inputValidator[b]&&(c=c&&d.isOfType(a._inputValidator[b])),a._allValidator&&(c=c&&d.isOfType(a._allValidator));else try{a._inputValidator[b]&&(c=c&&d instanceof a._inputValidator[b]),a._allValidator&&(c=c&&d instanceof a._allValidator)}catch(f){c=!1}else c=!1});c||console.warn("The input is not valid.");return c};A.prototype.update=function(){this._output={};this._metadata.time?(this.addTimeRecord("begin"),this._run(),this.addTimeRecord("end"),
console.log("Running time for filter "+this.constructor.name+": "+this.getTime("begin","end")+"ms.")):this._run();this.getNumberOfOutputs()&&this.setOutputAsReady()};A.prototype._run=function(){console.error("The update() method has not been written, this filter is not valid.")};A.prototype.addTimeRecord=function(a){this._timer[a]=performance.now()};A.prototype.getTime=function(a,b,c){c=void 0===c?!1:c;if(a in this._timer&&b in this._timer){var d=Math.abs(this._timer[b]-this._timer[a]);c&&console.log("> Time: ["+
a+" , "+b+"] is "+d+" millisec.");return d}console.warn("The two given record name must exist in the time record table.");return-1};A.prototype.on=function(a,b){this._events[a]=b};A.prototype.triggerEvent=function(a){var b=null;if(this.hasEvent(a))if(1<arguments.length){for(var b=[],c=1;c<arguments.length;c++)b.push(arguments[c]);b=this._events[a].apply(this,b)}else b=this._events[a].call(this);else console.warn("The event "+a+" does not exist.");return b};A.prototype.hasEvent=function(a){return a in
this._events};A.prototype.getNumberOfInputs=function(){return Object.keys(this._input).length};A.prototype.getNumberOfOutputs=function(){return Object.keys(this._output).length};A.prototype.clearAllInputs=function(){this._input={}};var Ga=function(){var a;a=Z.call(this)||this;a._data=null;return a};$jscomp.inherits(Ga,Z);Ga.prototype.setRawData=function(a){this._data=a};Ga.prototype.setRawMetadata=function(a){this._metadata=a};var oa=function(){var a;a=Ga.call(this)||this;a._type=oa.TYPE();a.setMetadata("length",
0);return a};$jscomp.inherits(oa,Ga);oa.TYPE=function(){return"SIGNAL1D"};oa.prototype.getData=function(){return this._data};oa.prototype.setData=function(a,b){this._data=(void 0===b?0:b)?new a.constructor(a):a;this.setMetadata("length",a.length)};oa.prototype.clone=function(){var a=new oa;this._data&&a.setData(this._data,!0);return a};oa.prototype.hollowClone=function(){var a=new oa,b=this.getMetadata("length");a.setData((new Float32Array(b)).fill(0));return a};Ua.addCoreType(oa);var E=function(a){var b;
a=void 0===a?null:a;b=Ga.call(this)||this;b._type=E.TYPE();b.setMetadata("ncpp",4);if(a&&"width"in a&&"height"in a&&0<a.width&&0<a.height){b.setMetadata("width",a.width);b.setMetadata("height",a.height);"color"in a&&b.setMetadata("ncpp",a.color.length);b._data=new Float32Array(a.width*a.height*b.getMetadata("ncpp"));var c=b.getMetadata("ncpp");if("color"in a){a=a.color;for(var d=0;d<b._data.length;d++)b._data[d]=a[d%c]}else b._data.fill(0)}return b};$jscomp.inherits(E,Ga);E.TYPE=function(){return"IMAGE2D"};
E.prototype.clone=function(){var a=new E;a.setData(this._data,this.getMetadata("width"),this.getMetadata("height"),this.getMetadata("ncpp"),!0);a.copyMetadataFrom(this);return a};E.prototype.hollowClone=function(){var a=new E,b=this.getMetadata("ncpp"),c=this.getMetadata("width"),d=this.getMetadata("height");a.setData((new Float32Array(c*d*b)).fill(0),c,d,b);return a};E.prototype.float32Clone=function(){var a=new E,b=this.getMetadata("ncpp"),c=this.getMetadata("width"),d=this.getMetadata("height");
a.setData(new Float32Array(this._data),c,d,b);a.copyMetadataFrom(this);return a};E.prototype.setData=function(a,b,c,d,e){d=void 0===d?4:d;e=void 0===e?!1:e;this.setMetadata("ncpp",d);a.length!=b*c*d?console.warn("The array size does not match the width and height. Cannot init the Image2D."):(this._data=e?new a.constructor(a):a,this.setMetadata("width",b),this.setMetadata("height",c),this.computeSimpleStat())};E.prototype.setPixel=function(a,b,c){c=void 0===c?!1:c;if(this._data){var d=this._metadata.ncpp;
if("x"in a&&0<=a.x&&a.x<this._metadata.width&&"y"in a&&0<=a.y&&a.y<this._metadata.height){if(b.length==d)if(a=this.get1dIndexFrom2dPosition(a),1==d)this._data[a]=b[0];else{a*=d;for(var e=0;e<d;e++)this._data[a+e]=b[e]}else if(3==b.length&&4==d)for(a=this.get1dIndexFrom2dPosition(a),a*=d,e=0;e<b.length;e++)this._data[a+e]=b[e];c&&this.computeSimpleStat()}}else console.warn("The image is empty")};E.prototype.getPixel=function(a){if(this._data){if("x"in a&&0<=a.x&&a.x<this._metadata.width&&"y"in a&&
0<=a.y&&a.y<this._metadata.height){var b=this._metadata.ncpp;a=this.get1dIndexFrom2dPosition(a);1==b?b=[this._data[a]]:(a*=b,b=this._data.slice(a,a+b));return b}console.warn("The requested position is outside the image.");return null}console.warn("The image is empty")};E.prototype.getWidth=function(){return this._metadata.width};E.prototype.getHeight=function(){return this._metadata.height};E.prototype.getComponentsPerPixel=function(){return this._metadata.ncpp};E.prototype.getNcpp=function(){return this.getComponentsPerPixel()};
E.prototype.getData=function(){return this._data};E.prototype.getDataCopy=function(){return new this._data.constructor(this._data)};E.prototype.getDataAsUInt8Array=function(){if(this._data){for(var a=this.getMin(),b=this.getMax(),c=new Uint8Array(this._data.length),d=0;d<this._data.length;d++)c[d]=(this._data[d]-a)/b*256;return c}console.warn("No data, cannot make a copy of it.")};E.prototype.getDataAsFloat32Array=function(){if(this._data)return new Float32Array(this._data);console.warn("No data, cannot make a copy of it.")};
E.prototype.get2dPositionFrom1dIndex=function(a){return{x:a%this._metadata.width,y:Math.floor(a/this._metadata.width)}};E.prototype.get1dIndexFrom2dPosition=function(a){return a.x+a.y*this._metadata.width};E.prototype.computeSimpleStat=function(){if(this._data){for(var a=Infinity,b=-Infinity,c=0,d=0;d<this._data.length;d++)a=Math.min(a,this._data[d]),b=Math.max(a,this._data[d]),c+=this._data[d];this.setMetadata("min",a);this.setMetadata("max",b);this.setMetadata("avg",c/this._data.length)}else console.warn("The image is empty")};
E.prototype.getMin=function(){this.hasMetadata("min")||this.computeSimpleStat();return this.getMetadata("min")};E.prototype.getMax=function(){this.hasMetadata("max")||this.computeSimpleStat();return this.getMetadata("max")};E.prototype.getAvg=function(){this.hasMetadata("avg")||this.computeSimpleStat();return this.getMetadata("avg")};E.prototype.isInside=function(a){return 0<=a.x&&a.x<this._metadata.width&&0<=a.y&&a.y<this._metadata.height};E.prototype.getSegmentSample=function(a,b){if(!this.isInside(a)||
!this.isInside(b))return null;var c=b.x-a.x,d=b.y-a.y,e=Math.sqrt(Math.pow(c,2)+Math.pow(d,2));b=Math.floor(e+1);for(var c=c/e,d=d/e,e=this._metadata.ncpp,f=Array(b).fill(0),g=Array(e).fill(0),h=Array(b).fill(0),l=0;l<e;l++)g[l]=Array(b).fill(0);for(var k=0;k<b;k++){l={x:Math.round(a.x+k*c),y:Math.round(a.y+k*d)};f[k]=l;h[k]="("+l.x+", "+l.y+")";for(var m=this.getPixel(l),l=0;l<e;l++)g[l][k]=m[l]}return{positions:f,labels:h,colors:g}};Ua.addCoreType(E);var U=function(a){var b;a=void 0===a?null:a;
b=Ga.call(this)||this;b._type=U.TYPE();b.setMetadata("ncpp",1);a&&"order"in a?b.setMetadata("order",a.order):b.setMetadata("order",["zspace","yspace","xspace"]);var c={offset:1,step:1},d={step:1},e={step:1};b.setMetadata("xspace",c);b.setMetadata("yspace",d);b.setMetadata("zspace",e);b.setMetadata("time",{offset:0,space_length:1});a&&"ncpp"in a&&b.setMetadata("ncpp",a.ncpp);a&&"xSize"in a&&"ySize"in a&&"zSize"in a&&0<a.xSize&&0<a.ySize&&0<a.zSize&&(c.space_length=a.xSize,d.space_length=a.ySize,e.space_length=
a.zSize,d.offset=c.space_length,e.offset=c.space_length*d.space_length,b._data=new Float32Array(a.xSize*a.ySize*a.zSize*b.getMetadata("ncpp")),b._data.fill(0),b._scanDataRange(),b._finishHeader());return b};$jscomp.inherits(U,Ga);U.TYPE=function(){return"IMAGE3D"};U.prototype.clone=function(){var a=new U;a.setData(this._data,this.getMetadata("xspace").space_length,this.getMetadata("yspace").space_length,this.getMetadata("zspace").space_length,{ncpp:this.getMetadata("ncpp"),order:this.getMetadata("order").slice(),
deepCopy:!0});a.copyMetadataFrom(this);return a};U.prototype.setData=function(a,b,c,d,e){var f=1;e&&"ncpp"in e&&(f=e.ncpp);a.length!=b*c*d*f?console.warn("The array size does not match the width and height. Cannot init the Image3D."):(e&&"ncpp"in e&&this.setMetadata("ncpp",e.ncpp),e&&"order"in e&&this.setMetadata("order",e.order),this._data=e&&"deepCopy"in e&&e.deepCopy?new a.constructor(a):a,a=this.getMetadata("xspace"),e=this.getMetadata("yspace"),f=this.getMetadata("zspace"),a.space_length=b,e.space_length=
c,f.space_length=d,e.offset=a.space_length,f.offset=a.space_length*e.space_length,this._scanDataRange(),this._finishHeader())};U.prototype._finishHeader=function(){var a=this.getMetadata("xspace"),b=this.getMetadata("yspace"),c=this.getMetadata("zspace");a.name="xspace";b.name="yspace";c.name="zspace";a.width_space=JSON.parse(JSON.stringify(b));a.width=b.space_length;a.height_space=JSON.parse(JSON.stringify(c));a.height=c.space_length;b.width_space=JSON.parse(JSON.stringify(a));b.width=a.space_length;
b.height_space=JSON.parse(JSON.stringify(c));b.height=c.space_length;c.width_space=JSON.parse(JSON.stringify(a));c.width=a.space_length;c.height_space=JSON.parse(JSON.stringify(b));c.height=b.space_length};U.prototype._scanDataRange=function(){for(var a=Infinity,b=-Infinity,c=0;c<this._data.length;c++)a=Math.min(a,this._data[c]),b=Math.max(b,this._data[c]);this.setMetadata("voxel_min",a);this.setMetadata("voxel_max",b)};U.prototype.setPixel=function(a,b){};U.prototype.getPixel=function(a){return this.getIntensity_xyz(a.x,
a.y,a.z)};U.prototype.getSize=function(a){if(this.hasMetadata(a))return this.getMetadata(a).space_length;console.warn('The space must be "xspace", "yspace" or "zspace".');return null};U.prototype.getData=function(){return this._data};U.prototype.getDataCopy=function(){return new this._data.constructor(this._data)};U.prototype.get1dIndexFrom3dPosition=function(a){};U.prototype.getSlice=function(a,b,c){b=void 0===b?0:b;c=void 0===c?0:c;if(!this.hasMetadata(a))return console.warn("The axis "+a+" does not exist."),
null;var d=this.hasMetadata("time")?c*this.getMetadata("time").offset:0,e=this.getMetadata(a),f=e.width_space,g=e.height_space;a=e.width;c=e.height;var h=e.offset,l=f.offset,k=g.offset,m=new this._data.constructor(a*c),r,f=0<f.step,t=0<g.step;r=0<e.step;var p=g=0,q=Infinity,v=-Infinity;this.getMetadata("voxel_max");b=r?b:e.space_length-b-1;if(0<=b&&b<e.space_length)for(d+=b*h,b=c-1;0<=b;b--)for(e=t?b:c-b-1,h=d+e*k,e=0;e<a;e++)r=f?e:a-e-1,r=h+r*l,r=this._data[r],q=Math.min(q,r),v=Math.max(v,r),p+=
r,m[g++]=r;l=new E;l.setData(m,a,c,1);l.setMetadata("min",q);l.setMetadata("max",v);l.setMetadata("avg",p/(g-1));return l};U.prototype.getIntensity_ijk=function(a,b,c,d){d=void 0===d?0:d;var e=this.getMetadata("order");if(0>a||a>=this.getMetadata(e[0]).space_length||0>b||b>=this.getMetadata(e[1]).space_length||0>c||c>=this.getMetadata(e[2]).space_length)return console.warn("getIntensity_ijk position is out of range."),0;d*=this._metadata.time.offset;a=a*this.getMetadata(e[0]).offset+b*this.getMetadata(e[1]).offset+
c*this.getMetadata(e[2]).offset+d;return this._data[a]};U.prototype.getIntensity_xyz=function(a,b,c,d){d=void 0===d?0:d;return 0>a||a>=this._metadata.xspace.space_length||0>b||b>=this._metadata.yspace.space_length||0>c||c>=this._metadata.zspace.space_length?(console.warn("getIntensity_xyz position is out of range."),0):this._data[a*this._metadata.xspace.offset+b*this._metadata.yspace.offset+c*this._metadata.zspace.offset+this._metadata.time.offset*d]};U.prototype.getTimeLength=function(){return this.hasMetadata("time")?
this.getMetadata("time").space_length:1};U.prototype.isInside=function(a){return!(0>a.x||a.x>=this._metadata.xspace.space_length||0>a.y||a.y>=this._metadata.yspace.space_length||0>a.z||a.z>=this._metadata.zspace.space_length)};U.prototype.getSegmentSample=function(a,b,c){if(!this.isInside(a)||!this.isInside(b))return null;c=b.x-a.x;var d=b.y-a.y,e=b.z-a.z,f=Math.sqrt(Math.pow(c,2)+Math.pow(d,2)+Math.pow(e,2));b=Math.floor(f+1);c/=f;for(var d=d/f,e=e/f,f=this._metadata.ncpp,g=Array(b).fill(0),h=Array(f).fill(0),
l=Array(b).fill(0),k=0;k<f;k++)h[k]=Array(b).fill(0);for(var m=0;m<b;m++){k={x:Math.round(a.x+m*c),y:Math.round(a.y+m*d),z:Math.round(a.z+m*e)};g[m]=k;l[m]="("+k.x+", "+k.y+", "+k.z+")";for(var r=[this.getIntensity_xyz(k.x,k.y,k.z)],k=0;k<f;k++)h[k][m]=r[k]}return{positions:g,labels:l,colors:h}};Ua.addCoreType(U);var P=function(){return A.call(this)||this};$jscomp.inherits(P,A);P.prototype.hasSameSizeInput=function(){var a=this,b=!0,c=[],d=[];Object.keys(this._input).forEach(function(b){c.push(a._getInput(b).getWidth());
d.push(a._getInput(b).getHeight())});c.length&&(c.sort(),d.sort(),(b=c[0]==c[c.length-1]&&d[0]==d[d.length-1])||console.warn("Input image do not all have the same size. Filter not valid"));return b};P.prototype.hasSameNcppInput=function(){var a=Object.keys(this._input);if(!a.length)return!1;for(var b=this._getInput(a[0]).getComponentsPerPixel(),c=0;c<a.length;c++)if(b!=this._getInput(a[c]).getComponentsPerPixel())return console.warn("Input image do not all have the same number of components per pixel. Filter not valid"),
!1;return!0};var ra=function(a){return U.call(this)||this};$jscomp.inherits(ra,U);ra.transformToMinc=function(a,b){function c(a){a=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];0>=a&&(a=1);return Math.sqrt(a)}function d(a,b,c){return a[0]*(b[1]*c[2]-b[2]*c[1])-a[1]*(b[0]*c[2]-b[2]*c[0])+a[2]*(b[0]*c[1]-b[1]*c[0])}for(var e=[],f=[],g=[],h=c(a[0]),l=c(a[1]),k=c(a[2]),h=0>a[0][0]?-h:h,l=0>a[1][1]?-l:l,k=0>a[2][2]?-k:k,m=0;3>m;m++)e[m]=a[m][0]/h,f[m]=a[m][1]/l,g[m]=a[m][2]/k;b.xspace.step=h;b.yspace.step=l;b.zspace.step=
k;l=[a[0][3],a[1][3],a[2][3]];a=d(e,f,g);h=d(l,f,g);k=d(e,l,g);l=d(e,f,l);b.xspace.start=h/a;b.yspace.start=k/a;b.zspace.start=l/a;b.xspace.direction_cosines=e;b.yspace.direction_cosines=f;b.zspace.direction_cosines=g};ra.swapn=function(a,b){for(var c=0;c<a.length;c+=b)for(var d=b-1,e=0;d>e;){var f=a[c+d];a[c+d]=a[c+e];a[c+e]=f;d--;e++}};ra.prototype.setData=function(a,b){var c=this;this._data=a;this.setMetadata("position",{});this.setMetadata("current_time",0);Object.keys(b).forEach(function(a){c.setMetadata(a,
b[a])});this._scanDataRange();this._saveOriginAndTransform();this._finishHeader();console.log(this)};ra.prototype._saveOriginAndTransform=function(){var a=this.getMetadata("xspace"),b=this.getMetadata("yspace"),c=this.getMetadata("zspace"),d=a.start,e=b.start,f=c.start,g=a.direction_cosines,h=b.direction_cosines,l=c.direction_cosines,a=a.step,b=b.step,c=c.step,d={x:d*g[0]+e*h[0]+f*l[0],y:d*g[1]+e*h[1]+f*l[1],z:d*g[2]+e*h[2]+f*l[2]};this.setMetadata("voxel_origin",d);this.setMetadata("w2v",[[g[0]/
a,g[1]/a,g[2]/a,(-d.x*g[0]-d.y*g[1]-d.z*g[2])/a],[h[0]/b,h[1]/b,h[2]/b,(-d.x*h[0]-d.y*h[1]-d.z*h[2])/b],[l[0]/c,l[1]/c,l[2]/c,(-d.x*l[0]-d.y*l[1]-d.z*l[2])/c]])};Ua.addCoreType(ra);var aa=function(){var a;a=Ga.call(this)||this;a.setMetadata("closed",!1);a.setMetadata("defaultNod",2);a.setMetadata("nod",2);a._type=aa.TYPE();a._lastPoint=null;return a};$jscomp.inherits(aa,Ga);aa.TYPE=function(){return"LINESTRING"};aa.prototype.setData=function(a,b,c){b=void 0===b?-1:b;c=void 0===c?!1:c;-1!=b&&this.setMetadata("nod",
b);0!=a.length%this.getMetadata("nod")?console.warn("The number of points is not compatible with the number of dimensions (nod)."):(this._data=c?new a.constructor(a):a,this._setLastPoint())};aa.prototype.setNod=function(a){this._data&&this._data.length?this.setMetadata("nod",a):console.warn("The number of dimension can be set only when this LineString is empty.")};aa.prototype.getNod=function(){return this.getMetadata("nod")};aa.prototype.getData=function(){return this._data};aa.prototype.getDataCopy=
function(){return new this._data.constructor(this._data)};aa.prototype.getNumberOfPoints=function(){return this._data?this._data.length/this.getMetadata("nod"):0};aa.prototype.getPoint=function(a){if(0<=a&&a<getNumberOfPoints){var b=this._metadata.nod;return this._data.slice(a*b,a*b+b)}console.warn("Index of point is out of range.");return null};aa.prototype.close=function(){this.setMetadata("closed",!0)};aa.prototype.open=function(){this.setMetadata("closed",!1)};aa.prototype.addPoint=function(a){if(a.length!=
this._metadata.nod)console.warn("Cannot add the point becase it has a diferent number of dimensions.");else{this._data||(this._data=[]);for(var b=0;b<a.length;b++)this._data.push(a[b]);this._lastPoint=a}};aa.prototype.peekPoint=function(){if(!this._data)return null;if(this._lastPoint)return this._lastPoint;this._setLastPoint();return this._lastPoint};aa.prototype._setLastPoint=function(){this._lastPoint=this._data.slice(-this._metadata.nod);0==this._lastPoint.length&&(this._lastPoint=null)};aa.prototype.popPoint=
function(){if(!this._data)return console.warn("This LineString was not added any point."),null;if(!this._data.length)return console.warn("No more point in this LineString."),null;this._lastPoint.length-=this._metadata.nod;this._setLastPoint()};aa.prototype.hasPoint=function(a){var b=this.getMetadata("nod");if(a.length!=b)return console.warn("The given point does not have the same number of dimensions as the LineString."),!1;for(b=0;b<this._data.length-1;b+=2)if(this._data[b]==a[0]&&this._data[b+1]==
a[1])return!0;return!1};Ua.addCoreType(aa);var Ab=function(){var a;a=A.call(this)||this;a.addInputValidator(0,E);a.setMetadata("alpha",!1);a.setMetadata("min",0);a.setMetadata("max",255);a.setMetadata("reset",!0);a._canvas=null;a._ctx=null;return a};$jscomp.inherits(Ab,A);Ab.prototype.getCanvas=function(){return this._canvas};Ab.prototype._init=function(){var a=document.getElementById(this.getMetadata("parentDivID"));if(!a)return!1;if(this.getMetadata("reset"))for(;a.firstChild;)a.removeChild(a.firstChild);
this._canvas=document.createElement("canvas");this._canvas.style="image-rendering: pixelated;";this._ctx=this._canvas.getContext("2d");this._ctx.imageSmoothingEnabled=!1;this._ctx.mozImageSmoothingEnabled=!1;this._ctx.webkitImageSmoothingEnabled=!1;this._ctx.ctxmsImageSmoothingEnabled=!1;document.getElementById(this.getMetadata("parentDivID")).appendChild(this._canvas);return!0};Ab.prototype._run=function(){if(this.hasValidInput()){var a=this._input[0],b=a.getComponentsPerPixel();if(1!=b&&3!=b&&4!=
b)console.warn("Cannot write Image in canvas if contains other than 1, 3 or 4 bands.");else if(this.getMetadata("parentDivID"))if(this._init()){var c=this.getMetadata("alpha");this._canvas.width=a.getWidth();this._canvas.height=a.getHeight();var d=this._ctx.getImageData(0,0,this._canvas.width,this._canvas.height),e=d.data,a=a.getData();if(4==b)for(b=0;b<a.length;b++)e[b]=c||3!=b%4?this._stretchMinMax(a[b]):255;else if(1==b)for(b=0;b<a.length;b++){var c=4*b,f=this._stretchMinMax(a[b]);e[c]=f;e[c+1]=
f;e[c+2]=f;e[c+3]=255}else if(3==b)for(b=c=0;b<e.length;b++)3==b%4?e[b]=255:(e[b]=this._stretchMinMax(a[c]),c++);this._ctx.putImageData(d,0,0)}else console.warn("The parent div was not specified or does not exist.");else console.error("The parent DIV ID to place the canvas element was not specified. Unable to display anything.")}};Ab.prototype._stretchMinMax=function(a){var b=this._metadata.min,c=this._metadata.max;return 0==b&&255==c?a:(a-b)/(c-b)*255};var Ac=function(a){a=A.call(this)||this;a._loadedCounter=
0;a._addOutput(E,0);return a};$jscomp.inherits(Ac,A);Ac.prototype._run=function(){var a=this;this.getInputCategories().forEach(function(b){a._addOutput(E,b);a._loadImage(b)})};Ac.prototype._loadImage=function(a){var b=this,c=new Image;c.src=this._getInput(a);c.onload=function(){var d=document.createElement("canvas");d.width=c.width;d.height=c.height;var e=d.getContext("2d");e.drawImage(c,0,0);try{var f=e.getImageData(0,0,d.width,d.height),g=new Float32Array(f.data);b.getOutput(a).setData(g,c.width,
c.height);b._loadedCounter++;b._loadedCounter==b.getNumberOfInputs()&&b.triggerEvent("ready")}catch(h){console.error(h)}}};var Bc=function(){var a;a=A.call(this)||this;a._allowedTypes=/image.*/;return a};$jscomp.inherits(Bc,A);Bc.prototype.hasValidInput=function(){var a=!1,b=this._getInput();b&&b.type.match(this._allowedTypes)?a=!0:console.error("The file must be an image (jpg/png). The type "+b.type+" is not compatible with FileImageReader.");return a};Bc.prototype._run=function(){if(this.hasValidInput()){var a=
this,b=this._getInput(),c=new FileReader;c.onload=function(b){var d=new Image;d.onload=function(){var b=document.createElement("canvas");b.width=d.width;b.height=d.height;b=b.getContext("2d");b.drawImage(d,0,0);b=b.getImageData(0,0,d.width,d.height).data;a._addOutput(E,0).setData(b,d.width,d.height);a.triggerEvent("ready")};d.src=c.result};c.readAsDataURL(b)}};var ob="undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},Xa=G,Ya=J;"function"===typeof ob.setTimeout&&
(Xa=setTimeout);"function"===typeof ob.clearTimeout&&(Ya=clearTimeout);var Qa=[],rb=!1,fb,hc=-1;Fa.prototype.run=function(){this.fun.apply(null,this.array)};var Bb=ob.performance||{},eh=Bb.now||Bb.mozNow||Bb.msNow||Bb.oNow||Bb.webkitNow||function(){return(new Date).getTime()},fh=new Date,db={nextTick:function(a){var b=Array(arguments.length-1);if(1<arguments.length)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];Qa.push(new Fa(a,b));1!==Qa.length||rb||N(ya)},title:"browser",browser:!0,env:{},
argv:[],version:"",versions:{},on:gb,addListener:gb,once:gb,off:gb,removeListener:gb,removeAllListeners:gb,emit:gb,binding:function(a){throw Error("process.binding is not supported");},cwd:function(){return"/"},chdir:function(a){throw Error("process.chdir is not supported");},umask:function(){return 0},hrtime:function(a){var b=.001*eh.call(Bb),c=Math.floor(b),b=Math.floor(b%1*1E9);a&&(c-=a[0],b-=a[1],0>b&&(c--,b+=1E9));return[c,b]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-
fh)/1E3}},pb="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Mf={},Nf=Object.freeze({default:Mf}),Ha=[],za=[],ug="undefined"!==typeof Uint8Array?Uint8Array:Array,Oc=!1,gh={}.toString,de=Array.isArray||function(a){return"[object Array]"==gh.call(a)};u.TYPED_ARRAY_SUPPORT=void 0!==ob.TYPED_ARRAY_SUPPORT?ob.TYPED_ARRAY_SUPPORT:!0;var hh=u.TYPED_ARRAY_SUPPORT?2147483647:1073741823;u.poolSize=8192;u._augment=function(a){a.__proto__=u.prototype;return a};
u.from=function(a,b,c){return ae(null,a,b,c)};u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,$jscomp.initSymbol(),$jscomp.initSymbol(),$jscomp.initSymbol());u.alloc=function(a,b,c){ce(a);a=0>=a?Ra(null,a):void 0!==b?"string"===typeof c?Ra(null,a).fill(b,c):Ra(null,a).fill(b):Ra(null,a);return a};u.allocUnsafe=function(a){return Pc(null,a)};u.allocUnsafeSlow=function(a){return Pc(null,a)};u.isBuffer=ne;u.compare=function(a,b){if(!Ia(a)||!Ia(b))throw new TypeError("Arguments must be Buffers");
if(a===b)return 0;for(var c=a.length,d=b.length,e=0,f=Math.min(c,d);e<f;++e)if(a[e]!==b[e]){c=a[e];d=b[e];break}return c<d?-1:d<c?1:0};u.isEncoding=function(a){switch(String(a).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};u.concat=function(a,b){if(!de(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return u.alloc(0);
var c;if(void 0===b)for(c=b=0;c<a.length;++c)b+=a[c].length;b=u.allocUnsafe(b);var d=0;for(c=0;c<a.length;++c){var e=a[c];if(!Ia(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(b,d);d+=e.length}return b};u.byteLength=be;u.prototype._isBuffer=!0;u.prototype.swap16=function(){var a=this.length;if(0!==a%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;b<a;b+=2)hb(this,b,b+1);return this};u.prototype.swap32=function(){var a=this.length;if(0!==
a%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<a;b+=4)hb(this,b,b+3),hb(this,b+1,b+2);return this};u.prototype.swap64=function(){var a=this.length;if(0!==a%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<a;b+=8)hb(this,b,b+7),hb(this,b+1,b+6),hb(this,b+2,b+5),hb(this,b+3,b+4);return this};u.prototype.toString=function(){var a=this.length|0;return 0===a?"":0===arguments.length?fe(this,0,a):sg.apply(this,arguments)};u.prototype.equals=
function(a){if(!Ia(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:0===u.compare(this,a)};u.prototype.inspect=function(){var a="";0<this.length&&(a=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(a+=" ... "));return"<Buffer "+a+">"};u.prototype.compare=function(a,b,c,d,e){if(!Ia(a))throw new TypeError("Argument must be a Buffer");void 0===b&&(b=0);void 0===c&&(c=a?a.length:0);void 0===d&&(d=0);void 0===e&&(e=this.length);if(0>b||c>a.length||0>d||e>this.length)throw new RangeError("out of range index");
if(d>=e&&b>=c)return 0;if(d>=e)return-1;if(b>=c)return 1;b>>>=0;c>>>=0;d>>>=0;e>>>=0;if(this===a)return 0;var f=e-d,g=c-b,h=Math.min(f,g);d=this.slice(d,e);a=a.slice(b,c);for(b=0;b<h;++b)if(d[b]!==a[b]){f=d[b];g=a[b];break}return f<g?-1:g<f?1:0};u.prototype.includes=function(a,b,c){return-1!==this.indexOf(a,b,c)};u.prototype.indexOf=function(a,b,c){return ge(this,a,b,c,!0)};u.prototype.lastIndexOf=function(a,b,c){return ge(this,a,b,c,!1)};u.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",
c=this.length,b=0;else if(void 0===c&&"string"===typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b|=0,isFinite(c)?(c|=0,void 0===d&&(d="utf8")):(d=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var e=this.length-b;if(void 0===c||c>e)c=e;if(0<a.length&&(0>c||0>b)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(e=!1;;)switch(d){case "hex":a:{b=Number(b)||0;d=this.length-b;c?(c=Number(c),c>d&&
(c=d)):c=d;d=a.length;if(0!==d%2)throw new TypeError("Invalid hex string");c>d/2&&(c=d/2);for(d=0;d<c;++d){e=parseInt(a.substr(2*d,2),16);if(isNaN(e)){a=d;break a}this[b+d]=e}a=d}return a;case "utf8":case "utf-8":return Ib(jc(a,this.length-b),this,b,c);case "ascii":return Ib(me(a),this,b,c);case "latin1":case "binary":return Ib(me(a),this,b,c);case "base64":return Ib(ee(a),this,b,c);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":var f;d=a;for(var e=this.length-b,g=[],h=0;h<d.length&&!(0>
(e-=2));++h)f=d.charCodeAt(h),a=f>>8,f%=256,g.push(f),g.push(a);return Ib(g,this,b,c);default:if(e)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();e=!0}};u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ie=4096;u.prototype.slice=function(a,b){var c=this.length;a=~~a;b=void 0===b?c:~~b;0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c);0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c);b<a&&(b=a);if(u.TYPED_ARRAY_SUPPORT)b=this.subarray(a,b),b.__proto__=u.prototype;
else{c=b-a;b=new u(c,void 0);for(var d=0;d<c;++d)b[d]=this[d+a]}return b};u.prototype.readUIntLE=function(a,b,c){a|=0;b|=0;c||da(a,b,this.length);c=this[a];for(var d=1,e=0;++e<b&&(d*=256);)c+=this[a+e]*d;return c};u.prototype.readUIntBE=function(a,b,c){a|=0;b|=0;c||da(a,b,this.length);c=this[a+--b];for(var d=1;0<b&&(d*=256);)c+=this[a+--b]*d;return c};u.prototype.readUInt8=function(a,b){b||da(a,1,this.length);return this[a]};u.prototype.readUInt16LE=function(a,b){b||da(a,2,this.length);return this[a]|
this[a+1]<<8};u.prototype.readUInt16BE=function(a,b){b||da(a,2,this.length);return this[a]<<8|this[a+1]};u.prototype.readUInt32LE=function(a,b){b||da(a,4,this.length);return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]};u.prototype.readUInt32BE=function(a,b){b||da(a,4,this.length);return 16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])};u.prototype.readIntLE=function(a,b,c){a|=0;b|=0;c||da(a,b,this.length);c=this[a];for(var d=1,e=0;++e<b&&(d*=256);)c+=this[a+e]*d;c>=128*d&&(c-=Math.pow(2,
8*b));return c};u.prototype.readIntBE=function(a,b,c){a|=0;b|=0;c||da(a,b,this.length);c=b;for(var d=1,e=this[a+--c];0<c&&(d*=256);)e+=this[a+--c]*d;e>=128*d&&(e-=Math.pow(2,8*b));return e};u.prototype.readInt8=function(a,b){b||da(a,1,this.length);return this[a]&128?-1*(255-this[a]+1):this[a]};u.prototype.readInt16LE=function(a,b){b||da(a,2,this.length);a=this[a]|this[a+1]<<8;return a&32768?a|4294901760:a};u.prototype.readInt16BE=function(a,b){b||da(a,2,this.length);a=this[a+1]|this[a]<<8;return a&
32768?a|4294901760:a};u.prototype.readInt32LE=function(a,b){b||da(a,4,this.length);return this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24};u.prototype.readInt32BE=function(a,b){b||da(a,4,this.length);return this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]};u.prototype.readFloatLE=function(a,b){b||da(a,4,this.length);return ic(this,a,!0,23,4)};u.prototype.readFloatBE=function(a,b){b||da(a,4,this.length);return ic(this,a,!1,23,4)};u.prototype.readDoubleLE=function(a,b){b||da(a,8,this.length);return ic(this,
a,!0,52,8)};u.prototype.readDoubleBE=function(a,b){b||da(a,8,this.length);return ic(this,a,!1,52,8)};u.prototype.writeUIntLE=function(a,b,c,d){a=+a;b|=0;c|=0;d||ma(this,a,b,c,Math.pow(2,8*c)-1,0);d=1;var e=0;for(this[b]=a&255;++e<c&&(d*=256);)this[b+e]=a/d&255;return b+c};u.prototype.writeUIntBE=function(a,b,c,d){a=+a;b|=0;c|=0;d||ma(this,a,b,c,Math.pow(2,8*c)-1,0);d=c-1;var e=1;for(this[b+d]=a&255;0<=--d&&(e*=256);)this[b+d]=a/e&255;return b+c};u.prototype.writeUInt8=function(a,b,c){a=+a;b|=0;c||
ma(this,a,b,1,255,0);u.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));this[b]=a&255;return b+1};u.prototype.writeUInt16LE=function(a,b,c){a=+a;b|=0;c||ma(this,a,b,2,65535,0);u.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8):kc(this,a,b,!0);return b+2};u.prototype.writeUInt16BE=function(a,b,c){a=+a;b|=0;c||ma(this,a,b,2,65535,0);u.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a&255):kc(this,a,b,!1);return b+2};u.prototype.writeUInt32LE=function(a,b,c){a=+a;b|=0;c||ma(this,a,b,4,4294967295,0);u.TYPED_ARRAY_SUPPORT?
(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=a&255):lc(this,a,b,!0);return b+4};u.prototype.writeUInt32BE=function(a,b,c){a=+a;b|=0;c||ma(this,a,b,4,4294967295,0);u.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a&255):lc(this,a,b,!1);return b+4};u.prototype.writeIntLE=function(a,b,c,d){a=+a;b|=0;d||(d=Math.pow(2,8*c-1),ma(this,a,b,c,d-1,-d));d=0;var e=1,f=0;for(this[b]=a&255;++d<c&&(e*=256);)0>a&&0===f&&0!==this[b+d-1]&&(f=1),this[b+d]=(a/e>>0)-f&255;
return b+c};u.prototype.writeIntBE=function(a,b,c,d){a=+a;b|=0;d||(d=Math.pow(2,8*c-1),ma(this,a,b,c,d-1,-d));d=c-1;var e=1,f=0;for(this[b+d]=a&255;0<=--d&&(e*=256);)0>a&&0===f&&0!==this[b+d+1]&&(f=1),this[b+d]=(a/e>>0)-f&255;return b+c};u.prototype.writeInt8=function(a,b,c){a=+a;b|=0;c||ma(this,a,b,1,127,-128);u.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));0>a&&(a=255+a+1);this[b]=a&255;return b+1};u.prototype.writeInt16LE=function(a,b,c){a=+a;b|=0;c||ma(this,a,b,2,32767,-32768);u.TYPED_ARRAY_SUPPORT?
(this[b]=a&255,this[b+1]=a>>>8):kc(this,a,b,!0);return b+2};u.prototype.writeInt16BE=function(a,b,c){a=+a;b|=0;c||ma(this,a,b,2,32767,-32768);u.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a&255):kc(this,a,b,!1);return b+2};u.prototype.writeInt32LE=function(a,b,c){a=+a;b|=0;c||ma(this,a,b,4,2147483647,-2147483648);u.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):lc(this,a,b,!0);return b+4};u.prototype.writeInt32BE=function(a,b,c){a=+a;b|=0;c||ma(this,a,b,4,2147483647,
-2147483648);0>a&&(a=4294967295+a+1);u.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a&255):lc(this,a,b,!1);return b+4};u.prototype.writeFloatLE=function(a,b,c){return ke(this,a,b,!0,c)};u.prototype.writeFloatBE=function(a,b,c){return ke(this,a,b,!1,c)};u.prototype.writeDoubleLE=function(a,b,c){return le(this,a,b,!0,c)};u.prototype.writeDoubleBE=function(a,b,c){return le(this,a,b,!1,c)};u.prototype.copy=function(a,b,c,d){c||(c=0);d||0===d||(d=this.length);b>=a.length&&
(b=a.length);b||(b=0);0<d&&d<c&&(d=c);if(d===c||0===a.length||0===this.length)return 0;if(0>b)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("sourceStart out of bounds");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length);a.length-b<d-c&&(d=a.length-b+c);var e=d-c;if(this===a&&c<b&&b<d)for(d=e-1;0<=d;--d)a[d+b]=this[d+c];else if(1E3>e||!u.TYPED_ARRAY_SUPPORT)for(d=0;d<e;++d)a[d+b]=this[d+c];else Uint8Array.prototype.set.call(a,
this.subarray(c,c+e),b);return e};u.prototype.fill=function(a,b,c,d){if("string"===typeof a){"string"===typeof b?(d=b,b=0,c=this.length):"string"===typeof c&&(d=c,c=this.length);if(1===a.length){var e=a.charCodeAt(0);256>e&&(a=e)}if(void 0!==d&&"string"!==typeof d)throw new TypeError("encoding must be a string");if("string"===typeof d&&!u.isEncoding(d))throw new TypeError("Unknown encoding: "+d);}else"number"===typeof a&&(a&=255);if(0>b||this.length<b||this.length<c)throw new RangeError("Out of range index");
if(c<=b)return this;b>>>=0;c=void 0===c?this.length:c>>>0;a||(a=0);if("number"===typeof a)for(d=b;d<c;++d)this[d]=a;else for(a=Ia(a)?a:jc((new u(a,d)).toString()),e=a.length,d=0;d<c-b;++d)this[d+b]=a[d%e];return this};var tg=/[^+\/0-9A-Za-z-_]/g,ih=Object.freeze({INSPECT_MAX_BYTES:50,kMaxLength:hh,Buffer:u,SlowBuffer:function(a){+a!=a&&(a=0);return u.alloc(+a)},isBuffer:ne}),Of=Nf&&Mf||Nf,Pf=va(function(a){(function(){function b(a){a?(m[0]=m[16]=m[1]=m[2]=m[3]=m[4]=m[5]=m[6]=m[7]=m[8]=m[9]=m[10]=
m[11]=m[12]=m[13]=m[14]=m[15]=0,this.blocks=m,this.buffer8=r):f?(a=new ArrayBuffer(68),this.buffer8=new Uint8Array(a),this.blocks=new Uint32Array(a)):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=0;this.finalized=this.hashed=!1;this.first=!0}var c="object"===typeof window?window:{},d=!c.JS_MD5_NO_NODE_JS&&"object"===typeof db&&db.versions&&db.versions.node;d&&(c=pb);var e=!c.JS_MD5_NO_COMMON_JS&&!0&&a.exports,f=!c.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!==
typeof ArrayBuffer,g="0123456789abcdef".split(""),h=[128,32768,8388608,-2147483648],l=[0,8,16,24],k=["hex","array","digest","buffer","arrayBuffer"],m=[],r;if(f){var t=new ArrayBuffer(68);r=new Uint8Array(t);m=new Uint32Array(t)}var p=function(a){return function(c){return(new b(!0)).update(c)[a]()}},q=function(a){var b=ih.Buffer;return function(c){if("string"===typeof c)return Of.createHash("md5").update(c,"utf8").digest("hex");if(c.constructor===ArrayBuffer)c=new Uint8Array(c);else if(void 0===c.length)return a(c);
return Of.createHash("md5").update(new b(c)).digest("hex")}};b.prototype.update=function(a){if(!this.finalized){var b="string"!=typeof a;b&&a.constructor==c.ArrayBuffer&&(a=new Uint8Array(a));for(var d,e=0,g,h=a.length||0,k=this.blocks,m=this.buffer8;e<h;){this.hashed&&(this.hashed=!1,k[0]=k[16],k[16]=k[1]=k[2]=k[3]=k[4]=k[5]=k[6]=k[7]=k[8]=k[9]=k[10]=k[11]=k[12]=k[13]=k[14]=k[15]=0);if(b)if(f)for(g=this.start;e<h&&64>g;++e)m[g++]=a[e];else for(g=this.start;e<h&&64>g;++e)k[g>>2]|=a[e]<<l[g++&3];else if(f)for(g=
this.start;e<h&&64>g;++e)d=a.charCodeAt(e),128>d?m[g++]=d:(2048>d?m[g++]=192|d>>6:(55296>d||57344<=d?m[g++]=224|d>>12:(d=65536+((d&1023)<<10|a.charCodeAt(++e)&1023),m[g++]=240|d>>18,m[g++]=128|d>>12&63),m[g++]=128|d>>6&63),m[g++]=128|d&63);else for(g=this.start;e<h&&64>g;++e)d=a.charCodeAt(e),128>d?k[g>>2]|=d<<l[g++&3]:(2048>d?k[g>>2]|=(192|d>>6)<<l[g++&3]:(55296>d||57344<=d?k[g>>2]|=(224|d>>12)<<l[g++&3]:(d=65536+((d&1023)<<10|a.charCodeAt(++e)&1023),k[g>>2]|=(240|d>>18)<<l[g++&3],k[g>>2]|=(128|
d>>12&63)<<l[g++&3]),k[g>>2]|=(128|d>>6&63)<<l[g++&3]),k[g>>2]|=(128|d&63)<<l[g++&3]);this.lastByteIndex=g;this.bytes+=g-this.start;64<=g?(this.start=g-64,this.hash(),this.hashed=!0):this.start=g}return this}};b.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var a=this.blocks,b=this.lastByteIndex;a[b>>2]|=h[b&3];56<=b&&(this.hashed||this.hash(),a[0]=a[16],a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0);a[14]=this.bytes<<3;this.hash()}};
b.prototype.hash=function(){var a,b,c,d,e,f=this.blocks;this.first?(a=f[0]-680876937,a=(a<<7|a>>>25)-271733879<<0,d=(-1732584194^a&2004318071)+f[1]-117830708,d=(d<<12|d>>>20)+a<<0,c=(-271733879^d&(a^-271733879))+f[2]-1126478375,c=(c<<17|c>>>15)+d<<0,b=(a^c&(d^a))+f[3]-1316259209):(a=this.h0,b=this.h1,c=this.h2,d=this.h3,a+=(d^b&(c^d))+f[0]-680876936,a=(a<<7|a>>>25)+b<<0,d+=(c^a&(b^c))+f[1]-389564586,d=(d<<12|d>>>20)+a<<0,c+=(b^d&(a^b))+f[2]+606105819,c=(c<<17|c>>>15)+d<<0,b+=(a^c&(d^a))+f[3]-1044525330);
b=(b<<22|b>>>10)+c<<0;a+=(d^b&(c^d))+f[4]-176418897;a=(a<<7|a>>>25)+b<<0;d+=(c^a&(b^c))+f[5]+1200080426;d=(d<<12|d>>>20)+a<<0;c+=(b^d&(a^b))+f[6]-1473231341;c=(c<<17|c>>>15)+d<<0;b+=(a^c&(d^a))+f[7]-45705983;b=(b<<22|b>>>10)+c<<0;a+=(d^b&(c^d))+f[8]+1770035416;a=(a<<7|a>>>25)+b<<0;d+=(c^a&(b^c))+f[9]-1958414417;d=(d<<12|d>>>20)+a<<0;c+=(b^d&(a^b))+f[10]-42063;c=(c<<17|c>>>15)+d<<0;b+=(a^c&(d^a))+f[11]-1990404162;b=(b<<22|b>>>10)+c<<0;a+=(d^b&(c^d))+f[12]+1804603682;a=(a<<7|a>>>25)+b<<0;d+=(c^a&(b^
c))+f[13]-40341101;d=(d<<12|d>>>20)+a<<0;c+=(b^d&(a^b))+f[14]-1502002290;c=(c<<17|c>>>15)+d<<0;b+=(a^c&(d^a))+f[15]+1236535329;b=(b<<22|b>>>10)+c<<0;a+=(c^d&(b^c))+f[1]-165796510;a=(a<<5|a>>>27)+b<<0;d+=(b^c&(a^b))+f[6]-1069501632;d=(d<<9|d>>>23)+a<<0;c+=(a^b&(d^a))+f[11]+643717713;c=(c<<14|c>>>18)+d<<0;b+=(d^a&(c^d))+f[0]-373897302;b=(b<<20|b>>>12)+c<<0;a+=(c^d&(b^c))+f[5]-701558691;a=(a<<5|a>>>27)+b<<0;d+=(b^c&(a^b))+f[10]+38016083;d=(d<<9|d>>>23)+a<<0;c+=(a^b&(d^a))+f[15]-660478335;c=(c<<14|c>>>
18)+d<<0;b+=(d^a&(c^d))+f[4]-405537848;b=(b<<20|b>>>12)+c<<0;a+=(c^d&(b^c))+f[9]+568446438;a=(a<<5|a>>>27)+b<<0;d+=(b^c&(a^b))+f[14]-1019803690;d=(d<<9|d>>>23)+a<<0;c+=(a^b&(d^a))+f[3]-187363961;c=(c<<14|c>>>18)+d<<0;b+=(d^a&(c^d))+f[8]+1163531501;b=(b<<20|b>>>12)+c<<0;a+=(c^d&(b^c))+f[13]-1444681467;a=(a<<5|a>>>27)+b<<0;d+=(b^c&(a^b))+f[2]-51403784;d=(d<<9|d>>>23)+a<<0;c+=(a^b&(d^a))+f[7]+1735328473;c=(c<<14|c>>>18)+d<<0;b+=(d^a&(c^d))+f[12]-1926607734;b=(b<<20|b>>>12)+c<<0;e=b^c;a+=(e^d)+f[5]-378558;
a=(a<<4|a>>>28)+b<<0;d+=(e^a)+f[8]-2022574463;d=(d<<11|d>>>21)+a<<0;e=d^a;c+=(e^b)+f[11]+1839030562;c=(c<<16|c>>>16)+d<<0;b+=(e^c)+f[14]-35309556;b=(b<<23|b>>>9)+c<<0;e=b^c;a+=(e^d)+f[1]-1530992060;a=(a<<4|a>>>28)+b<<0;d+=(e^a)+f[4]+1272893353;d=(d<<11|d>>>21)+a<<0;e=d^a;c+=(e^b)+f[7]-155497632;c=(c<<16|c>>>16)+d<<0;b+=(e^c)+f[10]-1094730640;b=(b<<23|b>>>9)+c<<0;e=b^c;a+=(e^d)+f[13]+681279174;a=(a<<4|a>>>28)+b<<0;d+=(e^a)+f[0]-358537222;d=(d<<11|d>>>21)+a<<0;e=d^a;c+=(e^b)+f[3]-722521979;c=(c<<16|
c>>>16)+d<<0;b+=(e^c)+f[6]+76029189;b=(b<<23|b>>>9)+c<<0;e=b^c;a+=(e^d)+f[9]-640364487;a=(a<<4|a>>>28)+b<<0;d+=(e^a)+f[12]-421815835;d=(d<<11|d>>>21)+a<<0;e=d^a;c+=(e^b)+f[15]+530742520;c=(c<<16|c>>>16)+d<<0;b+=(e^c)+f[2]-995338651;b=(b<<23|b>>>9)+c<<0;a+=(c^(b|~d))+f[0]-198630844;a=(a<<6|a>>>26)+b<<0;d+=(b^(a|~c))+f[7]+1126891415;d=(d<<10|d>>>22)+a<<0;c+=(a^(d|~b))+f[14]-1416354905;c=(c<<15|c>>>17)+d<<0;b+=(d^(c|~a))+f[5]-57434055;b=(b<<21|b>>>11)+c<<0;a+=(c^(b|~d))+f[12]+1700485571;a=(a<<6|a>>>
26)+b<<0;d+=(b^(a|~c))+f[3]-1894986606;d=(d<<10|d>>>22)+a<<0;c+=(a^(d|~b))+f[10]-1051523;c=(c<<15|c>>>17)+d<<0;b+=(d^(c|~a))+f[1]-2054922799;b=(b<<21|b>>>11)+c<<0;a+=(c^(b|~d))+f[8]+1873313359;a=(a<<6|a>>>26)+b<<0;d+=(b^(a|~c))+f[15]-30611744;d=(d<<10|d>>>22)+a<<0;c+=(a^(d|~b))+f[6]-1560198380;c=(c<<15|c>>>17)+d<<0;b+=(d^(c|~a))+f[13]+1309151649;b=(b<<21|b>>>11)+c<<0;a+=(c^(b|~d))+f[4]-145523070;a=(a<<6|a>>>26)+b<<0;d+=(b^(a|~c))+f[11]-1120210379;d=(d<<10|d>>>22)+a<<0;c+=(a^(d|~b))+f[2]+718787259;
c=(c<<15|c>>>17)+d<<0;b+=(d^(c|~a))+f[9]-343485551;b=(b<<21|b>>>11)+c<<0;this.first?(this.h0=a+1732584193<<0,this.h1=b-271733879<<0,this.h2=c-1732584194<<0,this.h3=d+271733878<<0,this.first=!1):(this.h0=this.h0+a<<0,this.h1=this.h1+b<<0,this.h2=this.h2+c<<0,this.h3=this.h3+d<<0)};b.prototype.hex=function(){this.finalize();var a=this.h0,b=this.h1,c=this.h2,d=this.h3;return g[a>>4&15]+g[a&15]+g[a>>12&15]+g[a>>8&15]+g[a>>20&15]+g[a>>16&15]+g[a>>28&15]+g[a>>24&15]+g[b>>4&15]+g[b&15]+g[b>>12&15]+g[b>>
8&15]+g[b>>20&15]+g[b>>16&15]+g[b>>28&15]+g[b>>24&15]+g[c>>4&15]+g[c&15]+g[c>>12&15]+g[c>>8&15]+g[c>>20&15]+g[c>>16&15]+g[c>>28&15]+g[c>>24&15]+g[d>>4&15]+g[d&15]+g[d>>12&15]+g[d>>8&15]+g[d>>20&15]+g[d>>16&15]+g[d>>28&15]+g[d>>24&15]};b.prototype.toString=b.prototype.hex;b.prototype.digest=function(){this.finalize();var a=this.h0,b=this.h1,c=this.h2,d=this.h3;return[a&255,a>>8&255,a>>16&255,a>>24&255,b&255,b>>8&255,b>>16&255,b>>24&255,c&255,c>>8&255,c>>16&255,c>>24&255,d&255,d>>8&255,d>>16&255,d>>
24&255]};b.prototype.array=b.prototype.digest;b.prototype.arrayBuffer=function(){this.finalize();var a=new ArrayBuffer(16),b=new Uint32Array(a);b[0]=this.h0;b[1]=this.h1;b[2]=this.h2;b[3]=this.h3;return a};b.prototype.buffer=b.prototype.arrayBuffer;t=function(){var a=p("hex");d&&(a=q(a));a.create=function(){return new b};a.update=function(b){return a.create().update(b)};for(var c=0;c<k.length;++c){var f=k[c];a[f]=p(f)}return a}();e?a.exports=t:c.md5=t})()}),L=va(function(a,b){a="undefined"!==typeof Uint8Array&&
"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;b.assign=function(a){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var c=b.shift();if(c){if("object"!==typeof c)throw new TypeError(c+"must be non-object");for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}}return a};b.shrinkBuf=function(a,b){if(a.length===b)return a;if(a.subarray)return a.subarray(0,b);a.length=b;return a};var c={arraySet:function(a,b,c,d,l){if(b.subarray&&a.subarray)a.set(b.subarray(c,c+d),l);else for(var f=
0;f<d;f++)a[l+f]=b[c+f]},flattenChunks:function(a){var b,c,d,e,k;b=d=0;for(c=a.length;b<c;b++)d+=a[b].length;k=new Uint8Array(d);b=d=0;for(c=a.length;b<c;b++)e=a[b],k.set(e,d),d+=e.length;return k}},d={arraySet:function(a,b,c,d,l){for(var f=0;f<d;f++)a[l+f]=b[c+f]},flattenChunks:function(a){return[].concat.apply([],a)}};b.setTyped=function(a){a?(b.Buf8=Uint8Array,b.Buf16=Uint16Array,b.Buf32=Int32Array,b.assign(b,c)):(b.Buf8=Array,b.Buf16=Array,b.Buf32=Array,b.assign(b,d))};b.setTyped(a)}),Vc=[0,0,
0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],mc=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],jh=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Qf=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Va=Array(576);sb(Va);var Zb=Array(60);sb(Zb);var ib=Array(512);sb(ib);var Kb=Array(256);sb(Kb);var Wc=Array(29);sb(Wc);var nc=Array(30);sb(nc);var Rf,Sf,Tf,Uf=!1,Aa={_tr_init:function(a){if(!Uf){var b,c,d,e=Array(16);for(d=c=0;28>d;d++)for(Wc[d]=c,b=0;b<1<<Vc[d];b++)Kb[c++]=d;Kb[c-
1]=d;for(d=c=0;16>d;d++)for(nc[d]=c,b=0;b<1<<mc[d];b++)ib[c++]=d;for(c>>=7;30>d;d++)for(nc[d]=c<<7,b=0;b<1<<mc[d]-7;b++)ib[256+c++]=d;for(b=0;15>=b;b++)e[b]=0;for(b=0;143>=b;)Va[2*b+1]=8,b++,e[8]++;for(;255>=b;)Va[2*b+1]=9,b++,e[9]++;for(;279>=b;)Va[2*b+1]=7,b++,e[7]++;for(;287>=b;)Va[2*b+1]=8,b++,e[8]++;qe(Va,287,e);for(b=0;30>b;b++)Zb[2*b+1]=5,Zb[2*b]=pe(b,5);Rf=new Sc(Va,Vc,257,286,15);Sf=new Sc(Zb,mc,0,30,15);Tf=new Sc([],jh,0,19,7);Uf=!0}a.l_desc=new Tc(a.dyn_ltree,Rf);a.d_desc=new Tc(a.dyn_dtree,
Sf);a.bl_desc=new Tc(a.bl_tree,Tf);a.bi_buf=0;a.bi_valid=0;re(a)},_tr_stored_block:xe,_tr_flush_block:function(a,b,c,d){var e,f,g=0;if(0<a.level){2===a.strm.data_type&&(a.strm.data_type=vg(a));Xc(a,a.l_desc);Xc(a,a.d_desc);ve(a,a.dyn_ltree,a.l_desc.max_code);ve(a,a.dyn_dtree,a.d_desc.max_code);Xc(a,a.bl_desc);for(g=18;3<=g&&0===a.bl_tree[2*Qf[g]+1];g--);a.opt_len+=3*(g+1)+14;e=a.opt_len+3+7>>>3;f=a.static_len+3+7>>>3;f<=e&&(e=f)}else e=f=c+5;if(c+4<=e&&-1!==b)xe(a,b,c,d);else if(4===a.strategy||f===
e)na(a,2+(d?1:0),3),ue(a,Va,Zb);else{na(a,4+(d?1:0),3);b=a.l_desc.max_code+1;c=a.d_desc.max_code+1;g+=1;na(a,b-257,5);na(a,c-1,5);na(a,g-4,4);for(e=0;e<g;e++)na(a,a.bl_tree[2*Qf[e]+1],3);we(a,a.dyn_ltree,b-1);we(a,a.dyn_dtree,c-1);ue(a,a.dyn_ltree,a.dyn_dtree)}re(a);d&&se(a)},_tr_tally:function(a,b,c){a.pending_buf[a.d_buf+2*a.last_lit]=b>>>8&255;a.pending_buf[a.d_buf+2*a.last_lit+1]=b&255;a.pending_buf[a.l_buf+a.last_lit]=c&255;a.last_lit++;0===b?a.dyn_ltree[2*c]++:(a.matches++,b--,a.dyn_ltree[2*
(Kb[c]+256+1)]++,a.dyn_dtree[2*(256>b?ib[b]:ib[256+(b>>>7)])]++);return a.last_lit===a.lit_bufsize-1},_tr_align:function(a){na(a,2,3);Ja(a,256,Va);16===a.bi_valid?(Jb(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):8<=a.bi_valid&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)}},Mb=function(a,b,c,d){var e=a&65535|0;a=a>>>16&65535|0;for(var f;0!==c;){f=2E3<c?2E3:c;c-=f;do e=e+b[d++]|0,a=a+e|0;while(--f);e%=65521;a%=65521}return e|a<<16|0},kh=function(){for(var a,b=[],c=0;256>c;c++){a=c;for(var d=
0;8>d;d++)a=a&1?3988292384^a>>>1:a>>>1;b[c]=a}return b}(),ea=function(a,b,c,d){c=d+c;for(a^=-1;d<c;d++)a=a>>>8^kh[(a^b[d])&255];return a^-1},tb={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},vb;vb=[new Ka(0,0,0,0,function(a,b){var c=65535;for(c>a.pending_buf_size-5&&(c=a.pending_buf_size-5);;){if(1>=a.lookahead){jb(a);if(0===a.lookahead&&0===b)return 1;if(0===a.lookahead)break}a.strstart+=
a.lookahead;a.lookahead=0;var d=a.block_start+c;if(0===a.strstart||a.strstart>=d)if(a.lookahead=a.strstart-d,a.strstart=d,ha(a,!1),0===a.strm.avail_out)return 1;if(a.strstart-a.block_start>=a.w_size-262&&(ha(a,!1),0===a.strm.avail_out))return 1}a.insert=0;if(4===b)return ha(a,!0),0===a.strm.avail_out?3:4;a.strstart>a.block_start&&ha(a,!1);return 1}),new Ka(4,4,8,4,Yc),new Ka(4,5,16,8,Yc),new Ka(4,6,32,32,Yc),new Ka(4,4,16,16,ub),new Ka(8,16,32,32,ub),new Ka(8,16,128,128,ub),new Ka(8,32,128,256,ub),
new Ka(32,128,258,1024,ub),new Ka(32,258,258,4096,ub)];var Nb={deflateInit:function(a,b){return Be(a,b,8,15,8,0)},deflateInit2:Be,deflateReset:Ae,deflateResetKeep:ze,deflateSetHeader:function(a,b){if(!a||!a.state||2!==a.state.wrap)return-2;a.state.gzhead=b;return 0},deflate:function(a,b){var c,d,e,f;if(!a||!a.state||5<b||0>b)return a?Za(a,-2):-2;d=a.state;if(!a.output||!a.input&&0!==a.avail_in||666===d.status&&4!==b)return Za(a,0===a.avail_out?-5:-2);d.strm=a;c=d.last_flush;d.last_flush=b;42===d.status&&
(2===d.wrap?(a.adler=0,S(d,31),S(d,139),S(d,8),d.gzhead?(S(d,(d.gzhead.text?1:0)+(d.gzhead.hcrc?2:0)+(d.gzhead.extra?4:0)+(d.gzhead.name?8:0)+(d.gzhead.comment?16:0)),S(d,d.gzhead.time&255),S(d,d.gzhead.time>>8&255),S(d,d.gzhead.time>>16&255),S(d,d.gzhead.time>>24&255),S(d,9===d.level?2:2<=d.strategy||2>d.level?4:0),S(d,d.gzhead.os&255),d.gzhead.extra&&d.gzhead.extra.length&&(S(d,d.gzhead.extra.length&255),S(d,d.gzhead.extra.length>>8&255)),d.gzhead.hcrc&&(a.adler=ea(a.adler,d.pending_buf,d.pending,
0)),d.gzindex=0,d.status=69):(S(d,0),S(d,0),S(d,0),S(d,0),S(d,0),S(d,9===d.level?2:2<=d.strategy||2>d.level?4:0),S(d,3),d.status=113)):(e=8+(d.w_bits-8<<4)<<8,e|=(2<=d.strategy||2>d.level?0:6>d.level?1:6===d.level?2:3)<<6,0!==d.strstart&&(e|=32),d.status=113,Lb(d,e+(31-e%31)),0!==d.strstart&&(Lb(d,a.adler>>>16),Lb(d,a.adler&65535)),a.adler=1));if(69===d.status)if(d.gzhead.extra){for(e=d.pending;d.gzindex<(d.gzhead.extra.length&65535)&&(d.pending!==d.pending_buf_size||(d.gzhead.hcrc&&d.pending>e&&
(a.adler=ea(a.adler,d.pending_buf,d.pending-e,e)),ab(a),e=d.pending,d.pending!==d.pending_buf_size));)S(d,d.gzhead.extra[d.gzindex]&255),d.gzindex++;d.gzhead.hcrc&&d.pending>e&&(a.adler=ea(a.adler,d.pending_buf,d.pending-e,e));d.gzindex===d.gzhead.extra.length&&(d.gzindex=0,d.status=73)}else d.status=73;if(73===d.status)if(d.gzhead.name){e=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>e&&(a.adler=ea(a.adler,d.pending_buf,d.pending-e,e)),ab(a),e=d.pending,d.pending===d.pending_buf_size)){f=
1;break}f=d.gzindex<d.gzhead.name.length?d.gzhead.name.charCodeAt(d.gzindex++)&255:0;S(d,f)}while(0!==f);d.gzhead.hcrc&&d.pending>e&&(a.adler=ea(a.adler,d.pending_buf,d.pending-e,e));0===f&&(d.gzindex=0,d.status=91)}else d.status=91;if(91===d.status)if(d.gzhead.comment){e=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>e&&(a.adler=ea(a.adler,d.pending_buf,d.pending-e,e)),ab(a),e=d.pending,d.pending===d.pending_buf_size)){f=1;break}f=d.gzindex<d.gzhead.comment.length?d.gzhead.comment.charCodeAt(d.gzindex++)&
255:0;S(d,f)}while(0!==f);d.gzhead.hcrc&&d.pending>e&&(a.adler=ea(a.adler,d.pending_buf,d.pending-e,e));0===f&&(d.status=103)}else d.status=103;103===d.status&&(d.gzhead.hcrc?(d.pending+2>d.pending_buf_size&&ab(a),d.pending+2<=d.pending_buf_size&&(S(d,a.adler&255),S(d,a.adler>>8&255),a.adler=0,d.status=113)):d.status=113);if(0!==d.pending){if(ab(a),0===a.avail_out)return d.last_flush=-1,0}else if(0===a.avail_in&&(b<<1)-(4<b?9:0)<=(c<<1)-(4<c?9:0)&&4!==b)return Za(a,-5);if(666===d.status&&0!==a.avail_in)return Za(a,
-5);if(0!==a.avail_in||0!==d.lookahead||0!==b&&666!==d.status){c=2===d.strategy?xg(d,b):3===d.strategy?wg(d,b):vb[d.level].func(d,b);if(3===c||4===c)d.status=666;if(1===c||3===c)return 0===a.avail_out&&(d.last_flush=-1),0;if(2===c&&(1===b?Aa._tr_align(d):5!==b&&(Aa._tr_stored_block(d,0,0,!1),3===b&&($a(d.head),0===d.lookahead&&(d.strstart=0,d.block_start=0,d.insert=0))),ab(a),0===a.avail_out))return d.last_flush=-1,0}if(4!==b)return 0;if(0>=d.wrap)return 1;2===d.wrap?(S(d,a.adler&255),S(d,a.adler>>
8&255),S(d,a.adler>>16&255),S(d,a.adler>>24&255),S(d,a.total_in&255),S(d,a.total_in>>8&255),S(d,a.total_in>>16&255),S(d,a.total_in>>24&255)):(Lb(d,a.adler>>>16),Lb(d,a.adler&65535));ab(a);0<d.wrap&&(d.wrap=-d.wrap);return 0!==d.pending?0:1},deflateEnd:function(a){var b;if(!a||!a.state)return-2;b=a.state.status;if(42!==b&&69!==b&&73!==b&&91!==b&&103!==b&&113!==b&&666!==b)return Za(a,-2);a.state=null;return 113===b?Za(a,-3):0},deflateSetDictionary:function(a,b){var c=b.length,d,e,f,g,h;if(!a||!a.state)return-2;
d=a.state;e=d.wrap;if(2===e||1===e&&42!==d.status||d.lookahead)return-2;1===e&&(a.adler=Mb(a.adler,b,c,0));d.wrap=0;c>=d.w_size&&(0===e&&($a(d.head),d.strstart=0,d.block_start=0,d.insert=0),f=new L.Buf8(d.w_size),L.arraySet(f,b,c-d.w_size,d.w_size,0),b=f,c=d.w_size);f=a.avail_in;g=a.next_in;h=a.input;a.avail_in=c;a.next_in=0;a.input=b;for(jb(d);3<=d.lookahead;){b=d.strstart;c=d.lookahead-2;do d.ins_h=(d.ins_h<<d.hash_shift^d.window[b+3-1])&d.hash_mask,d.prev[b&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=
b,b++;while(--c);d.strstart=b;d.lookahead=2;jb(d)}d.strstart+=d.lookahead;d.block_start=d.strstart;d.insert=d.lookahead;d.lookahead=0;d.match_length=d.prev_length=2;d.match_available=0;a.next_in=g;a.input=h;a.avail_in=f;d.wrap=e;return 0},deflateInfo:"pako deflate (from Nodeca project)"},Ee=!0,De=!0;try{String.fromCharCode.apply(null,[0])}catch(a){Ee=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){De=!1}for(var $b=new L.Buf8(256),eb=0;256>eb;eb++)$b[eb]=252<=eb?6:248<=eb?5:240<=
eb?4:224<=eb?3:192<=eb?2:1;$b[254]=$b[254]=1;var lb={string2buf:function(a){var b,c,d,e,f,g=a.length,h=0;for(e=0;e<g;e++)c=a.charCodeAt(e),55296===(c&64512)&&e+1<g&&(d=a.charCodeAt(e+1),56320===(d&64512)&&(c=65536+(c-55296<<10)+(d-56320),e++)),h+=128>c?1:2048>c?2:65536>c?3:4;b=new L.Buf8(h);for(e=f=0;f<h;e++)c=a.charCodeAt(e),55296===(c&64512)&&e+1<g&&(d=a.charCodeAt(e+1),56320===(d&64512)&&(c=65536+(c-55296<<10)+(d-56320),e++)),128>c?b[f++]=c:(2048>c?b[f++]=192|c>>>6:(65536>c?b[f++]=224|c>>>12:(b[f++]=
240|c>>>18,b[f++]=128|c>>>12&63),b[f++]=128|c>>>6&63),b[f++]=128|c&63);return b},buf2binstring:function(a){return Ce(a,a.length)},binstring2buf:function(a){for(var b=new L.Buf8(a.length),c=0,d=b.length;c<d;c++)b[c]=a.charCodeAt(c);return b},buf2string:function(a,b){var c,d,e,f=b||a.length,g=Array(2*f);for(b=c=0;b<f;)if(d=a[b++],128>d)g[c++]=d;else if(e=$b[d],4<e)g[c++]=65533,b+=e-1;else{for(d&=2===e?31:3===e?15:7;1<e&&b<f;)d=d<<6|a[b++]&63,e--;1<e?g[c++]=65533:65536>d?g[c++]=d:(d-=65536,g[c++]=55296|
d>>10&1023,g[c++]=56320|d&1023)}return Ce(g,c)},utf8border:function(a,b){var c;b=b||a.length;b>a.length&&(b=a.length);for(c=b-1;0<=c&&128===(a[c]&192);)c--;return 0>c||0===c?b:c+$b[a[c]]>b?c:b}},Fe=function(){this.input=null;this.total_in=this.avail_in=this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0},Ge=Object.prototype.toString;kb.prototype.push=function(a,b){var c=this.strm,d=this.options.chunkSize;if(this.ended)return!1;
b=b===~~b?b:!0===b?4:0;"string"===typeof a?c.input=lb.string2buf(a):"[object ArrayBuffer]"===Ge.call(a)?c.input=new Uint8Array(a):c.input=a;c.next_in=0;c.avail_in=c.input.length;do{0===c.avail_out&&(c.output=new L.Buf8(d),c.next_out=0,c.avail_out=d);a=Nb.deflate(c,b);if(1!==a&&0!==a)return this.onEnd(a),this.ended=!0,!1;if(0===c.avail_out||0===c.avail_in&&(4===b||2===b))if("string"===this.options.to)this.onData(lb.buf2binstring(L.shrinkBuf(c.output,c.next_out)));else this.onData(L.shrinkBuf(c.output,
c.next_out))}while((0<c.avail_in||0===c.avail_out)&&1!==a);if(4===b)return a=Nb.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,0===a;2===b&&(this.onEnd(0),c.avail_out=0);return!0};kb.prototype.onData=function(a){this.chunks.push(a)};kb.prototype.onEnd=function(a){0===a&&(this.result="string"===this.options.to?this.chunks.join(""):L.flattenChunks(this.chunks));this.chunks=[];this.err=a;this.msg=this.strm.msg};var lh={Deflate:kb,deflate:Zc,deflateRaw:function(a,b){b=b||{};b.raw=!0;return Zc(a,b)},
gzip:function(a,b){b=b||{};b.gzip=!0;return Zc(a,b)}},mh=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],nh=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],oh=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],ph=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],ac=function(a,b,c,d,e,f,g,h){var l=
h.bits,k,m,r,t,p,q,v,B,z,x,w,n,C,O=0,D,u=new L.Buf16(16);p=new L.Buf16(16);var ja,fa=0,W,F,H;for(k=0;15>=k;k++)u[k]=0;for(m=0;m<d;m++)u[b[c+m]]++;t=l;for(r=15;1<=r&&0===u[r];r--);t>r&&(t=r);if(0===r)return e[f++]=20971520,e[f++]=20971520,h.bits=1,0;for(l=1;l<r&&0===u[l];l++);t<l&&(t=l);for(k=q=1;15>=k;k++)if(q<<=1,q-=u[k],0>q)return-1;if(0<q&&(0===a||1!==r))return-1;p[1]=0;for(k=1;15>k;k++)p[k+1]=p[k]+u[k];for(m=0;m<d;m++)0!==b[c+m]&&(g[p[b[c+m]]++]=m);0===a?(C=ja=g,D=19):1===a?(C=mh,O-=257,ja=nh,
fa-=257,D=256):(C=oh,ja=ph,D=-1);m=B=0;k=l;n=f;d=t;p=0;x=-1;v=1<<t;w=v-1;if(1===a&&852<v||2===a&&592<v)return 1;for(;;){W=k-p;g[m]<D?(F=0,H=g[m]):g[m]>D?(F=ja[fa+g[m]],H=C[O+g[m]]):(F=96,H=0);q=1<<k-p;l=z=1<<d;do z-=q,e[n+(B>>p)+z]=W<<24|F<<16|H|0;while(0!==z);for(q=1<<k-1;B&q;)q>>=1;0!==q?(B&=q-1,B+=q):B=0;m++;if(0===--u[k]){if(k===r)break;k=b[c+g[m]]}if(k>t&&(B&w)!==x){0===p&&(p=t);n+=l;d=k-p;for(q=1<<d;d+p<r;){q-=u[d+p];if(0>=q)break;d++;q<<=1}v+=1<<d;if(1===a&&852<v||2===a&&592<v)return 1;x=B&
w;e[x]=t<<24|d<<16|n-f|0}}0!==B&&(e[n+B]=k-p<<24|4194304);h.bits=t;return 0},Vf=!0,qd,rd,Ob={inflateReset:Je,inflateReset2:Ke,inflateResetKeep:Ie,inflateInit:function(a){return Le(a,15)},inflateInit2:Le,inflate:function(a,b){var c,d,e,f,g,h,l,k,m,r,t,p,q,v,B,z,x,w,n=new L.Buf8(4),C=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return-2;c=a.state;12===c.mode&&(c.mode=13);g=a.next_out;e=a.output;l=a.avail_out;f=a.next_in;d=a.input;h=a.avail_in;
k=c.hold;m=c.bits;r=h;t=l;w=0;a:for(;;)switch(c.mode){case 1:if(0===c.wrap){c.mode=13;break}for(;16>m;){if(0===h)break a;h--;k+=d[f++]<<m;m+=8}if(c.wrap&2&&35615===k){c.check=0;n[0]=k&255;n[1]=k>>>8&255;c.check=ea(c.check,n,2,0);m=k=0;c.mode=2;break}c.flags=0;c.head&&(c.head.done=!1);if(!(c.wrap&1)||(((k&255)<<8)+(k>>8))%31){a.msg="incorrect header check";c.mode=30;break}if(8!==(k&15)){a.msg="unknown compression method";c.mode=30;break}k>>>=4;m-=4;q=(k&15)+8;if(0===c.wbits)c.wbits=q;else if(q>c.wbits){a.msg=
"invalid window size";c.mode=30;break}c.dmax=1<<q;a.adler=c.check=1;c.mode=k&512?10:12;m=k=0;break;case 2:for(;16>m;){if(0===h)break a;h--;k+=d[f++]<<m;m+=8}c.flags=k;if(8!==(c.flags&255)){a.msg="unknown compression method";c.mode=30;break}if(c.flags&57344){a.msg="unknown header flags set";c.mode=30;break}c.head&&(c.head.text=k>>8&1);c.flags&512&&(n[0]=k&255,n[1]=k>>>8&255,c.check=ea(c.check,n,2,0));m=k=0;c.mode=3;case 3:for(;32>m;){if(0===h)break a;h--;k+=d[f++]<<m;m+=8}c.head&&(c.head.time=k);c.flags&
512&&(n[0]=k&255,n[1]=k>>>8&255,n[2]=k>>>16&255,n[3]=k>>>24&255,c.check=ea(c.check,n,4,0));m=k=0;c.mode=4;case 4:for(;16>m;){if(0===h)break a;h--;k+=d[f++]<<m;m+=8}c.head&&(c.head.xflags=k&255,c.head.os=k>>8);c.flags&512&&(n[0]=k&255,n[1]=k>>>8&255,c.check=ea(c.check,n,2,0));m=k=0;c.mode=5;case 5:if(c.flags&1024){for(;16>m;){if(0===h)break a;h--;k+=d[f++]<<m;m+=8}c.length=k;c.head&&(c.head.extra_len=k);c.flags&512&&(n[0]=k&255,n[1]=k>>>8&255,c.check=ea(c.check,n,2,0));m=k=0}else c.head&&(c.head.extra=
null);c.mode=6;case 6:if(c.flags&1024&&(p=c.length,p>h&&(p=h),p&&(c.head&&(q=c.head.extra_len-c.length,c.head.extra||(c.head.extra=Array(c.head.extra_len)),L.arraySet(c.head.extra,d,f,p,q)),c.flags&512&&(c.check=ea(c.check,d,p,f)),h-=p,f+=p,c.length-=p),c.length))break a;c.length=0;c.mode=7;case 7:if(c.flags&2048){if(0===h)break a;p=0;do q=d[f+p++],c.head&&q&&65536>c.length&&(c.head.name+=String.fromCharCode(q));while(q&&p<h);c.flags&512&&(c.check=ea(c.check,d,p,f));h-=p;f+=p;if(q)break a}else c.head&&
(c.head.name=null);c.length=0;c.mode=8;case 8:if(c.flags&4096){if(0===h)break a;p=0;do q=d[f+p++],c.head&&q&&65536>c.length&&(c.head.comment+=String.fromCharCode(q));while(q&&p<h);c.flags&512&&(c.check=ea(c.check,d,p,f));h-=p;f+=p;if(q)break a}else c.head&&(c.head.comment=null);c.mode=9;case 9:if(c.flags&512){for(;16>m;){if(0===h)break a;h--;k+=d[f++]<<m;m+=8}if(k!==(c.check&65535)){a.msg="header crc mismatch";c.mode=30;break}m=k=0}c.head&&(c.head.hcrc=c.flags>>9&1,c.head.done=!0);a.adler=c.check=
0;c.mode=12;break;case 10:for(;32>m;){if(0===h)break a;h--;k+=d[f++]<<m;m+=8}a.adler=c.check=He(k);m=k=0;c.mode=11;case 11:if(0===c.havedict)return a.next_out=g,a.avail_out=l,a.next_in=f,a.avail_in=h,c.hold=k,c.bits=m,2;a.adler=c.check=1;c.mode=12;case 12:if(5===b||6===b)break a;case 13:if(c.last){k>>>=m&7;m-=m&7;c.mode=27;break}for(;3>m;){if(0===h)break a;h--;k+=d[f++]<<m;m+=8}c.last=k&1;k>>>=1;--m;switch(k&3){case 0:c.mode=14;break;case 1:q=c;if(Vf){qd=new L.Buf32(512);rd=new L.Buf32(32);for(p=
0;144>p;)q.lens[p++]=8;for(;256>p;)q.lens[p++]=9;for(;280>p;)q.lens[p++]=7;for(;288>p;)q.lens[p++]=8;ac(1,q.lens,0,288,qd,0,q.work,{bits:9});for(p=0;32>p;)q.lens[p++]=5;ac(2,q.lens,0,32,rd,0,q.work,{bits:5});Vf=!1}q.lencode=qd;q.lenbits=9;q.distcode=rd;q.distbits=5;c.mode=20;if(6===b){k>>>=2;m-=2;break a}break;case 2:c.mode=17;break;case 3:a.msg="invalid block type",c.mode=30}k>>>=2;m-=2;break;case 14:k>>>=m&7;for(m-=m&7;32>m;){if(0===h)break a;h--;k+=d[f++]<<m;m+=8}if((k&65535)!==(k>>>16^65535)){a.msg=
"invalid stored block lengths";c.mode=30;break}c.length=k&65535;m=k=0;c.mode=15;if(6===b)break a;case 15:c.mode=16;case 16:if(p=c.length){p>h&&(p=h);p>l&&(p=l);if(0===p)break a;L.arraySet(e,d,f,p,g);h-=p;f+=p;l-=p;g+=p;c.length-=p;break}c.mode=12;break;case 17:for(;14>m;){if(0===h)break a;h--;k+=d[f++]<<m;m+=8}c.nlen=(k&31)+257;k>>>=5;m-=5;c.ndist=(k&31)+1;k>>>=5;m-=5;c.ncode=(k&15)+4;k>>>=4;m-=4;if(286<c.nlen||30<c.ndist){a.msg="too many length or distance symbols";c.mode=30;break}c.have=0;c.mode=
18;case 18:for(;c.have<c.ncode;){for(;3>m;){if(0===h)break a;h--;k+=d[f++]<<m;m+=8}c.lens[C[c.have++]]=k&7;k>>>=3;m-=3}for(;19>c.have;)c.lens[C[c.have++]]=0;c.lencode=c.lendyn;c.lenbits=7;p={bits:c.lenbits};w=ac(0,c.lens,0,19,c.lencode,0,c.work,p);c.lenbits=p.bits;if(w){a.msg="invalid code lengths set";c.mode=30;break}c.have=0;c.mode=19;case 19:for(;c.have<c.nlen+c.ndist;){for(;;){B=c.lencode[k&(1<<c.lenbits)-1];p=B>>>24;B&=65535;if(p<=m)break;if(0===h)break a;h--;k+=d[f++]<<m;m+=8}if(16>B)k>>>=p,
m-=p,c.lens[c.have++]=B;else{if(16===B){for(q=p+2;m<q;){if(0===h)break a;h--;k+=d[f++]<<m;m+=8}k>>>=p;m-=p;if(0===c.have){a.msg="invalid bit length repeat";c.mode=30;break}q=c.lens[c.have-1];p=3+(k&3);k>>>=2;m-=2}else if(17===B){for(q=p+3;m<q;){if(0===h)break a;h--;k+=d[f++]<<m;m+=8}k>>>=p;m-=p;q=0;p=3+(k&7);k>>>=3;m-=3}else{for(q=p+7;m<q;){if(0===h)break a;h--;k+=d[f++]<<m;m+=8}k>>>=p;m-=p;q=0;p=11+(k&127);k>>>=7;m-=7}if(c.have+p>c.nlen+c.ndist){a.msg="invalid bit length repeat";c.mode=30;break}for(;p--;)c.lens[c.have++]=
q}}if(30===c.mode)break;if(0===c.lens[256]){a.msg="invalid code -- missing end-of-block";c.mode=30;break}c.lenbits=9;p={bits:c.lenbits};w=ac(1,c.lens,0,c.nlen,c.lencode,0,c.work,p);c.lenbits=p.bits;if(w){a.msg="invalid literal/lengths set";c.mode=30;break}c.distbits=6;c.distcode=c.distdyn;p={bits:c.distbits};w=ac(2,c.lens,c.nlen,c.ndist,c.distcode,0,c.work,p);c.distbits=p.bits;if(w){a.msg="invalid distances set";c.mode=30;break}c.mode=20;if(6===b)break a;case 20:c.mode=21;case 21:if(6<=h&&258<=l){a.next_out=
g;a.avail_out=l;a.next_in=f;a.avail_in=h;c.hold=k;c.bits=m;var O,D,u,ja,fa,W,F,H,y,A,E=a;A=E.state;y=E.next_in;e=E.input;H=y+(E.avail_in-5);F=E.next_out;d=E.output;W=F-(t-E.avail_out);fa=F+(E.avail_out-257);ja=A.dmax;B=A.wsize;x=A.whave;z=A.wnext;v=A.window;q=A.hold;p=A.bits;m=A.lencode;k=A.distcode;l=(1<<A.lenbits)-1;h=(1<<A.distbits)-1;b:do c:for(15>p&&(q+=e[y++]<<p,p+=8,q+=e[y++]<<p,p+=8),O=m[q&l];;){g=O>>>24;q>>>=g;p-=g;g=O>>>16&255;if(0===g)d[F++]=O&65535;else if(g&16){f=O&65535;if(g&=15)p<g&&
(q+=e[y++]<<p,p+=8),f+=q&(1<<g)-1,q>>>=g,p-=g;15>p&&(q+=e[y++]<<p,p+=8,q+=e[y++]<<p,p+=8);O=k[q&h];d:for(;;){g=O>>>24;q>>>=g;p-=g;g=O>>>16&255;if(g&16){u=O&65535;g&=15;p<g&&(q+=e[y++]<<p,p+=8,p<g&&(q+=e[y++]<<p,p+=8));u+=q&(1<<g)-1;if(u>ja){E.msg="invalid distance too far back";A.mode=30;break b}q>>>=g;p-=g;g=F-W;if(u>g){g=u-g;if(g>x&&A.sane){E.msg="invalid distance too far back";A.mode=30;break b}D=0;O=v;if(0===z){if(D+=B-g,g<f){f-=g;do d[F++]=v[D++];while(--g);D=F-u;O=d}}else if(z<g){if(D+=B+z-
g,g-=z,g<f){f-=g;do d[F++]=v[D++];while(--g);D=0;if(z<f){g=z;f-=g;do d[F++]=v[D++];while(--g);D=F-u;O=d}}}else if(D+=z-g,g<f){f-=g;do d[F++]=v[D++];while(--g);D=F-u;O=d}for(;2<f;)d[F++]=O[D++],d[F++]=O[D++],d[F++]=O[D++],f-=3;f&&(d[F++]=O[D++],1<f&&(d[F++]=O[D++]))}else{D=F-u;do d[F++]=d[D++],d[F++]=d[D++],d[F++]=d[D++],f-=3;while(2<f);f&&(d[F++]=d[D++],1<f&&(d[F++]=d[D++]))}}else if(0===(g&64)){O=k[(O&65535)+(q&(1<<g)-1)];continue d}else{E.msg="invalid distance code";A.mode=30;break b}break}}else if(0===
(g&64)){O=m[(O&65535)+(q&(1<<g)-1)];continue c}else{g&32?A.mode=12:(E.msg="invalid literal/length code",A.mode=30);break b}break}while(y<H&&F<fa);f=p>>3;y-=f;p-=f<<3;E.next_in=y;E.next_out=F;E.avail_in=y<H?5+(H-y):5-(y-H);E.avail_out=F<fa?257+(fa-F):257-(F-fa);A.hold=q&(1<<p)-1;A.bits=p;g=a.next_out;e=a.output;l=a.avail_out;f=a.next_in;d=a.input;h=a.avail_in;k=c.hold;m=c.bits;12===c.mode&&(c.back=-1);break}for(c.back=0;;){B=c.lencode[k&(1<<c.lenbits)-1];p=B>>>24;q=B>>>16&255;B&=65535;if(p<=m)break;
if(0===h)break a;h--;k+=d[f++]<<m;m+=8}if(q&&0===(q&240)){v=p;z=q;for(x=B;;){B=c.lencode[x+((k&(1<<v+z)-1)>>v)];p=B>>>24;q=B>>>16&255;B&=65535;if(v+p<=m)break;if(0===h)break a;h--;k+=d[f++]<<m;m+=8}k>>>=v;m-=v;c.back+=v}k>>>=p;m-=p;c.back+=p;c.length=B;if(0===q){c.mode=26;break}if(q&32){c.back=-1;c.mode=12;break}if(q&64){a.msg="invalid literal/length code";c.mode=30;break}c.extra=q&15;c.mode=22;case 22:if(c.extra){for(q=c.extra;m<q;){if(0===h)break a;h--;k+=d[f++]<<m;m+=8}c.length+=k&(1<<c.extra)-
1;k>>>=c.extra;m-=c.extra;c.back+=c.extra}c.was=c.length;c.mode=23;case 23:for(;;){B=c.distcode[k&(1<<c.distbits)-1];p=B>>>24;q=B>>>16&255;B&=65535;if(p<=m)break;if(0===h)break a;h--;k+=d[f++]<<m;m+=8}if(0===(q&240)){v=p;z=q;for(x=B;;){B=c.distcode[x+((k&(1<<v+z)-1)>>v)];p=B>>>24;q=B>>>16&255;B&=65535;if(v+p<=m)break;if(0===h)break a;h--;k+=d[f++]<<m;m+=8}k>>>=v;m-=v;c.back+=v}k>>>=p;m-=p;c.back+=p;if(q&64){a.msg="invalid distance code";c.mode=30;break}c.offset=B;c.extra=q&15;c.mode=24;case 24:if(c.extra){for(q=
c.extra;m<q;){if(0===h)break a;h--;k+=d[f++]<<m;m+=8}c.offset+=k&(1<<c.extra)-1;k>>>=c.extra;m-=c.extra;c.back+=c.extra}if(c.offset>c.dmax){a.msg="invalid distance too far back";c.mode=30;break}c.mode=25;case 25:if(0===l)break a;p=t-l;if(c.offset>p){p=c.offset-p;if(p>c.whave&&c.sane){a.msg="invalid distance too far back";c.mode=30;break}p>c.wnext?(p-=c.wnext,q=c.wsize-p):q=c.wnext-p;p>c.length&&(p=c.length);v=c.window}else v=e,q=g-c.offset,p=c.length;p>l&&(p=l);l-=p;c.length-=p;do e[g++]=v[q++];while(--p);
0===c.length&&(c.mode=21);break;case 26:if(0===l)break a;e[g++]=c.length;l--;c.mode=21;break;case 27:if(c.wrap){for(;32>m;){if(0===h)break a;h--;k|=d[f++]<<m;m+=8}t-=l;a.total_out+=t;c.total+=t;t&&(a.adler=c.check=c.flags?ea(c.check,e,t,g-t):Mb(c.check,e,t,g-t));t=l;if((c.flags?k:He(k))!==c.check){a.msg="incorrect data check";c.mode=30;break}m=k=0}c.mode=28;case 28:if(c.wrap&&c.flags){for(;32>m;){if(0===h)break a;h--;k+=d[f++]<<m;m+=8}if(k!==(c.total&4294967295)){a.msg="incorrect length check";c.mode=
30;break}m=k=0}c.mode=29;case 29:w=1;break a;case 30:w=-3;break a;case 31:return-4;default:return-2}a.next_out=g;a.avail_out=l;a.next_in=f;a.avail_in=h;c.hold=k;c.bits=m;if((c.wsize||t!==a.avail_out&&30>c.mode&&(27>c.mode||4!==b))&&Me(a,a.output,a.next_out,t-a.avail_out))return c.mode=31,-4;r-=a.avail_in;t-=a.avail_out;a.total_in+=r;a.total_out+=t;c.total+=t;c.wrap&&t&&(a.adler=c.check=c.flags?ea(c.check,e,t,a.next_out-t):Mb(c.check,e,t,a.next_out-t));a.data_type=c.bits+(c.last?64:0)+(12===c.mode?
128:0)+(20===c.mode||15===c.mode?256:0);(0===r&&0===t||4===b)&&0===w&&(w=-5);return w},inflateEnd:function(a){if(!a||!a.state)return-2;var b=a.state;b.window&&(b.window=null);a.state=null;return 0},inflateGetHeader:function(a,b){if(!a||!a.state)return-2;a=a.state;if(0===(a.wrap&2))return-2;a.head=b;b.done=!1;return 0},inflateSetDictionary:function(a,b){var c=b.length,d,e;if(!a||!a.state)return-2;d=a.state;if(0!==d.wrap&&11!==d.mode)return-2;if(11===d.mode&&(e=Mb(1,b,c,0),e!==d.check))return-3;if(Me(a,
b,c,c))return d.mode=31,-4;d.havedict=1;return 0},inflateInfo:"pako inflate (from Nodeca project)"},Y={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Ag=function(){this.os=
this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=this.name="";this.hcrc=0;this.done=!1},Wf=Object.prototype.toString;mb.prototype.push=function(a,b){var c=this.strm,d=this.options.chunkSize,e=this.options.dictionary,f,g,h,l=!1;if(this.ended)return!1;b=b===~~b?b:!0===b?Y.Z_FINISH:Y.Z_NO_FLUSH;"string"===typeof a?c.input=lb.binstring2buf(a):"[object ArrayBuffer]"===Wf.call(a)?c.input=new Uint8Array(a):c.input=a;c.next_in=0;c.avail_in=c.input.length;do{0===c.avail_out&&
(c.output=new L.Buf8(d),c.next_out=0,c.avail_out=d);a=Ob.inflate(c,Y.Z_NO_FLUSH);a===Y.Z_NEED_DICT&&e&&(a="string"===typeof e?lb.string2buf(e):"[object ArrayBuffer]"===Wf.call(e)?new Uint8Array(e):e,a=Ob.inflateSetDictionary(this.strm,a));a===Y.Z_BUF_ERROR&&!0===l&&(a=Y.Z_OK,l=!1);if(a!==Y.Z_STREAM_END&&a!==Y.Z_OK)return this.onEnd(a),this.ended=!0,!1;if(c.next_out&&(0===c.avail_out||a===Y.Z_STREAM_END||0===c.avail_in&&(b===Y.Z_FINISH||b===Y.Z_SYNC_FLUSH)))if("string"===this.options.to)f=lb.utf8border(c.output,
c.next_out),g=c.next_out-f,h=lb.buf2string(c.output,f),c.next_out=g,c.avail_out=d-g,g&&L.arraySet(c.output,c.output,f,g,0),this.onData(h);else this.onData(L.shrinkBuf(c.output,c.next_out));0===c.avail_in&&0===c.avail_out&&(l=!0)}while((0<c.avail_in||0===c.avail_out)&&a!==Y.Z_STREAM_END);a===Y.Z_STREAM_END&&(b=Y.Z_FINISH);if(b===Y.Z_FINISH)return a=Ob.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===Y.Z_OK;b===Y.Z_SYNC_FLUSH&&(this.onEnd(Y.Z_OK),c.avail_out=0);return!0};mb.prototype.onData=function(a){this.chunks.push(a)};
mb.prototype.onEnd=function(a){a===Y.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):L.flattenChunks(this.chunks));this.chunks=[];this.err=a;this.msg=this.strm.msg};var Xf={Inflate:mb,inflate:$c,inflateRaw:function(a,b){b=b||{};b.raw=!0;return $c(a,b)},ungzip:$c},qh=L.assign,Ca={};qh(Ca,lh,Xf,Y);var bc=function(){var a;a=A.call(this)||this;a._outputCounter=0;a.setMetadata("filenames",{});a.setMetadata("checksums",{});return a};$jscomp.inherits(bc,A);bc.prototype._run=function(){var a=
this;this._outputCounter=0;this.getInputCategories().forEach(function(b){a._loadFile(b)})};bc.prototype._loadFile=function(a){var b=this,c=new FileReader;c.onloadend=function(c){c=c.target.result;var d=b._getInput(a).name.split(/[\\/]/).pop(),f=d.split(".").pop(),g=Pf(c);b._metadata.filenames[a]=d;b._metadata.checksums[a]=g;if(f.localeCompare("pixp"))try{c=Ca.inflate(c).buffer,console.log("File was un-gziped successfully")}catch(h){console.log("Pako: "+h+" (this content is not gziped)")}b._output[a]=
c;b._fileLoadCount()};c.onerror=function(){this._output[a]=null;b._fileLoadCount();console.warn("error reading file from category "+a)};c.readAsArrayBuffer(this._getInput(a))};bc.prototype._fileLoadCount=function(){this._outputCounter++;this._outputCounter==this.getNumberOfInputs()&&this.triggerEvent("ready")};var Cc=function(){var a;a=A.call(this)||this;a._outputCounter=0;a.setMetadata("filenames",{});a.setMetadata("checksums",{});return a};$jscomp.inherits(Cc,A);Cc.prototype._run=function(){var a=
this;this.getNumberOfInputs()?this._forEachInput(function(b,c){a._loadUrl(b,c)}):console.warn("No input was specified, cannot run this filer.")};Cc.prototype._loadUrl=function(a,b){var c=this,d=new XMLHttpRequest;d.open("GET",b,!0);d.responseType="arraybuffer";d.onload=function(e){e=d.response;var f=b.split(/[\\/]/).pop(),g=f.split(".").pop(),h=Pf(e);c._metadata.filenames[a]=f;c._metadata.checksums[a]=h;if(g.localeCompare("pixp"))try{e=Ca.inflate(e).buffer,console.log("File was un-gziped successfully")}catch(l){console.log("Pako: "+
l+" (this content is not gziped)")}c._output[a]=e;c._outputCounter++;c._outputCounter==c.getNumberOfInputs()&&c.triggerEvent("ready")};d.error=function(){console.log("here go the error")};d.send()};var Yf=va(function(a){var b=b||function(a){if(!("undefined"===typeof a||"undefined"!==typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var b=a.document.createElementNS("http://www.w3.org/1999/xhtml","a"),c="download"in b,f=/constructor/i.test(a.HTMLElement)||a.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent),
h=function(b){(a.setImmediate||a.setTimeout)(function(){throw b;},0)},l=function(b){setTimeout(function(){"string"===typeof b?(a.URL||a.webkitURL||a).revokeObjectURL(b):b.remove()},4E4)},k=function(a){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a},m=function(d,e,m){m||(d=k(d));var r=this,t="application/octet-stream"===d.type,p,q=function(){for(var a=["writestart","progress","write","writeend"],
a=[].concat(a),b=a.length;b--;){var c=r["on"+a[b]];if("function"===typeof c)try{c.call(r,r)}catch(O){h(O)}}};r.readyState=r.INIT;c?(p=(a.URL||a.webkitURL||a).createObjectURL(d),setTimeout(function(){b.href=p;b.download=e;var a=new MouseEvent("click");b.dispatchEvent(a);q();l(p);r.readyState=r.DONE})):function(){if((g||t&&f)&&a.FileReader){var b=new FileReader;b.onloadend=function(){var c=g?b.result:b.result.replace(/^data:[^;]*;/,"data:attachment/file;");a.open(c,"_blank")||(a.location.href=c);r.readyState=
r.DONE;q()};b.readAsDataURL(d);r.readyState=r.INIT}else p||(p=(a.URL||a.webkitURL||a).createObjectURL(d)),t?a.location.href=p:a.open(p,"_blank")||(a.location.href=p),r.readyState=r.DONE,q(),l(p)}()},r=m.prototype;if("undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob)return function(a,b,c){b=b||a.name||"download";c||(a=k(a));return navigator.msSaveOrOpenBlob(a,b)};r.abort=function(){};r.readyState=r.INIT=0;r.WRITING=1;r.DONE=2;r.error=r.onwritestart=r.onprogress=r.onwrite=r.onabort=r.onerror=
r.onwriteend=null;return function(a,b,c){return new m(a,b||a.name||"download",c)}}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||pb.content);a.exports&&(a.exports.saveAs=b)}),sd=function(){var a;a=A.call(this)||this;a.addInputValidator(0,ArrayBuffer);a.setMetadata("filename",null);return a};$jscomp.inherits(sd,A);sd.prototype._run=function(){if(this.hasValidInput()){var a=this.getMetadata("filename");if(a){var b=new Blob([this._getInput()],{type:"application/octet-binary"});
Yf.saveAs(b,a)}else console.warn("A filename must be specified. Use the method `.setMetadata('filename', 'theFile.ext')` on this filter.")}else console.warn("BrowserDownloadBuffer uses only ArrayBuffer.")};var I=function(){var a;a=A.call(this)||this;a.addInputValidator(0,ArrayBuffer);a.setMetadata("debug",!1);a._type_enum={INT8:1,UINT8:2,INT16:3,UINT16:4,INT32:5,UINT32:6,FLT:7,DBL:8,STR:9};a._type_matching="int8 uint8 int16 uint16 int32 uint32 float32 float64 undef".split(" ");a.type_sizes=[0,1,1,
2,2,4,4,4,8,0];a._dv_offset=0;a._align=8;a._little_endian=!0;a._continuation_queue=[];a._dv=null;a._superblk={};a._start_offset=0;a._huge_id=0;return a};$jscomp.inherits(I,A);I.prototype.createLink=function(){return{hdr_offset:0,data_offset:0,data_length:0,n_filled:0,chunk_size:0,sym_btree:0,sym_lheap:0,name:"",attributes:{},children:[],array:void 0,type:-1,inflate:!1,dims:[]}};I.prototype.startAlignment=function(){this._start_offset=this._dv_offset};I.prototype.checkAlignment=function(){var a=this._dv_offset-
this._start_offset;if(0!==a%this._align){var b=this._align-a%this._align;this._dv_offset+=b;this.getMetadata("debug")&&console.log("skipping "+b+" bytes at "+a+" for alignmnent")}};I.prototype.skip=function(a){this._dv_offset+=a};I.prototype.seek=function(a){this._dv_offset=a};I.prototype.tell=function(){return this._dv_offset};I.prototype.getU8=function(){var a=this._dv.getUint8(this._dv_offset);this._dv_offset+=1;return a};I.prototype.getU16=function(){var a=this._dv.getUint16(this._dv_offset,this._little_endian);
this._dv_offset+=2;return a};I.prototype.getU32=function(){var a=this._dv.getUint32(this._dv_offset,this._little_endian);this._dv_offset+=4;return a};I.prototype.getU64=function(){var a=this._dv.getUint64(this._dv_offset,this._little_endian);this._dv_offset+=8;return a};I.prototype.getF32=function(){var a=this._dv.getFloat32(this._dv_offset,this._little_endian);this._dv_offset+=4;return a};I.prototype.getF64=function(){var a=this._dv.getFloat64(this._dv_offset,this._little_endian);this._dv_offset+=
8;return a};I.prototype.getOffset=function(a){var b;a=a||this._superblk.offsz;if(4===a)b=this._dv.getUint32(this._dv_offset,this._little_endian);else if(8===a)b=this._dv.getUint64(this._dv_offset,this._little_endian);else throw Error("Unsupported value for offset size "+a);this._dv_offset+=a;return b};I.prototype.getLength=function(){var a=this._dv.getUint64(this._dv_offset,this._little_endian);this._dv_offset+=this._superblk.lensz;return a};I.prototype.getString=function(a){var b="",c,d;for(c=0;c<
a;c+=1){d=this.getU8();if(0===d){this._dv_offset+=a-c-1;break}b+=String.fromCharCode(d)}return b};I.prototype.getArray=function(a,b,c){var d=this._getInput(),e=this._dv_offset;c&&(this._dv_offset=c);switch(a){case this._type_enum.INT8:a=new Int8Array(d,this._dv_offset,b);break;case this._type_enum.UINT8:a=new Uint8Array(d,this._dv_offset,b);break;case this._type_enum.INT16:if(0!==this._dv_offset%2)for(a=new ArrayBuffer(b),b/=2,a=new Int16Array(a),d=0;d<b;d+=1)a[d]=this.getU16();else a=new Int16Array(d,
this._dv_offset,b/2),this._dv_offset+=b;break;case this._type_enum.UINT16:if(0!==this._dv_offset%2)for(a=new ArrayBuffer(b),b/=2,a=new Uint16Array(a),d=0;d<b;d+=1)a[d]=this.getU16();else a=new Uint16Array(d,this._dv_offset,b/2),this._dv_offset+=b;break;case this._type_enum.INT32:if(0!==this._dv_offset%4)for(a=new ArrayBuffer(b),b/=4,a=new Int32Array(a),d=0;d<b;d+=1)a[d]=this.getU32();else a=new Int32Array(d,this._dv_offset,b/4),this._dv_offset+=b;break;case this._type_enum.UINT32:if(0!==this._dv_offset%
4)for(a=new ArrayBuffer(b),b/=4,a=new Uint32Array(a),d=0;d<b;d+=1)a[d]=this.getU32();else a=new Uint32Array(d,this._dv_offset,b/4),this._dv_offset+=b;break;case this._type_enum.FLT:if(0!==this._dv_offset%4)for(a=new ArrayBuffer(b),b/=4,a=new Float32Array(a),d=0;d<b;d+=1)a[d]=this.getF32();else a=new Float32Array(d,this._dv_offset,b/4),this._dv_offset+=b;break;case this._type_enum.DBL:if(0!==this._dv_offset%8)for(a=new ArrayBuffer(b),b/=8,a=new Float64Array(a),d=0;d<b;d+=1)a[d]=this.getF64();else a=
new Float64Array(d,this._dv_offset,b/8),this._dv_offset+=b;break;default:throw Error("Bad type in this.getArray "+a);}c&&(this._dv_offset=e);return a};I.prototype.getUXX=function(a){var b,c;switch(a){case 1:b=this._dv.getUint8(this._dv_offset);break;case 2:b=this._dv.getUint16(this._dv_offset,this._little_endian);break;case 4:b=this._dv.getUint32(this._dv_offset,this._little_endian);break;case 8:b=this._dv.getUint64(this._dv_offset,this._little_endian);break;default:if(b=0,this._little_endian)for(c=
a-1;0<=c;c--)b=(b<<8)+this._dv.getUint8(this._dv_offset+c);else for(c=0;c<a;c++)b=(b<<8)+this._dv.getUint8(this._dv_offset+c)}this._dv_offset+=a;return b};I.prototype.checkSignature=function(a){var b;for(b=0;b<a.length;b+=1)if(this._dv.getUint8(this._dv_offset+b)!==a.charCodeAt(b))return!1;this.skip(a.length);return!0};I.prototype.hdf5Superblock=function(){var a={};if(!this.checkSignature("\u0089HDF\r\n\u001a\n"))throw Error("Bad magic string in HDF5");a.sbver=this.getU8();if(2<a.sbver)throw Error("Unsupported HDF5 superblock version "+
a.sbver);1>=a.sbver?(a.fsver=this.getU8(),a.rgver=this.getU8(),this.skip(1),a.shver=this.getU8(),a.offsz=this.getU8(),a.lensz=this.getU8(),this.skip(1),a.gln_k=this.getU16(),a.gin_k=this.getU16(),a.cflags=this.getU32(),1===a.sbver&&(a.isin_k=this.getU16(),this.skip(2)),a.base_addr=this.getOffset(a.offsz),a.gfsi_addr=this.getOffset(a.offsz),a.eof_addr=this.getOffset(a.offsz),a.dib_addr=this.getOffset(a.offsz),a.root_ln_offs=this.getOffset(a.offsz),a.root_addr=this.getOffset(a.offsz),a.root_cache_type=
this.getU32(),this.skip(4),this.skip(16)):(a.offsz=this.getU8(),a.lensz=this.getU8(),a.cflags=this.getU8(),a.base_addr=this.getOffset(a.offsz),a.ext_addr=this.getOffset(a.offsz),a.eof_addr=this.getOffset(a.offsz),a.root_addr=this.getOffset(a.offsz),a.checksum=this.getU32());this.getMetadata("debug")&&console.log("HDF5 SB "+a.sbver+" "+a.offsz+" "+a.lensz+" "+a.cflags);return a};I.prototype.hdf5FractalHeapHeader=function(){var a={};if(!this.checkSignature("FRHP"))throw Error("Bad or missing FRHP signature");
a.ver=this.getU8();a.idlen=this.getU16();a.iof_el=this.getU16();a.flags=this.getU8();a.objmax=this.getU32();a.objnid=this.getLength();a.objbta=this.getOffset();a.nf_blk=this.getLength();a.af_blk=this.getOffset();a.heap_total=this.getLength();a.heap_alloc=this.getLength();a.bai_offset=this.getLength();a.heap_nobj=this.getLength();a.heap_chuge=this.getLength();a.heap_nhuge=this.getLength();a.heap_ctiny=this.getLength();a.heap_ntiny=this.getLength();a.table_width=this.getU16();a.start_blksz=this.getLength();
a.max_blksz=this.getLength();a.max_heapsz=this.getU16();a.rib_srows=this.getU16();a.root_addr=this.getOffset();a.rib_crows=this.getU16();var b=Math.log2(a.max_blksz)-Math.log2(a.start_blksz)+2;a.K=Math.min(a.rib_crows,b)*a.table_width;a.N=a.rib_crows<b?0:a.K-b*a.table_width;this.getMetadata("debug")&&(console.log("FRHP V"+a.ver+" F"+a.flags+" "+a.objbta+" Total:"+a.heap_total+" Alloc:"+a.heap_alloc+" #obj:"+a.heap_nobj+" width:"+a.table_width+" start_blksz:"+a.start_blksz+" max_blksz:"+a.max_blksz+
" "+a.max_heapsz+" srows:"+a.rib_srows+" crows:"+a.rib_crows+" "+a.heap_nhuge),console.log("   K: "+a.K+" N: "+a.N));if(0<a.iof_el)throw Error("Filters present in fractal heap.");return a};I.prototype.hdf5V2BtreeHeader=function(){var a={};if(!this.checkSignature("BTHD"))throw Error("Bad or missing BTHD signature");a.ver=this.getU8();a.type=this.getU8();a.nodesz=this.getU32();a.recsz=this.getU16();a.depth=this.getU16();a.splitp=this.getU8();a.mergep=this.getU8();a.root_addr=this.getOffset();a.root_nrec=
this.getU16();a.total_nrec=this.getLength();a.checksum=this.getU32();this.getMetadata("debug")&&console.log("BTHD V"+a.ver+" T"+a.type+" "+a.nodesz+" "+a.recsz+" "+a.depth+" "+a.root_addr+" "+a.root_nrec+" "+a.total_nrec);return a};I.prototype.hdf5V2BtreeRecords=function(a,b,c,d){var e,f,g;if(1===b)for(b=0;b<c;b++)f=this.getOffset(),g=this.getLength(),a=this.getLength(),this.getMetadata("debug")&&console.log("  -> "+f+" "+g+" "+a+" "+this._this._huge_id),e=this.tell(),a===this._this._huge_id&&(this.seek(f),
this.hdf5MsgAttribute(g,d)),this.seek(e);else if(8===b){var h,l;h=a.max_heapsz/8;b=Math.min(a.objmax,a.max_blksz);l=256>=b?1:65536>=b?2:4;for(b=0;b<c;b++){e=this.getU8();if(0!==(e&192))throw Error("Bad Fractal Heap ID version "+e);var k=e&48,m;if(16===k)this._this._huge_id=this.getUXX(7);else if(0===k)f=this.getUXX(h),g=this.getUXX(l);else throw Error("Can't handle this Heap ID: "+e);m=this.getU8();this.getU32();this.getU32();this.getMetadata("debug")&&console.log("  -> "+e+" "+f+" "+g+" "+m);e=this.tell();
if(16===k)if(this.seek(a.objbta),k=this.hdf5V2BtreeHeader(),1===k.type)this.seek(k.root_addr),this.hdf5V2BtreeLeafNode(a,k.root_nrec,d);else throw Error("Can only handle type-1 btrees");else k=this.hdf5FractalHeapOffset(a,f),this.seek(k),this.hdf5MsgAttribute(g,d);this.seek(e)}}else throw Error("Unhandled V2 btree type.");};I.prototype.hdf5V2BtreeLeafNode=function(a,b,c){if(!this.checkSignature("BTLF"))throw Error("Bad or missing BTLF signature");var d=this.getU8(),e=this.getU8();this.getMetadata("debug")&&
console.log("BTLF V"+d+" T"+e+" "+this.tell());this.hdf5V2BtreeRecords(a,e,b,c)};I.prototype.hdf5V2BtreeInternalNode=function(a,b,c,d){if(!this.checkSignature("BTIN"))throw Error("Bad or missing BTIN signature");var e=this.getU8(),f=this.getU8();this.getMetadata("debug")&&console.log("BTIN V"+e+" T"+f);this.hdf5V2BtreeRecords(a,f,b,d);for(a=0;a<=b;a++){d=this.getOffset();var e=this.getUXX(1),g;1<c&&(g=this.getUXX(1));this.getMetadata("debug")&&console.log(" child->"+d+" "+e+" "+g)}};I.prototype.hdf5GetMsgName=
function(a){var b="NIL;Dataspace;LinkInfo;Datatype;FillValue 1;FillValue 2;Link;ExternalFiles;Layout;BOGUS;GroupInfo;FilterPipeline;Attribute;ObjectComment;ObjectModTime 1;SharedMsgTable;ObjHdrContinue;SymbolTable;ObjectModTime 2;BtreeKValue;DriverInfo;AttrInfo;ObjectRefCnt;MESSAGE23;FileSpaceInfo".split(";");if(a<b.length)return b[a];throw Error("Unknown message type "+a+" "+this.tell());};I.prototype.hdf5V1BtreeNode=function(a){var b=this._getInput(),c,d={};if(!this.checkSignature("TREE"))throw Error("Bad TREE signature at "+
this.tell());d.keys=[];d.node_type=this.getU8();d.node_level=this.getU8();d.entries_used=this.getU16();d.left_sibling=this.getOffset();d.right_sibling=this.getOffset();this.getMetadata("debug")&&console.log("BTREE type "+d.node_type+" lvl "+d.node_level+" n_used "+d.entries_used+" "+d.left_sibling+" "+d.right_sibling);if(a){var e,f=[];for(c=0;c<d.entries_used;c+=1){d.keys[c]={};f[c]={};f[c].chunk_size=this.getU32();f[c].filter_mask=this.getU32();f[c].chunk_offsets=[];for(e=0;e<a.dims.length+1;e+=
1)f[c].chunk_offsets.push(this.getU64());d.keys[c].child_address=this.getOffset();c<d.entries_used&&this.getMetadata("debug")&&console.log("  BTREE "+c+" chunk_size "+f[c].chunk_size+" filter_mask "+f[c].filter_mask+" addr "+d.keys[c].child_address)}f[c]={};f[c].chunk_size=this.getU32();f[c].filter_mask=this.getU32();f[c].chunk_offsets=[];for(e=0;e<a.dims.length+1;e+=1)f[c].chunk_offsets.push(this.getU64());if(0===d.node_level){var g;for(c=0;c<d.entries_used;c+=1)if(e=f[c].chunk_size,g=d.keys[c].child_address,
a.inflate){e=new Uint8Array(b,g,e);g=Ca.inflate(e);switch(a.type){case this._type_enum.INT8:g=new Int8Array(g.buffer);break;case this._type_enum.UINT8:g=new Uint8Array(g.buffer);break;case this._type_enum.INT16:g=new Int16Array(g.buffer);break;case this._type_enum.UINT16:g=new Uint16Array(g.buffer);break;case this._type_enum.INT32:g=new Int32Array(g.buffer);break;case this._type_enum.UINT32:g=new Uint32Array(g.buffer);break;case this._type_enum.FLT:g=new Float32Array(g.buffer);break;case this._type_enum.DBL:g=
new Float64Array(g.buffer);break;default:throw Error("Unknown type code "+a.type);}a.array.length-a.n_filled<g.length&&(g=g.subarray(0,a.array.length-a.n_filled));a.array.set(g,a.n_filled);a.n_filled+=g.length;this.getMetadata("debug")&&console.log(a.name+" "+e.length+" "+g.length+" "+a.n_filled+"/"+a.array.length)}else g=this.getArray(a.type,e,g),a.array.set(g,a.n_filled),a.n_filled+=g.length}else for(c=0;c<d.entries_used;c+=1)this.seek(d.keys[c].child_address),this.hdf5V1BtreeNode(a)}else for(c=
0;c<d.entries_used;c+=1)d.keys[c]={},d.keys[c].key_value=this.getLength(),d.keys[c].child_address=this.getOffset(),this.getMetadata("debug")&&console.log("  BTREE "+c+" key "+d.keys[c].key_value+" adr "+d.keys[c].child_address);return d};I.prototype.hdf5GroupSymbolTable=function(a,b){if(!this.checkSignature("SNOD"))throw Error("Bad or missing SNOD signature");var c=this.getU8();this.skip(1);var d=this.getU16();this.getMetadata("debug")&&console.log("this.hdf5GroupSymbolTable V"+c+" #"+d+" '"+b.name+
"'");for(var e,f,g,h,l,c=0;c<2*this._superblk.gln_k;c+=1)e=this.getOffset(),f=this.getOffset(),g=this.getU32(),this.skip(20),c<d&&(h=this.createLink(),h.hdr_offset=f,a&&(l=this.tell(),this.seek(a.lh_dseg_off+e),h.name=this.getString(a.lh_dseg_len),this.seek(l)),this.getMetadata("debug")&&console.log("    "+c+" O "+e+" A "+f+" T "+g+" '"+h.name+"'"),b.children.push(h))};I.prototype.hdf5LocalHeap=function(){var a={};if(!this.checkSignature("HEAP"))throw Error("Bad or missing HEAP signature");a.lh_ver=
this.getU8();this.skip(3);a.lh_dseg_len=this.getLength();a.lh_flst_len=this.getLength();a.lh_dseg_off=this.getOffset();this.getMetadata("debug")&&console.log("LHEAP V"+a.lh_ver+" "+a.lh_dseg_len+" "+a.lh_flst_len+" "+a.lh_dseg_off);return a};I.prototype.hdf5MsgDataspace=function(a,b){var c,d=this.getU8(),e=this.getU8(),f=this.getU8();1>=d?this.skip(5):this.skip(1);var g=1,h=[],l;for(l=0;l<e;l+=1)h[l]=this.getLength(),g*=h[l];c=e*this._superblk.lensz+(1>=d?8:4);if(0!==(f&1))for(c+=e*this._superblk.lensz,
l=0;l<e;l+=1)this.getLength();if(0!==(f&2))for(c+=e*this._superblk.lensz,l=0;l<e;l+=1)this.getLength();d="this.hdf5MsgDataspace V"+d+" N"+e+" F"+f;this.getMetadata("debug")&&(0!==e&&(d+="["+h.join(", ")+"]"),console.log(d));c<a&&this.skip(a-c);b&&(b.dims=h);return g};I.prototype.hdf5MsgLinkInfo=function(a){var b=this,c=this.getU8(),d=this.getU8();0!==(d&1)&&this.getU64();var e=this.getOffset(),f=this.getOffset();0!==(d&2)&&this.getOffset();this.getMetadata("debug")&&console.log("this.hdf5MsgLinkInfo V"+
c+" F"+d+" FH "+e+" BT "+f);c=this.tell();if(e<this._superblk.eof_addr){this.seek(e);var g=this.hdf5FractalHeapHeader(),h=0;this.hdf5FractalHeapEnumerate(g,function(c,d,f,e){for(c=d+e;h<g.heap_nobj&&b.tell()<c;)b.hdf5MsgLink(a),h+=1;return!0})}this.seek(c)};I.prototype.dt_class_name=function(a){var b="Fixed-Point Floating-Point Time String BitField Opaque Compound Reference Enumerated Variable-Length Array".split(" ");if(a<b.length)return b[a];throw Error("Unknown datatype class: "+a);};I.prototype.hdf5MsgDatatype=
function(a){var b={},c=8,d,e,f,g,h,l,k,m,r=this.getU8();d=r>>4;e=r&15;g=[];for(r=0;3>r;r+=1)g[r]=this.getU8();r=this.getU32();this.getMetadata("debug")&&console.log("this.hdf5MsgDatatype V"+d+" C"+e+" "+this.dt_class_name(e)+" "+g[0]+"."+g[1]+"."+g[2]+" "+r);switch(e){case 0:e=this.getU16();f=this.getU16();switch(r){case 4:b.typ_type=g[0]&8?this._type_enum.INT32:this._type_enum.UINT32;break;case 2:b.typ_type=g[0]&8?this._type_enum.INT16:this._type_enum.UINT16;break;case 1:b.typ_type=g[0]&8?this._type_enum.INT8:
this._type_enum.UINT8;break;default:throw Error("Unknown type size "+r);}b.typ_length=r;c+=4;this.getMetadata("debug")&&console.log("  ("+e+" "+f+")");break;case 1:d="";if(this.getMetadata("debug"))switch(g[0]&65){case 0:d+="LE ";break;case 1:d+="BE ";break;case 65:d+="VX ";break;default:throw Error("Reserved fp byte order: "+g[0]);}e=this.getU16();f=this.getU16();g=this.getU8();h=this.getU8();l=this.getU8();k=this.getU8();m=this.getU32();this.getMetadata("debug")&&(d+=e+" "+f+" "+g+" "+h+" "+l+" "+
k+" "+m);if(64===f&&0===e&&52===g&&11===h&&0===l&&52===k&&1023===m&&8===r)b.typ_type=this._type_enum.DBL;else if(32===f&&0===e&&23===g&&8===h&&0===l&&23===k&&127===m&&4===r)b.typ_type=this._type_enum.FLT;else throw Error("Unsupported floating-point type");this.getMetadata("debug")&&console.log(d);b.typ_length=r;c+=12;break;case 3:b.typ_type=this._type_enum.STR;b.typ_length=r;break;default:throw Error("Unimplemented HDF5 data class "+e);}a>c&&this.skip(a-c);return b};I.prototype.hdf5MsgLayout=function(a){var b=
"",c=this.getU8(),d,e,f,g=[];f=1;if(1===c||2===c){e=this.getU8();d=this.getU8();this.skip(5);this.getMetadata("debug")&&(b+="this.hdf5MsgLayout V"+c+" N"+e+" C"+d);if(1===d||2===d)c=this.getOffset(),this.getMetadata("debug")&&(b+=" A"+c),a.data_offset=c;for(c=0;c<e;c+=1)g[c]=this.getU32(),f*=g[c];this.getMetadata("debug")&&(b+="["+g.join(", ")+"]");2===d&&(e=this.getU32(),a.chunk_size=f*e,this.getMetadata("debug")&&(b+=" E"+e));0===d?(f=this.getU32(),this.getMetadata("debug")&&(b+="("+f+")"),a.data_offset=
this.tell(),a.data_length=f):1===d&&(a.data_length=f)}else if(3===c)if(d=this.getU8(),b="this.hdf5MsgLayout V"+c+" C"+d,0===d)f=this.getU16(),this.getMetadata("debug")&&(b+="("+f+")"),a.data_offset=this.tell(),a.data_length=f;else if(1===d)d=this.getOffset(),f=this.getLength(),this.getMetadata("debug")&&(b+="("+d+", "+f+")"),a.data_offset=d,a.data_length=f;else{if(2===d){e=this.getU8();d=this.getOffset();a.data_offset=d;a.chunk_size=1;for(c=0;c<e-1;c+=1)g[c]=this.getU32(),f*=g[c];this.getMetadata("debug")&&
(b+="(N"+e+", A"+d+" ["+g.join(",")+"]");e=this.getU32();a.chunk_size=f*e;this.getMetadata("debug")&&(b+=" E"+e)}}else throw Error("Illegal layout version "+c);this.getMetadata("debug")&&console.log(b)};I.prototype.hdf5MsgPipeline=function(a){var b=this.getU8(),c=this.getU8(),d="this.hdf5MsgPipeline V"+b+" N"+c;1===b&&this.skip(6);this.getMetadata("debug")&&console.log(d);for(var e,f,g,h,d=0;d<c;d+=1){e=this.getU16();if(1!==e)throw Error("Unimplemented HDF5 filter "+e);if("object"!==typeof Ca)throw Error("Need pako to inflate data.");
a.inflate=!0;f=1===b||256<e?this.getU16():0;g=this.getU16();h=this.getU16();0!==(h&1)&&(h+=1);0!==f&&this.skip(f);this.skip(4*h);this.getMetadata("debug")&&console.log("  "+d+" ID"+e+" F"+g+" "+h)}};I.prototype.hdf5MsgAttribute=function(a,b){var c=this.getU8(),d=this.getU8(),e=this.getU16(),f=this.getU16(),g=this.getU16(),h="this.hdf5MsgAttribute V"+c+" F"+d+" "+a+": ";if(0!==(d&3))throw Error("Shared dataspaces and datatypes are not supported.");3===c&&(d=this.getU8(),this.getMetadata("debug")&&
(h+=0===d?"ASCII":"UTF-8"));this.getMetadata("debug")&&(h+="("+e+" "+f+" "+g+")");3>c&&(e=8*Math.floor((e+7)/8),f=8*Math.floor((f+7)/8),g=8*Math.floor((g+7)/8),this.getMetadata("debug")&&(h+="/("+e+" "+f+" "+g+")"));d=this.getString(e);this.getMetadata("debug")&&console.log(h+(" Name: "+d));var h=this.hdf5MsgDatatype(f),l=this.hdf5MsgDataspace(g);a=0<a?3>c?a-(8+e+f+g):a-(9+e+f+g):h.typ_length*l;this.getMetadata("debug")&&console.log("  attribute data size "+a+" "+this.tell());a=h.typ_type===this._type_enum.STR?
this.getString(a):this.getArray(h.typ_type,a);b.attributes[d]=a};I.prototype.hdf5MsgGroupInfo=function(){var a=4,b=8,c=this.getU8(),d=this.getU8();0!==(d&1)&&(this.getU16(),this.getU16());0!==(d&2)&&(a=this.getU16(),b=this.getU16());this.getMetadata("debug")&&console.log("this.hdf5MsgGroupInfo V"+c+" F"+d+" ENT "+a+" LNL "+b)};I.prototype.hdf5MsgLink=function(a){var b=this.getU8(),c=0;if(1!==b)throw Error("Bad link message version "+b);var d=this.getU8();0!==(d&8)&&(c=this.getU8());0!==(d&4)&&this.getU64();
0!==(d&16)&&this.getU8();var e=this.getUXX(1<<(d&3)),f=this.createLink();f.name=this.getString(e);0===(d&8)&&(f.hdr_offset=this.getOffset());this.getMetadata("debug")&&console.log("this.hdf5MsgLink V"+b+" F"+d+" T"+c+" NM "+f.name+" OF "+f.hdr_offset);a.children.push(f)};I.prototype.hdf5FractalHeapDirectBlock=function(a,b,c,d){if(!this.checkSignature("FHDB"))throw Error("Bad or missing FHDB signature");var e=this.getU8();if(0!==e)throw Error("Bad FHDB version: "+e);this.getOffset();var f=this.getUXX(Math.ceil(a.max_heapsz/
8));0!==(a.flags&2)&&this.getU32();this.getMetadata("debug")&&console.log("FHDB V:"+e+" R:"+b+" O:"+f+" A:"+c);a=1>=b?a.start_blksz:Math.pow(2,b-1)*a.start_blksz;return d?d(b,c,f,a):!0};I.prototype.hdf5FractalHeapIndirectBlock=function(a,b){if(!this.checkSignature("FHIB"))throw Error("Bad or missing FHIB signature");var c=this.getU8();if(0!==c)throw Error("Bad FHIB version: "+c);this.getOffset();var d=this.getUXX(Math.ceil(a.max_heapsz/8));this.getMetadata("debug")&&console.log("FHIB V:"+c+" O:"+
d);for(var e=[],c=0;c<a.K;c+=1)d=this.getOffset(),d<this._superblk.eof_addr&&(this.getMetadata("debug")&&console.log("direct block at "+d),e.push(d));for(var f=[],c=0;c<a.N;c+=1)d=this.getOffset(),d<this._superblk.eof_addr&&(this.getMetadata("debug")&&console.log("indirect block at "+d),f.push(d));this.getU32();for(c=0;c<e.length;c++)if(this.seek(e[c]),!this.hdf5FractalHeapDirectBlock(a,c/a.table_width,e[c],b))return!1;for(c=0;c<f.length;c++)if(this.seek(f[c]),!this.hdf5FractalHeapIndirectBlock(a,
b))return!1;return!0};I.prototype.hdf5FractalHeapEnumerate=function(a,b){this.seek(a.root_addr);0===a.K?this.hdf5FractalHeapDirectBlock(a,0,a.root_addr,b):this.hdf5FractalHeapIndirectBlock(a,b)};I.prototype.hdf5FractalHeapOffset=function(a,b){var c;this.hdf5FractalHeapEnumerate(a,function(a,e,f,g){return b>=f&&b<f+g?(c=e+(b-f),!1):!0});return c};I.prototype.hdf5MsgAttrInfo=function(a){var b=this.getU8();if(0!==b)throw Error("Bad attribute information message version: "+b);var c=this.getU8();0!==(c&
1)&&this.getU16();var d=this.getOffset(),e=this.getOffset();0!==(c&2)&&this.getOffset();this.getMetadata("debug")&&console.log("this.hdf5MsgAttrInfo V"+b+" F"+c+" HP "+d+" AN "+e);var b=this.tell(),f;d<this._superblk.eof_addr&&(this.seek(d),f=this.hdf5FractalHeapHeader());if(e<this._superblk.eof_addr){this.seek(e);d=this.hdf5V2BtreeHeader();if(8!==d.type)throw Error("Can only handle indexed attributes.");this.seek(d.root_addr);0<d.depth?this.hdf5V2BtreeInternalNode(f,d.root_nrec,d.depth,a):this.hdf5V2BtreeLeafNode(f,
d.root_nrec,a)}this.seek(b)};I.prototype.hdf5ProcessMessage=function(a,b){var c={};switch(a.hm_type){case 1:this.hdf5MsgDataspace(a.hm_size,b);break;case 2:this.hdf5MsgLinkInfo(b);break;case 3:a=this.hdf5MsgDatatype(a.hm_size);b&&(b.type=a.typ_type);break;case 6:this.hdf5MsgLink(b);break;case 8:this.hdf5MsgLayout(b);break;case 10:this.hdf5MsgGroupInfo();break;case 11:this.hdf5MsgPipeline(b);break;case 12:this.hdf5MsgAttribute(a.hm_size,b);break;case 16:c.cq_off=this.getOffset();c.cq_len=this.getLength();
this._continuation_queue.push(c);this.getMetadata("debug")&&console.log("hdf5MsgObjHdrContinue "+c.cq_off+" "+c.cq_len);break;case 17:b.sym_btree=this.getOffset();b.sym_lheap=this.getOffset();this.getMetadata("debug")&&console.log("hdf5MsgSymbolTable "+b.sym_btree+" "+b.sym_lheap);break;case 21:this.hdf5MsgAttrInfo(b);break;case 0:case 4:case 5:case 7:case 18:case 19:case 20:case 22:case 24:this.skip(a.hm_size);break;default:throw Error("Unknown message type: "+a.hm_type);}};I.prototype.hdf5V2ObjectHeader=
function(a){if(!this.checkSignature("OHDR"))throw Error("Bad or missing OHDR signature");var b=this.getU8(),c=this.getU8();0!==(c&32)&&(this.getU32(),this.getU32(),this.getU32(),this.getU32());0!==(c&16)&&(this.getU16(),this.getU16());var d=this.getUXX(1<<(c&3)),e=0,f=0,g=d;for(this.getMetadata("debug")&&console.log("this.hdf5V2ObjectHeader V"+b+" F"+c+" HS"+d);;){for(;8<=g-f;)b={},b.hm_type=this.getU8(),b.hm_size=this.getU16(),b.hm_flags=this.getU8(),this.getMetadata("debug")&&console.log("  msg"+
e+" F"+b.hm_flags+" T "+b.hm_type+" S "+b.hm_size+" ("+f+"/"+g+") "+this.hdf5GetMsgName(b.hm_type)),0!==(c&4)&&(b.hm_corder=this.getU16()),d=this.tell(),this.hdf5ProcessMessage(b,a),this.seek(d+b.hm_size),f+=b.hm_size+4,e+=1;4<g-f&&this.skip(g-(f+4));this.getU32();if(0!==this._continuation_queue.length){if(b=this._continuation_queue.shift(),this.seek(b.cq_off),g=b.cq_len-4,f=0,this.getMetadata("debug")&&console.log("continuing with "+b.cq_len+" bytes at "+this.tell()),!this.checkSignature("OCHK"))throw Error("Bad v2 object continuation");
}else break}a.children.forEach(function(a,b){that.seek(a.hdr_offset);that.getMetadata("debug")&&console.log(b+" "+a.hdr_offset+" "+a.name);this.checkSignature("OHDR")?(that.seek(a.hdr_offset),that.hdf5V2ObjectHeader(a)):(that.seek(a.hdr_offset),that.hdf5V1ObjectHeader(a))})};I.prototype.loadData=function(a){var b=this;if(0!==a.chunk_size){this.seek(a.data_offset);var c=1,d;for(d=0;d<a.dims.length;d+=1)c*=a.dims[d];c*=this.typeSize(a.type);this.getMetadata("debug")&&console.log("allocating "+c+" bytes");
c=new ArrayBuffer(c);a.n_filled=0;switch(a.type){case this._type_enum.INT8:a.array=new Int8Array(c);break;case this._type_enum.UINT8:a.array=new Uint8Array(c);break;case this._type_enum.INT16:a.array=new Int16Array(c);break;case this._type_enum.UINT16:a.array=new Uint16Array(c);break;case this._type_enum.INT32:a.array=new Int32Array(c);break;case this._type_enum.UINT32:a.array=new Uint32Array(c);break;case this._type_enum.FLT:a.array=new Float32Array(c);break;case this._type_enum.DBL:a.array=new Float64Array(c);
break;default:throw Error("Illegal type: "+a.type);}this.hdf5V1BtreeNode(a)}else 0<a.data_offset&&a.data_offset<this._superblk.eof_addr?(this.getMetadata("debug")&&console.log("loading "+a.data_length+" bytes from "+a.data_offset+" to "+a.name),a.array=this.getArray(a.type,a.data_length,a.data_offset)):this.getMetadata("debug")&&console.log("data not present for /"+a.name+"/");a.children.forEach(function(a){b.loadData(a)})};I.prototype.hdf5V1ObjectHeader=function(a){var b=this,c,d,e,f;this.startAlignment();
c=this.getU8();this.skip(1);d=this.getU16();e=this.getU32();f=this.getU32();if(1!==c)throw Error("Bad v1 object header version: "+c);this.getMetadata("debug")&&console.log("this.hdf5V1ObjectHeader V"+c+" #M "+d+" RC "+e+" HS "+f);e=f;var g;for(c=0;c<d;c+=1){if(8>=e)if(0!==this._continuation_queue.length)e=this._continuation_queue.shift(),this.seek(e.cq_off),e=e.cq_len,this.getMetadata("debug")&&console.log("continuing with "+e+" bytes at "+this.tell()),this.startAlignment();else break;this.checkAlignment();
f={};f.hm_type=this.getU16();f.hm_size=this.getU16();f.hm_flags=this.getU8();if(0!==f.hm_size%8)throw Error("Size is not 8-byte aligned: "+f.hm_size);this.skip(3);e-=8+f.hm_size;this.getMetadata("debug")&&console.log("  msg"+c+" F "+f.hm_flags+" T "+f.hm_type+" S "+f.hm_size+"("+e+") "+this.hdf5GetMsgName(f.hm_type));g=this.tell();this.hdf5ProcessMessage(f,a);this.seek(g+f.hm_size)}if(0!==a.sym_btree&&0!==a.sym_lheap){this.seek(a.sym_btree);d=this.hdf5V1BtreeNode();this.seek(a.sym_lheap);c=this.hdf5LocalHeap();
for(e=0;e<d.entries_used;e+=1)this.seek(d.keys[e].child_address),this.checkSignature("SNOD")?(this.seek(d.keys[e].child_address),this.hdf5GroupSymbolTable(c,a)):(this.seek(d.keys[e].child_address),this.hdf5V1ObjectHeader(a));a.children.forEach(function(a){b.seek(a.hdr_offset);b.hdf5V1ObjectHeader(a)})}};I.prototype.getTypeMatchMinc=function(a){return this._type_matching[a-1]};I.prototype.defined=function(a){return"undefined"!==typeof a};I.prototype.typeName=function(a){return this.defined(a)?a.constructor.name:
"undefined"};I.prototype.typeSize=function(a){if(a>=this._type_enum.INT8&&a<this.type_sizes.length)return this.type_sizes[a];throw Error("Unknown type "+a);};I.prototype.typeIsFloat=function(a){return a>=this._type_enum.FLT&&a<=this._type_enum.DBL};I.prototype.join=function(a,b){var c="";if(a&&a.length){var d;for(d=0;d<a.length-1;d+=1)c+=a[d],c+=b;c+=a[d]}return c};I.prototype.printStructure=function(a,b){var c=this,d,e="";for(d=0;d<2*b;d+=1)e+=" ";e+=a.name+(a.children.length?"/":"");0<a.type&&(e+=
" "+this.typeName(a.array),a.dims.length&&(e+="["+a.dims.join(", ")+"]"),e=a.array?e+(":"+a.array.length):e+" NULL");console.log(e);Object.keys(a.attributes).forEach(function(f){var g=a.attributes[f];e="";for(d=0;d<2*b+1;d+=1)e+=" ";e+=a.name+":"+f+" "+c.typeName(g)+"["+g.length+"] ";"string"===typeof g?e+=JSON.stringify(g):(e+="{"+c.join(g.slice(0,16),", "),16<g.length&&(e+=", ..."),e+="}");console.log(e)});a.children.forEach(function(a){c.printStructure(a,b+1)})};I.prototype.findDataset=function(a,
b,c){var d=this,e;a&&a.name===b&&0<a.type?e=a:a.children.find(function(a){e=d.findDataset(a,b,c+1);return d.defined(e)});return e};I.prototype.findAttribute=function(a,b,c){var d=this,e=a.attributes[b];if(e)return e;a.children.find(function(a){e=d.findAttribute(a,b,c+1);return d.defined(e)});return e};I.prototype.scaleVoxels=function(a,b,c,d,e){var f,g;switch(this.getTypeMatchMinc(a.type)){case "int8":f=new ArrayBuffer(a.array.length*Int8Array.BYTES_PER_ELEMENT);g=new Int8Array(f);break;case "int16":f=
new ArrayBuffer(a.array.length*Int16Array.BYTES_PER_ELEMENT);g=new Int16Array(f);break;case "int32":f=new ArrayBuffer(a.array.length*Int32Array.BYTES_PER_ELEMENT);g=new Int32Array(f);break;case "float32":f=new ArrayBuffer(a.array.length*Float32Array.BYTES_PER_ELEMENT);g=new Float32Array(f);break;case "float64":f=new ArrayBuffer(a.array.length*Float64Array.BYTES_PER_ELEMENT);g=new Float64Array(f);break;case "uint8":f=new ArrayBuffer(a.array.length*Uint8Array.BYTES_PER_ELEMENT);g=new Uint8Array(f);
break;case "uint16":f=new ArrayBuffer(a.array.length*Uint16Array.BYTES_PER_ELEMENT);g=new Uint16Array(f);break;case "uint32":f=new ArrayBuffer(a.array.length*Uint32Array.BYTES_PER_ELEMENT);g=new Uint32Array(f);break;default:throw b="Unsupported data type: "+header.datatype,console.log({message:b}),Error(b);}if(1>a.dims.length-b.dims.length)throw Error("Too few slice dimensions: "+a.dims.length+" "+b.dims.length);var h=1,l;for(l=b.dims.length;l<a.dims.length;l+=1)h*=a.dims[l];e&&console.log(h+" voxels in slice.");
var k=0,m=0,r=-Number.MAX_VALUE,t=Number.MAX_VALUE,p=a.array;c=c.array;var q=b.array;e&&console.log("valid range is "+d[0]+" to "+d[1]);var v,B=d[0],z,x,w,n=this.typeIsFloat(a.type);for(l=0;l<b.array.length;l+=1)if(e&&console.log(l+" "+q[l]+" "+c[l]+" "+p[l*h]),n)for(x=0;x<h;x+=1)w=p[m],w<d[0]||w>d[1]?g[m]=0:(g[m]=w,k+=w,w>r&&(r=w),w<t&&(t=w)),m+=1;else for(a=d[1]-d[0],v=c[l]-q[l],z=q[l],x=0;x<h;x+=1)w=(p[m]-B)/a*v+z,w=w/c[l]*d[1],g[m]=w,k+=w,m+=1,w>r&&(r=w),w<t&&(t=w);e&&(console.log("Min: "+t),
console.log("Max: "+r),console.log("Sum: "+k),console.log("Mean: "+k/m));return f};I.prototype.isRgbVolume=function(a,b){var c=a.order;return"Uint8Array"===b.array.constructor.name&&0<c.length&&"vector_dimension"===c[c.length-1]&&3===a.vector_dimension.space_length};I.prototype.rgbVoxels=function(a){a=a.array;var b=a.length,c=new ArrayBuffer(b/3*4),d=new Uint8Array(c),e,f=0;for(e=0;e<b;e+=3)d[f+0]=a[e+0],d[f+1]=a[e+1],d[f+2]=a[e+2],d[f+3]=255,f+=4;return c};I.prototype.parseHeader=function(a){var b;
try{b=JSON.parse(a)}catch(c){throw a="server did not respond with valid JSON\nResponse was: \n"+a,console.log({message:a}),Error(a);}4===b.order.length&&(b.order=b.order.slice(1));b.datatype=b.datatype||"uint8";b.xspace.space_length=parseFloat(b.xspace.space_length);b.yspace.space_length=parseFloat(b.yspace.space_length);b.zspace.space_length=parseFloat(b.zspace.space_length);b.xspace.start=parseFloat(b.xspace.start);b.yspace.start=parseFloat(b.yspace.start);b.zspace.start=parseFloat(b.zspace.start);
b.xspace.step=parseFloat(b.xspace.step);b.yspace.step=parseFloat(b.yspace.step);b.zspace.step=parseFloat(b.zspace.step);b.xspace.direction_cosines=b.xspace.direction_cosines||[1,0,0];b.yspace.direction_cosines=b.yspace.direction_cosines||[0,1,0];b.zspace.direction_cosines=b.zspace.direction_cosines||[0,0,1];b.xspace.direction_cosines=b.xspace.direction_cosines.map(parseFloat);b.yspace.direction_cosines=b.yspace.direction_cosines.map(parseFloat);b.zspace.direction_cosines=b.zspace.direction_cosines.map(parseFloat);
b[b.order[0]].offset=b[b.order[1]].space_length*b[b.order[2]].space_length;b[b.order[1]].offset=b[b.order[2]].space_length;b[b.order[2]].offset=1;b.time&&(b.time.space_length=parseFloat(b.time.space_length),b.time.start=parseFloat(b.time.start),b.time.step=parseFloat(b.time.step),b.time.offset=b.xspace.space_length*b.yspace.space_length*b.zspace.space_length);return b};I.prototype.createMincData=function(a,b){switch(a.datatype){case "int8":a=new Int8Array(b);break;case "int16":a=new Int16Array(b);
break;case "int32":a=new Int32Array(b);break;case "float32":a=new Float32Array(b);break;case "float64":a=new Float64Array(b);break;case "uint8":a=new Uint8Array(b);break;case "uint16":a=new Uint16Array(b);break;case "uint32":case "rgb8":a=new Uint32Array(b);break;default:throw a="Unsupported data type: "+a.datatype,console.log({message:a}),Error(a);}return a};I.prototype._run=function(){var a=this,b=this._getInput(0);if(b){this._dv=new DataView(b);this._dv.getUint64=function(b,c){var d=a._dv.getUint32(b+
0,c);b=a._dv.getUint32(b+4,c);return c?(b<<32)+d:(d<<32)+b};var c=this.createLink();try{this._superblk=this.hdf5Superblock()}catch(l){console.warn("The input file is not a Minc2 file.");return}this.seek(this._superblk.root_addr);1>=this._superblk.sbver?this.hdf5V1ObjectHeader(c):this.hdf5V2ObjectHeader(c);this.loadData(c);this.getMetadata("debug")&&this.printStructure(c,0);b=this.findDataset(c,"image");if(!this.defined(b))throw Error("Can't find image dataset.");var d=this.findAttribute(b,"valid_range",
0);if(!this.defined(d)){var e,f;switch(b.type){case this._type_enum.INT8:e=-128;f=127;break;case this._type_enum.UINT8:e=0;f=255;break;case this._type_enum.INT16:e=-32768;f=32767;break;case this._type_enum.UINT16:e=0;f=65535;break;case this._type_enum.INT32:e=2147483648;f=-2147483649;break;case this._type_enum.UINT32:e=0,f=(1<<32)-1}d=Float32Array.of(e,f)}e=this.findDataset(c,"image-min");this.defined(e)||(e={array:Float32Array.of(0),dims:[]});f=this.findDataset(c,"image-max");this.defined(f)||(f=
{array:Float32Array.of(1),dims:[]});var g={},h=this.findAttribute(b,"dimorder",0);if("string"!==typeof h)throw Error("Can't find dimension order.");g.order=h.split(",");g.order.forEach(function(b){var d=a.findDataset(c,b);if(!a.defined(d))throw Error("Can't find dimension variable "+b);g[b]={};h=a.findAttribute(d,"step",0);a.defined(h)||(h=Float32Array.of(1));g[b].step=h[0];h=a.findAttribute(d,"start",0);a.defined(h)||(h=Float32Array.of(0));g[b].start=h[0];h=a.findAttribute(d,"length",0);if(!a.defined(h))throw Error("Can't find length for "+
b);g[b].space_length=h[0];h=a.findAttribute(d,"direction_cosines",0);a.defined(h)?g[b].direction_cosines=Array.prototype.slice.call(h):"xspace"===b?g[b].direction_cosines=[1,0,0]:"yspace"===b?g[b].direction_cosines=[0,1,0]:"zspace"===b&&(g[b].direction_cosines=[0,0,1])});this.isRgbVolume(g,b)?(g.order.pop(),g.datatype="rgb8",d=this.rgbVoxels(b)):(g.datatype=this.getTypeMatchMinc(b.type),d=this.scaleVoxels(b,e,f,d,this.getMetadata("debug")));b=this.parseHeader(JSON.stringify(g));d=this.createMincData(b,
d);this._addOutput(ra);e=this.getOutput();e.setData(d,b);e.setMetadata("format","minc2")}else console.warn('Minc2Decoder requires an ArrayBuffer as input "0". Unable to continue.')};var qb=function(){var a;a=A.call(this)||this;a.addInputValidator(0,ArrayBuffer);a.setMetadata("debug",!1);return a};$jscomp.inherits(qb,A);qb.prototype.parseNifti1Header=function(a){var b={order:["zspace","yspace","xspace"],xspace:{},yspace:{},zspace:{}},c=null,d=new DataView(a,0,348),e=new Uint8Array(a,0,348);a=!0;var f=
d.getUint32(0,!0);348===f?a=!0:1543569408===f?a=!1:c="This does not look like a NIfTI-1 file.";f=d.getUint16(40,a);if(3>f||4<f)c="Cannot handle "+f+"-dimensional images yet.";e=String.fromCharCode.apply(null,e.subarray(344,348));"n+1\x00"!==e&&(c="Bad magic number: '"+e+"'");if(c)return console.warn("The input file is not a NIfTI file."),null;b.xspace.space_length=d.getUint16(42,a);b.yspace.space_length=d.getUint16(44,a);b.zspace.space_length=d.getUint16(46,a);var g=d.getUint16(48,a),c=d.getUint16(70,
a),h=d.getUint16(72,a),e=d.getFloat32(80,a),f=d.getFloat32(84,a),l=d.getFloat32(88,a),k=d.getFloat32(92,a),m=d.getFloat32(108,a);352>m&&(m=352);var r=d.getFloat32(112,a),t=d.getFloat32(116,a),p=d.getUint16(252,a),q=d.getUint16(254,a),v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];1<=g&&(b.time={},b.time.space_length=g,b.time.step=k,b.time.start=0,b.time.name="time",b.order=["time","zspace","yspace","xspace"]);b.bytes_per_voxel=h/8;b.must_swap_data=!a&&1<b.bytes_per_voxel;0<q?(v[0][0]=d.getFloat32(280,
a),v[0][1]=d.getFloat32(284,a),v[0][2]=d.getFloat32(288,a),v[0][3]=d.getFloat32(292,a),v[1][0]=d.getFloat32(296,a),v[1][1]=d.getFloat32(300,a),v[1][2]=d.getFloat32(304,a),v[1][3]=d.getFloat32(308,a),v[2][0]=d.getFloat32(312,a),v[2][1]=d.getFloat32(316,a),v[2][2]=d.getFloat32(320,a),v[2][3]=d.getFloat32(324,a)):0<p?(g=d.getFloat32(256,a),h=d.getFloat32(260,a),k=d.getFloat32(264,a),p=d.getFloat32(268,a),q=d.getFloat32(272,a),v=d.getFloat32(276,a),d=0>d.getFloat32(76,a)?-1:1,v=this.niftiQuaternToMat44(g,
h,k,p,q,v,e,f,l,d)):(v[0][0]=e,v[1][1]=f,v[2][2]=l);ra.transformToMinc(v,b);b.datatype=c;b.vox_offset=m;b.scl_slope=r;b.scl_inter=t;return b};qb.prototype.niftiQuaternToMat44=function(a,b,c,d,e,f,g,h,l,k){var m=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,1]],r;r=1-(a*a+b*b+c*c);1E-7>r?(r=1/Math.sqrt(a*a+b*b+c*c),a*=r,b*=r,c*=r,r=0):r=Math.sqrt(r);g=0<g?g:1;h=0<h?h:1;l=0<l?l:1;0>k&&(l=-l);m[0][0]=(r*r+a*a-b*b-c*c)*g;m[0][1]=2*(a*b-r*c)*h;m[0][2]=2*(a*c+r*b)*l;m[1][0]=2*(a*b+r*c)*g;m[1][1]=(r*r+b*b-a*a-c*
c)*h;m[1][2]=2*(b*c-r*a)*l;m[2][0]=2*(a*c-r*b)*g;m[2][1]=2*(b*c+r*a)*h;m[2][2]=(r*r+c*c-b*b-a*a)*l;m[0][3]=d;m[1][3]=e;m[2][3]=f;return m};qb.prototype.createNifti1Data=function(a,b){a.must_swap_data&&ra.swapn(new Uint8Array(b,a.vox_offset),a.bytes_per_voxel);switch(a.datatype){case 2:b=new Uint8Array(b,a.vox_offset);break;case 4:b=new Int16Array(b,a.vox_offset);break;case 8:b=new Int32Array(b,a.vox_offset);break;case 16:b=new Float32Array(b,a.vox_offset);break;case 64:b=new Float64Array(b,a.vox_offset);
break;case 256:b=new Int8Array(b,a.vox_offset);break;case 512:b=new Uint16Array(b,a.vox_offset);break;case 768:b=new Uint32Array(b,a.vox_offset);break;default:throw Error("Unsupported data type: "+a.datatype);}var c,d=a.scl_slope,e=a.scl_inter;if(0!==d){var f=new Float32Array(b.length);for(c=0;c<b.length;c++)f[c]=b[c]*d+e;b=f}4===a.order.length&&(a.order=a.order.slice(1));a[a.order[0]].offset=a[a.order[1]].space_length*a[a.order[2]].space_length;a[a.order[1]].offset=a[a.order[2]].space_length;a[a.order[2]].offset=
1;a.time&&(a.time.offset=a.xspace.space_length*a.yspace.space_length*a.zspace.space_length);return b};qb.prototype._run=function(){var a=this._getInput(0);if(a){var b=null;try{b=this.parseNifti1Header(a)}catch(d){}if(b){a=this.createNifti1Data(b,a);this._addOutput(ra);var c=this.getOutput();c.setData(a,b);c.setMetadata("format","nifti")}else console.warn("This file is not a NIfTI file.")}else console.warn('NiftiDecoder requires an ArrayBuffer as input "0". Unable to continue.')};var cc=function(){var a;
a=A.call(this)||this;a.setMetadata("filename","untitled.pixp");return a};$jscomp.inherits(cc,A);cc.prototype.hasValidInput=function(){var a=this._getInput();return a&&(a.isOfType(E.TYPE())||a.isOfType(U.TYPE()))};cc.prototype._run=function(){if(this.hasValidInput()){var a=this._getInput(),a={dataType:a.getData().constructor.name,data:Array.prototype.slice.call(a.getData()),metadata:a.getMetadataCopy(),pixpipeType:a.constructor.name},a=JSON.stringify(a),b=new Ca.Deflate({level:6,gzip:!0,header:{text:!0,
time:+new Date,comment:"This file was created by Pixpipe.js"}});b.push(a,!0);this._output[0]=new Blob([b.result],{type:"application/gzip"})}else console.warn("PixpEncoder can only encode Image2D and Image3D.")};cc.prototype.download=function(){this.getOutput()?Yf.saveAs(this.getOutput(),this.getMetadata("filename")):console.warn("No output computed yet.")};var dc=function(){var a;a=A.call(this)||this;a.addInputValidator(0,ArrayBuffer);return a};$jscomp.inherits(dc,A);dc.prototype._run=function(){if(this.hasValidInput()){var a=
this._getInput(),b=new Ca.Inflate({level:6,to:"string"});b.push(a,!0);if(b.err)console.warn("This file is not a Pixp file.");else{a=null;try{a=JSON.parse(b.result)}catch(d){console.warn("Could not parse pixp file.");console.error(d);return}if(a.pixpipeType in pixpipe){b=null;try{b=window}catch(d){try{b=GLOBAL}catch(e){console.warn("You are not in a Javascript environment?? Weird.");return}}if(b[a.dataType]){var b=new b[a.dataType](a.data),c=new pixpipe[a.pixpipeType];c.setRawData(b);c.setRawMetadata(a.metadata);
this._output[0]=c}else console.warn("Data array from pixp file is unknown: "+a.dataType)}else console.warn("Unknown type pixpipe."+a.pixpipeType+", cannot create any output.")}}else console.warn("PixpDecoder can only decode ArrayBuffer.")};var Cb=function(){var a;a=A.call(this)||this;a.addInputValidator(0,ArrayBuffer);a.setMetadata("debug",!1);return a};$jscomp.inherits(Cb,A);Cb.prototype._parseMGHHeader=function(a,b){b={order:["xspace","yspace","zspace"],xspace:{},yspace:{},zspace:{}};var c=new DataView(a,
0,284);a=c.getUint32(0,!0);if(1===a)a=!0;else if(16777216===a)a=!1;else return console.warn("This does not look like an MGH file."),null;var d,e=[0,0,0,0],f=4,g=1;for(d=0;4>d;d++){e[d]=c.getUint32(f,a);if(1>=e[d])break;g*=e[d];f+=4}if(3>d||4<d)return console.warn("Cannot handle "+d+"-dimensional images yet."),null;var h=c.getUint32(20,a),l=[1,1,1],k,m,r=[[-1,0,0],[0,0,-1],[0,1,0],[0,0,0]];if(c.getUint16(28,a)){f=30;for(k=0;3>k;k++)l[k]=c.getFloat32(f,a),f+=4;for(k=0;4>k;k++)for(m=0;3>m;m++)r[k][m]=
c.getFloat32(f,a),f+=4}if(this._metadata.debug)for(k=0;3>k;k++){c="";for(m=0;4>m;m++)c+="xyzc"[m]+"_"+"ras"[k]+" "+r[m][k]+" ";console.log(c)}c=[0,1,2];for(k=0;3>k;k++){m=0;var f=Math.abs(r[k][0]),t=Math.abs(r[k][1]),p=Math.abs(r[k][2]);b.order[k]="xspace";t>f&&t>p&&(m=1,b.order[k]="yspace");p>f&&p>t&&(m=2,b.order[k]="zspace");c[k]=m}4===d&&(this._metadata.debug&&console.log("Creating time dimension: "+e[3]),b.time={space_length:e[3],step:1,start:0,name:"time"},b.order.push("time"));d=[[0,0,0,0],
[0,0,0,0],[0,0,0,0]];for(k=0;3>k;k++)for(m=0;3>m;m++)d[k][m]=r[m][k]*l[k];for(k=0;3>k;k++){for(m=l=0;3>m;m++)l+=e[m]/2*d[k][m];d[k][3]=r[3][k]-l}r=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];for(k=0;3>k;k++)for(m=0;4>m;m++)l=m,3>m&&(l=c[m]),r[k][l]=d[k][m];ra.transformToMinc(r,b);b.datatype=h;b.little_endian=a;b.nvoxels=g;for(k=0;3>k;k++)b[b.order[k]].space_length=e[k];return b};Cb.prototype._createMGHData=function(a,b){var c=null,d;switch(a.datatype){case 0:d=1;break;case 1:case 3:d=4;break;case 4:d=
2;break;default:return console.warn("Unsupported data type: "+a.datatype),null}var e=a.nvoxels*d;1<d&&!a.little_endian&&ra.swapn(new Uint8Array(b,284,e),d);switch(a.datatype){case 0:c=new Uint8Array(b,284,a.nvoxels);break;case 1:c=new Int32Array(b,284,a.nvoxels);break;case 3:c=new Float32Array(b,284,a.nvoxels);break;case 4:c=new Int16Array(b,284,a.nvoxels)}b=1;for(d=0;d<a.order.length;d++)a[a.order[d]].offset=b,b*=a[a.order[d]].space_length;return c};Cb.prototype._run=function(){var a=this._getInput(0);
if(a){var b=null;try{b=this._parseMGHHeader(a)}catch(d){}if(b){a=this._createMGHData(b,a);if(!a)return null;this._addOutput(ra);var c=this.getOutput();c.setData(a,b);c.setMetadata("format","mgh")}else console.log("The input file is not a MGH file.")}else console.warn('MghDecoder requires an ArrayBuffer as input "0". Unable to continue.')};var td=function(){var a;a=A.call(this)||this;a._decoders=[I,qb,Cb,dc];return a};$jscomp.inherits(td,A);td.prototype._run=function(){var a=this._getInput(0);if(a)for(var b=
0;b<this._decoders.length;b++){var c=new this._decoders[b];c.addInput(a);c.update();if(c.getNumberOfOutputs()){this._output[0]=c.getOutput();this.setMetadata("decoderConstructor",this._decoders[b]);this.setMetadata("decoderName",this._decoders[b].name);break}}else console.warn("The input buffer must not be null.")};var ud=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Zf=new RegExp("[\\-\\.0-9"+ud.source.slice(1,
-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),$f=new RegExp("^"+ud.source+Zf.source+"*(?::"+ud.source+Zf.source+"*)?$");Ne.prototype={parse:function(a,b,c){var d=this.domBuilder;d.startDocument();Se(b,b={});Bg(a,b,c,d,this.errorHandler);d.endDocument()}};Oe.prototype={setTagName:function(a){if(!$f.test(a))throw Error("invalid tagName:"+a);this.tagName=a},add:function(a,b,c){if(!$f.test(a))throw Error("invalid attribute:"+a);this[this.length++]={qName:a,value:b,offset:c}},length:0,getLocalName:function(a){return this[a].localName},
getLocator:function(a){return this[a].locator},getQName:function(a){return this[a].qName},getURI:function(a){return this[a].uri},getValue:function(a){return this[a].value}};oc({},oc.prototype)instanceof oc||(oc=function(a,b){function c(){}c.prototype=b;c=new c;for(b in a)c[b]=a[b];return c});var sa={},La=sa.ELEMENT_NODE=1,zb=sa.ATTRIBUTE_NODE=2,tc=sa.TEXT_NODE=3,hf=sa.CDATA_SECTION_NODE=4,mf=sa.ENTITY_REFERENCE_NODE=5,rh=sa.ENTITY_NODE=6,lf=sa.PROCESSING_INSTRUCTION_NODE=7,jf=sa.COMMENT_NODE=8,gf=
sa.DOCUMENT_NODE=9,kf=sa.DOCUMENT_TYPE_NODE=10,Sa=sa.DOCUMENT_FRAGMENT_NODE=11,sh=sa.NOTATION_NODE=12,ca={},T={};ca.INDEX_SIZE_ERR=(T[1]="Index size error",1);ca.DOMSTRING_SIZE_ERR=(T[2]="DOMString size error",2);var th=ca.HIERARCHY_REQUEST_ERR=(T[3]="Hierarchy request error",3);ca.WRONG_DOCUMENT_ERR=(T[4]="Wrong document",4);ca.INVALID_CHARACTER_ERR=(T[5]="Invalid character",5);ca.NO_DATA_ALLOWED_ERR=(T[6]="No data allowed",6);ca.NO_MODIFICATION_ALLOWED_ERR=(T[7]="No modification allowed",7);var Hg=
ca.NOT_FOUND_ERR=(T[8]="Not found",8);ca.NOT_SUPPORTED_ERR=(T[9]="Not supported",9);var ag=ca.INUSE_ATTRIBUTE_ERR=(T[10]="Attribute in use",10);ca.INVALID_STATE_ERR=(T[11]="Invalid state",11);ca.SYNTAX_ERR=(T[12]="Syntax error",12);ca.INVALID_MODIFICATION_ERR=(T[13]="Invalid modification",13);ca.NAMESPACE_ERR=(T[14]="Invalid namespace",14);ca.INVALID_ACCESS_ERR=(T[15]="Invalid access",15);wb.prototype=Error.prototype;Pb(ca,wb);bb.prototype={length:0,item:function(a){return this[a]||null},toString:function(a,
b){for(var c=[],d=0;d<this.length;d++)yb(this[d],c,a,b);return c.join("")}};Qb.prototype.item=function(a){ad(this);return this[a]};pa(Qb,bb);pc.prototype={length:0,item:bb.prototype.item,getNamedItem:function(a){for(var b=this.length;b--;){var c=this[b];if(c.nodeName==a)return c}},setNamedItem:function(a){var b=a.ownerElement;if(b&&b!=this._ownerElement)throw new wb(ag);b=this.getNamedItem(a.nodeName);Ve(this._ownerElement,this,a,b);return b},setNamedItemNS:function(a){var b=a.ownerElement;if(b&&
b!=this._ownerElement)throw new wb(ag);b=this.getNamedItemNS(a.namespaceURI,a.localName);Ve(this._ownerElement,this,a,b);return b},removeNamedItem:function(a){a=this.getNamedItem(a);Xe(this._ownerElement,this,a);return a},removeNamedItemNS:function(a,b){a=this.getNamedItemNS(a,b);Xe(this._ownerElement,this,a);return a},getNamedItemNS:function(a,b){for(var c=this.length;c--;){var d=this[c];if(d.localName==b&&d.namespaceURI==a)return d}return null}};Ye.prototype={hasFeature:function(a,b){return(a=this._features[a.toLowerCase()])&&
(!b||b in a)?!0:!1},createDocument:function(a,b,c){var d=new Rb;d.implementation=this;d.childNodes=new bb;(d.doctype=c)&&d.appendChild(c);b&&(a=d.createElementNS(a,b),d.appendChild(a));return d},createDocumentType:function(a,b,c){var d=new fd;d.name=a;d.nodeName=a;d.publicId=b;d.systemId=c;return d}};ia.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,
insertBefore:function(a,b){return af(this,a,b)},replaceChild:function(a,b){this.insertBefore(a,b);b&&this.removeChild(b)},removeChild:function(a){return $e(this,a)},appendChild:function(a){return this.insertBefore(a,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(a){return id(this.ownerDocument||this,this,a)},normalize:function(){for(var a=this.firstChild;a;){var b=a.nextSibling;b&&b.nodeType==tc&&a.nodeType==tc?(this.removeChild(b),a.appendData(b.data)):(a.normalize(),
a=b)}},isSupported:function(a,b){return this.ownerDocument.implementation.hasFeature(a,b)},hasAttributes:function(){return 0<this.attributes.length},lookupPrefix:function(a){for(var b=this;b;){var c=b._nsMap;if(c)for(var d in c)if(c[d]==a)return d;b=b.nodeType==zb?b.ownerDocument:b.parentNode}return null},lookupNamespaceURI:function(a){for(var b=this;b;){var c=b._nsMap;if(c&&a in c)return c[a];b=b.nodeType==zb?b.ownerDocument:b.parentNode}return null},isDefaultNamespace:function(a){return null==this.lookupPrefix(a)}};
Pb(sa,ia);Pb(sa,ia.prototype);Rb.prototype={nodeName:"#document",nodeType:gf,doctype:null,documentElement:null,_inc:1,insertBefore:function(a,b){if(a.nodeType==Sa){for(var c=a.firstChild;c;){var d=c.nextSibling;this.insertBefore(c,b);c=d}return a}null==this.documentElement&&a.nodeType==La&&(this.documentElement=a);return af(this,a,b),a.ownerDocument=this,a},removeChild:function(a){this.documentElement==a&&(this.documentElement=null);return $e(this,a)},importNode:function(a,b){return nf(this,a,b)},
getElementById:function(a){var b=null;qc(this.documentElement,function(c){if(c.nodeType==La&&c.getAttribute("id")==a)return b=c,!0});return b},createElement:function(a){var b=new xb;b.ownerDocument=this;b.nodeName=a;b.tagName=a;b.childNodes=new bb;return(b.attributes=new pc)._ownerElement=b},createDocumentFragment:function(){var a=new sc;a.ownerDocument=this;a.childNodes=new bb;return a},createTextNode:function(a){var b=new cd;b.ownerDocument=this;b.appendData(a);return b},createComment:function(a){var b=
new dd;b.ownerDocument=this;b.appendData(a);return b},createCDATASection:function(a){var b=new ed;b.ownerDocument=this;b.appendData(a);return b},createProcessingInstruction:function(a,b){var c=new hd;c.ownerDocument=this;c.tagName=c.target=a;c.nodeValue=c.data=b;return c},createAttribute:function(a){var b=new rc;b.ownerDocument=this;b.name=a;b.nodeName=a;b.localName=a;b.specified=!0;return b},createEntityReference:function(a){var b=new gd;b.ownerDocument=this;b.nodeName=a;return b},createElementNS:function(a,
b){var c=new xb,d=b.split(":"),e=c.attributes=new pc;c.childNodes=new bb;c.ownerDocument=this;c.nodeName=b;c.tagName=b;c.namespaceURI=a;2==d.length?(c.prefix=d[0],c.localName=d[1]):c.localName=b;return e._ownerElement=c},createAttributeNS:function(a,b){var c=new rc,d=b.split(":");c.ownerDocument=this;c.nodeName=b;c.name=b;c.namespaceURI=a;c.specified=!0;2==d.length?(c.prefix=d[0],c.localName=d[1]):c.localName=b;return c}};pa(Rb,ia);xb.prototype={nodeType:La,hasAttribute:function(a){return null!=this.getAttributeNode(a)},
getAttribute:function(a){return(a=this.getAttributeNode(a))&&a.value||""},getAttributeNode:function(a){return this.attributes.getNamedItem(a)},setAttribute:function(a,b){a=this.ownerDocument.createAttribute(a);a.value=a.nodeValue=""+b;this.setAttributeNode(a)},removeAttribute:function(a){(a=this.getAttributeNode(a))&&this.removeAttributeNode(a)},appendChild:function(a){if(a.nodeType===Sa)return this.insertBefore(a,null);var b=a.parentNode;b&&b.removeChild(a);b=this.lastChild;a.parentNode=this;a.previousSibling=
b;a.nextSibling=null;b?b.nextSibling=a:this.firstChild=a;this.lastChild=a;bd(this.ownerDocument,this,a);return a},setAttributeNode:function(a){return this.attributes.setNamedItem(a)},setAttributeNodeNS:function(a){return this.attributes.setNamedItemNS(a)},removeAttributeNode:function(a){return this.attributes.removeNamedItem(a.nodeName)},removeAttributeNS:function(a,b){(a=this.getAttributeNodeNS(a,b))&&this.removeAttributeNode(a)},hasAttributeNS:function(a,b){return null!=this.getAttributeNodeNS(a,
b)},getAttributeNS:function(a,b){return(a=this.getAttributeNodeNS(a,b))&&a.value||""},setAttributeNS:function(a,b,c){a=this.ownerDocument.createAttributeNS(a,b);a.value=a.nodeValue=""+c;this.setAttributeNode(a)},getAttributeNodeNS:function(a,b){return this.attributes.getNamedItemNS(a,b)},getElementsByTagName:function(a){return new Qb(this,function(b){var c=[];qc(b,function(d){d===b||d.nodeType!=La||"*"!==a&&d.tagName!=a||c.push(d)});return c})},getElementsByTagNameNS:function(a,b){return new Qb(this,
function(c){var d=[];qc(c,function(e){e===c||e.nodeType!==La||"*"!==a&&e.namespaceURI!==a||"*"!==b&&e.localName!=b||d.push(e)});return d})}};Rb.prototype.getElementsByTagName=xb.prototype.getElementsByTagName;Rb.prototype.getElementsByTagNameNS=xb.prototype.getElementsByTagNameNS;pa(xb,ia);rc.prototype.nodeType=zb;pa(rc,ia);Sb.prototype={data:"",substringData:function(a,b){return this.data.substring(a,a+b)},appendData:function(a){this.nodeValue=this.data=a=this.data+a;this.length=a.length},insertData:function(a,
b){this.replaceData(a,0,b)},appendChild:function(a){throw Error(T[th]);},deleteData:function(a,b){this.replaceData(a,b,"")},replaceData:function(a,b,c){var d=this.data.substring(0,a);a=this.data.substring(a+b);this.nodeValue=this.data=c=d+c+a;this.length=c.length}};pa(Sb,ia);cd.prototype={nodeName:"#text",nodeType:tc,splitText:function(a){var b=this.data,c=b.substring(a);this.data=this.nodeValue=b=b.substring(0,a);this.length=b.length;a=this.ownerDocument.createTextNode(c);this.parentNode&&this.parentNode.insertBefore(a,
this.nextSibling);return a}};pa(cd,Sb);dd.prototype={nodeName:"#comment",nodeType:jf};pa(dd,Sb);ed.prototype={nodeName:"#cdata-section",nodeType:hf};pa(ed,Sb);fd.prototype.nodeType=kf;pa(fd,ia);bf.prototype.nodeType=sh;pa(bf,ia);cf.prototype.nodeType=rh;pa(cf,ia);gd.prototype.nodeType=mf;pa(gd,ia);sc.prototype.nodeName="#document-fragment";sc.prototype.nodeType=Sa;pa(sc,ia);hd.prototype.nodeType=lf;pa(hd,ia);df.prototype.serializeToString=function(a,b,c){return ef.call(a,b,c)};ia.prototype.toString=
ef;try{if(Object.defineProperty){var bg=function(a){switch(a.nodeType){case La:case Sa:var b=[];for(a=a.firstChild;a;)7!==a.nodeType&&8!==a.nodeType&&b.push(bg(a)),a=a.nextSibling;return b.join("");default:return a.nodeValue}};Object.defineProperty(Qb.prototype,"length",{get:function(){ad(this);return this.$$length}});Object.defineProperty(ia.prototype,"textContent",{get:function(){return bg(this)},set:function(a){switch(this.nodeType){case La:case Sa:for(;this.firstChild;)this.removeChild(this.firstChild);
(a||String(a))&&this.appendChild(this.ownerDocument.createTextNode(a));break;default:this.nodeValue=this.value=this.data=a}}});Te=function(a,b,c){a["$$"+b]=c}}}catch(a){}var uh=va(function(a,b){function c(a){this.options=a||{locator:{}}}function d(a,b,c){function d(b){var d=a[b];!d&&h&&(d=2==a.length?function(c){a(b,c)}:a);f[b]=d&&function(a){d("[xmldom "+b+"]\t"+a+g(c))}||function(){}}if(!a){if(b instanceof e)return b;a=b}var f={},h=a instanceof Function;c=c||{};d("warning");d("error");d("fatalError");
return f}function e(){this.cdata=!1}function f(a,b){b.lineNumber=a.lineNumber;b.columnNumber=a.columnNumber}function g(a){if(a)return"\n@"+(a.systemId||"")+"#[line:"+a.lineNumber+",col:"+a.columnNumber+"]"}function h(a,b,c){return"string"==typeof a?a.substr(b,c):a.length>=b+c||b?new java.lang.String(a,b,c)+"":a}function l(a,b){a.currentElement?a.currentElement.appendChild(b):a.doc.appendChild(b)}c.prototype.parseFromString=function(a,b){var c=this.options,f=new k,g=c.domBuilder||new e,h=c.errorHandler,
m=c.locator,l=c.xmlns||{},r={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};m&&g.setDocumentLocator(m);f.errorHandler=d(h,g,m);f.domBuilder=c.domBuilder||g;/\/x?html?$/.test(b)&&(r.nbsp="\u00a0",r.copy="\u00a9",l[""]="http://www.w3.org/1999/xhtml");l.xml=l.xml||"http://www.w3.org/XML/1998/namespace";a?f.parse(a,l,r):f.errorHandler.error("invalid doc source");return g.doc};e.prototype={startDocument:function(){this.doc=(new m).createDocument(null,null,null);this.locator&&(this.doc.documentURI=this.locator.systemId)},
startElement:function(a,b,c,d){var e=this.doc;b=e.createElementNS(a,c||b);var g=d.length;l(this,b);this.currentElement=b;this.locator&&f(this.locator,b);for(var h=0;h<g;h++){a=d.getURI(h);var k=d.getValue(h);c=d.getQName(h);a=e.createAttributeNS(a,c);this.locator&&f(d.getLocator(h),a);a.value=a.nodeValue=k;b.setAttributeNode(a)}},endElement:function(a,b,c){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(a,b){},endPrefixMapping:function(a){},processingInstruction:function(a,
b){a=this.doc.createProcessingInstruction(a,b);this.locator&&f(this.locator,a);l(this,a)},ignorableWhitespace:function(a,b,c){},characters:function(a,b,c){if(a=h.apply(this,arguments)){var d=this.cdata?this.doc.createCDATASection(a):this.doc.createTextNode(a);this.currentElement?this.currentElement.appendChild(d):/^\s*$/.test(a)&&this.doc.appendChild(d);this.locator&&f(this.locator,d)}},skippedEntity:function(a){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(a){if(this.locator=
a)a.lineNumber=0},comment:function(a,b,c){a=h.apply(this,arguments);var d=this.doc.createComment(a);this.locator&&f(this.locator,d);l(this,d)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(a,b,c){var d=this.doc.implementation;d&&d.createDocumentType&&(a=d.createDocumentType(a,b,c),this.locator&&f(this.locator,a),l(this,a))},warning:function(a){console.warn("[xmldom warning]\t"+a,g(this.locator))},error:function(a){console.error("[xmldom error]\t"+a,g(this.locator))},
fatalError:function(a){console.error("[xmldom fatalError]\t"+a,g(this.locator));throw a;}};"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(a){e.prototype[a]=function(){return null}});var k=Ne,m=b.DOMImplementation=Ye;b.XMLSerializer=df;b.DOMParser=c}),vd={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",
306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",
263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",
323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",
37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams"},Wa,Oa={};for(Wa in vd)Oa[vd[Wa]]=parseInt(Wa);var vh=[Oa.BitsPerSample,Oa.ExtraSamples,Oa.SampleFormat,Oa.StripByteCounts,Oa.StripOffsets,Oa.StripRowCounts,Oa.TileByteCounts,Oa.TileOffsets],wd={1:"BYTE",2:"ASCII",
3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",16:"LONG8",17:"SLONG8",18:"IFD8"},cg={};for(Wa in wd)cg[wd[Wa]]=parseInt(Wa);var xd={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",
2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",
3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",
4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},dg={};for(Wa in xd)dg[xd[Wa]]=parseInt(Wa);var Dc;"undefined"===typeof window?Dc=function(a){return(new uh.DOMParser).parseFromString(a,"text/xml")}:"undefined"!==typeof window.DOMParser?Dc=function(a){return(new window.DOMParser).parseFromString(a,"text/xml")}:"undefined"!==typeof window.ActiveXObject&&new window.ActiveXObject("Microsoft.XMLDOM")&&(Dc=function(a){var b=new window.ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a);
return b});var X={fieldTags:Oa,fieldTagNames:vd,arrayFields:vh,fieldTypes:cg,fieldTypeNames:wd,photometricInterpretations:{WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},geoKeys:dg,geoKeyNames:xd,parseXml:Dc},Db={fromWhiteIsZero:function(a,b,c,d){c=new Uint8Array(c*d*3);for(var e=0,f=0;e<a.length;++e,f+=3)d=256-a[e]/b*256,c[f]=d,c[f+1]=d,c[f+2]=d;return c},fromBlackIsZero:function(a,b,c,d){c=new Uint8Array(c*d*3);for(var e=0,f=0;e<a.length;++e,f+=
3)d=a[e]/b*256,c[f]=d,c[f+1]=d,c[f+2]=d;return c},fromPalette:function(a,b,c,d){c=new Uint8Array(c*d*3);d=b.length/3;for(var e=b.length/3*2,f=0,g=0;f<a.length;++f,g+=3){var h=a[f];c[g]=b[h]/65536*256;c[g+1]=b[h+d]/65536*256;c[g+2]=b[h+e]/65536*256}return c},fromCMYK:function(a,b,c){b=new Uint8Array(b*c*3);for(var d,e,f,g=0,h=0;g<a.length;g+=4,h+=3)c=a[g],d=a[g+1],e=a[g+2],f=a[g+3],b[h]=(255-c)/256*255*((255-f)/256),b[h+1]=(255-d)/256*255*((255-f)/256),b[h+2]=(255-e)/256*255*((255-f)/256);return b},
fromYCbCr:function(a,b,c){b=new Uint8Array(b*c*3);for(var d,e,f=0,g=0;f<a.length;f+=3,g+=3)c=a[f],d=a[f+1],e=a[f+2],b[g]=c+1.402*(e-128),b[g+1]=c-.34414*(d-128)-.71414*(e-128),b[g+2]=c+1.772*(d-128);return b},fromCIELab:function(a,b,c){var d=[3.240479,-1.53715,-.498535,-.969256,1.875992,.041556,.055648,-.204043,1.057311];b=new Uint8Array(b*c*3);for(var e,f,g,h,l,k=c=0;c<a.length;c+=3,k+=3)e=a[c],f=a[c+1],g=a[c+2],h=Math.pow((e+16)/116,3),l=.008856<h,e=h=e/903.3*(0!==l)+l*h,h=l*Math.pow(h,1/3)+(0!==
l)*(7.787*h+16/116),f=f/500+h,l=.206893<f,f=l*Math.pow(f,3)+(f-16/116)/7.787*(0!==l),g=h-g/200,h=.206893<g,g=h*Math.pow(g,3)+(g-16/116)/7.787*(0!==h),f*=.950456,g*=1.088754,b[k]=f*d[0]+e*d[1]+g*d[2],b[k+1]=f*d[3]+e*d[4]+g*d[5],b[k+2]=f*d[6]+e*d[7]+g*d[8];return b}};Tb.prototype={isAsync:function(){return"undefined"===typeof this.decodeBlock}};Ub.prototype=Object.create(Tb.prototype);Ub.prototype.constructor=Ub;Ub.prototype.decodeBlock=function(a){return a};var Ig=Ub;jd.prototype={constructor:jd,initDictionary:function(){this.dictionary=
Array(258);this.entryLookup={};this.byteLength=9;for(var a=0;257>=a;a++)this.dictionary[a]=[a],this._makeEntryLookup&&(this.entryLookup[a]=a)},decompress:function(a){this._makeEntryLookup=!1;this.initDictionary();this.position=0;this.result=[];a.buffer||(a=new Uint8Array(a));a=new DataView(a.buffer);for(var b=this.getNext(a),c;257!==b;){if(256===b){this.initDictionary();for(b=this.getNext(a);256===b;)b=this.getNext(a);if(256<b)throw"corrupted code at scanline "+b;if(257===b)break;else this.appendArray(this.result,
this.dictionary[b]),c=b}else{if(void 0!==this.dictionary[b])this.appendArray(this.result,this.dictionary[b]),c=this.dictionary[c].concat(this.dictionary[b][0]);else{var d=this.dictionary[c];if(!d)throw"Bogus entry. Not in dictionary, "+c+" / "+this.dictionary.length+", position: "+this.position;c=d.concat(this.dictionary[c][0]);this.appendArray(this.result,c)}this.addToDictionary(c);c=b}this.dictionary.length>=Math.pow(2,this.byteLength)-1&&this.byteLength++;b=this.getNext(a)}return new Uint8Array(this.result)},
appendArray:function(a,b){for(var c=0;c<b.length;c++)a.push(b[c]);return a},haveBytesChanged:function(){return this.dictionary.length>=Math.pow(2,this.byteLength)?(this.byteLength++,!0):!1},addToDictionary:function(a){this.dictionary.push(a);this._makeEntryLookup&&(this.entryLookup[a]=this.dictionary.length-1);this.haveBytesChanged();return this.dictionary.length-1},getNext:function(a){a=this.getByte(a,this.position,this.byteLength);this.position+=this.byteLength;return a},getByte:function(a,b,c){var d=
b%8,e=Math.floor(b/8),f=8-d,g=b+c-8*(e+1),h,l=8*(e+2)-b;h=Math.max(0,8*(e+2)-(b+c));if(e>=a.byteLength)return console.warn("ran off the end of the buffer before finding EOI_CODE (end on input code)"),257;d=(a.getUint8(e,this.littleEndian)&Math.pow(2,8-d)-1)<<c-f;e+1<a.byteLength&&(h=a.getUint8(e+1,this.littleEndian)>>>h,h<<=Math.max(0,c-l),d+=h);8<g&&e+2<a.byteLength&&(b=8*(e+3)-(b+c),a=a.getUint8(e+2,this.littleEndian)>>>b,d+=a);return d},compress:function(a){this._makeEntryLookup=!0;this.initDictionary();
this.position=0;for(var b=[],c=[],b=this.appendArray(b,this.binaryFromByte(256,this.byteLength)),d=0;d<a.length;d++){var e=[a[d]],f=c.concat(e);void 0!==this.entryLookup[f]?c=f:(c=this.binaryFromByte(this.entryLookup[c],this.byteLength),b=this.appendArray(b,c),this.addToDictionary(f),c=e,this.dictionary.length>=Math.pow(2,12)&&(b=this.appendArray(b,this.binaryFromByte(256,this.byteLength)),this.initDictionary()))}a=this.binaryFromByte(this.entryLookup[c],this.byteLength);b=this.appendArray(b,a);this.binary=
b=b=this.appendArray(b,this.binaryFromByte(257,this.byteLength));return this.result=this.binaryToUint8(b)},byteFromCode:function(a){return this.dictionary[a]},binaryFromByte:function(a){for(var b=new Uint8Array(1<arguments.length&&void 0!==arguments[1]?arguments[1]:8),c=0;c<b.length;c++)b[b.length-1-c]=0<(a&Math.pow(2,c));return b},binaryToNumber:function(a){for(var b=0,c=0;c<a.length;c++)b+=Math.pow(2,a.length-c-1)*a[c];return b},inputToBinary:function(a){for(var b=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:8,c=new Uint8Array(a.length*b),d=0;d<a.length;d++){var e=this.binaryFromByte(a[d],b);c.set(e,d*b)}return c},binaryToUint8:function(a){for(var b=new Uint8Array(Math.ceil(a.length/8)),c=0,d=0;d<a.length;d+=8){for(var e=0,f=0;8>f&&d+f<a.length;f++)e+=a[d+f]*Math.pow(2,8-f-1);b[c]=e;c++}return b}};Vb.prototype=Object.create(Tb.prototype);Vb.prototype.constructor=Vb;Vb.prototype.decodeBlock=function(a){return this.decompressor.decompress(a).buffer};var Jg=Vb,wh=Xf.inflate;Wb.prototype=Object.create(Tb.prototype);
Wb.prototype.constructor=Wb;Wb.prototype.decodeBlock=function(a){return wh(new Uint8Array(a)).buffer};var Kg=Wb;Xb.prototype=Object.create(Tb.prototype);Xb.prototype.constructor=Xb;Xb.prototype.decodeBlock=function(a){var b=new DataView(a),c=[],d,e;for(d=0;d<a.byteLength;++d){var f=b.getInt8(d);if(0>f){var g=b.getUint8(d+1),f=-f;for(e=0;e<=f;++e)c.push(g);d+=1}else{for(e=0;e<=f;++e)c.push(b.getUint8(d+e+1));d+=f+1}}return(new Uint8Array(c)).buffer};var Lg=Xb,eg=function(a,b,c){for(var d=0;b<c;++b)d+=
a[b];return d},fg=function(a,b,c){switch(a){case 1:switch(b){case 8:return new Uint8Array(c);case 16:return new Uint16Array(c);case 32:return new Uint32Array(c)}break;case 2:switch(b){case 8:return new Int8Array(c);case 16:return new Int16Array(c);case 32:return new Int32Array(c)}break;case 3:switch(b){case 32:return new Float32Array(c);case 64:return new Float64Array(c)}}throw Error("Unsupported data format/bitsPerSample");};of.prototype={getFileDirectory:function(){return this.fileDirectory},getGeoKeys:function(){return this.geoKeys},
getWidth:function(){return this.fileDirectory.ImageWidth},getHeight:function(){return this.fileDirectory.ImageLength},getSamplesPerPixel:function(){return this.fileDirectory.SamplesPerPixel},getTileWidth:function(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()},getTileHeight:function(){return this.isTiled?this.fileDirectory.TileLength:this.fileDirectory.RowsPerStrip},getBytesPerPixel:function(){for(var a=0,b=0;b<this.fileDirectory.BitsPerSample.length;++b){var c=this.fileDirectory.BitsPerSample[b];
if(0!==c%8)throw Error("Sample bit-width of "+c+" is not supported.");if(c!==this.fileDirectory.BitsPerSample[0])throw Error("Differing size of samples in a pixel are not supported.");a+=c}return a/8},getSampleByteSize:function(a){if(a>=this.fileDirectory.BitsPerSample.length)throw new RangeError("Sample index "+a+" is out of range.");a=this.fileDirectory.BitsPerSample[a];if(0!==a%8)throw Error("Sample bit-width of "+a+" is not supported.");return a/8},getReaderForSample:function(a){var b=this.fileDirectory.BitsPerSample[a];
switch(this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[a]:1){case 1:switch(b){case 8:return DataView.prototype.getUint8;case 16:return DataView.prototype.getUint16;case 32:return DataView.prototype.getUint32}break;case 2:switch(b){case 8:return DataView.prototype.getInt8;case 16:return DataView.prototype.getInt16;case 32:return DataView.prototype.getInt32}break;case 3:switch(b){case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}},getArrayForSample:function(a,
b){return fg(this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[a]:1,this.fileDirectory.BitsPerSample[a],b)},getDecoder:function(){return this.decoder},getTileOrStrip:function(a,b,c,d){var e=Math.ceil(this.getWidth()/this.getTileWidth()),f=Math.ceil(this.getHeight()/this.getTileHeight()),g,h=this.tiles;1===this.planarConfiguration?g=b*e+a:2===this.planarConfiguration&&(g=c*e*f+b*e+a);if(null!==h&&g in h)return d?d(null,{x:a,y:b,sample:c,data:h[g]}):h[g];this.isTiled?(e=this.fileDirectory.TileOffsets[g],
f=this.fileDirectory.TileByteCounts[g]):(e=this.fileDirectory.StripOffsets[g],f=this.fileDirectory.StripByteCounts[g]);e=this.dataView.buffer.slice(e,e+f);if(d)return this.getDecoder().decodeBlockAsync(e,function(f,e){f||null===h||(h[g]=e);d(f,{x:a,y:b,sample:c,data:e})});e=this.getDecoder().decodeBlock(e);null!==h&&(h[g]=e);return e},_readRasterAsync:function(a,b,c,d,e,f){function g(){n&&0===C&&(D?f(D):e(c))}function h(f,e){if(f)D=f;else{f=new DataView(e.data);var h=e.y*k,m=e.x*l,r=(e.y+1)*k,t=(e.x+
1)*l;e=e.sample;for(var p=Math.max(0,a[1]-h);p<Math.min(k,k-(r-a[3]));++p)for(var w=Math.max(0,a[0]-m);w<Math.min(l,l-(t-a[2]));++w){var n=x[e].call(f,(p*l+w)*v+z[e],O),M;d?(1!==B&&0<w&&(M=(p+h-a[1])*q*b.length+(w+m-a[0]-1)*b.length+e,n+=c[M]),M=(p+h-a[1])*q*b.length+(w+m-a[0])*b.length+e,c[M]=n):(1!==B&&0<w&&(M=(p+h-a[1])*q+w-1+m-a[0],n+=c[e][M]),M=(p+h-a[1])*q+w+m-a[0],c[e][M]=n)}}--C;g()}var l=this.getTileWidth(),k=this.getTileHeight(),m=Math.floor(a[0]/l),r=Math.ceil(a[2]/l),t=Math.floor(a[1]/
k),p=Math.ceil(a[3]/k);this.getWidth();var q=a[2]-a[0],v=this.getBytesPerPixel();this.getWidth();for(var B=this.fileDirectory.Predictor||1,z=[],x=[],w=0;w<b.length;++w)1===this.planarConfiguration?z.push(eg(this.fileDirectory.BitsPerSample,0,b[w])/8):z.push(0),x.push(this.getReaderForSample(b[w]));for(var n=!1,C=0,O=this.littleEndian,D=null;t<=p;++t)for(w=m;w<=r;++w)for(var u=0;u<b.length;++u){var ja=b[u];2===this.planarConfiguration&&(v=this.getSampleByteSize(ja));C+=1;this.getTileOrStrip(w,t,ja,
h)}n=!0;g()},_readRaster:function(a,b,c,d,e,f){try{var g=this.getTileWidth(),h=this.getTileHeight(),l=Math.floor(a[0]/g),k=Math.ceil(a[2]/g),m=Math.floor(a[1]/h),r=Math.ceil(a[3]/h);this.getWidth();var t=a[2]-a[0],p=this.getBytesPerPixel();this.getWidth();for(var q=this.fileDirectory.Predictor||1,v=[],B=[],z=0;z<b.length;++z)1===this.planarConfiguration?v.push(eg(this.fileDirectory.BitsPerSample,0,b[z])/8):v.push(0),B.push(this.getReaderForSample(b[z]));for(;m<r;++m)for(z=l;z<k;++z)for(var x=m*h,
w=z*g,n=(m+1)*h,C=(z+1)*g,O=0;O<b.length;++O){var D=b[O];2===this.planarConfiguration&&(p=this.getSampleByteSize(D));var u=new DataView(this.getTileOrStrip(z,m,D)),ja=B[O],y=Math.min(h,h-(n-a[3])),A=Math.min(g,g-(C-a[2])),F=(y*g+A)*p,H=(new Uint8Array(u.buffer)).length;2*H!==F&&this._debugMessages&&console.warn("dimension mismatch",H,F);for(var E=Math.max(0,a[1]-x);E<y;++E)for(var G=Math.max(0,a[0]-w);G<A;++G){var F=(E*g+G)*p,I=0;F<H-1&&(I=ja.call(u,F+v[O],this.littleEndian));var K;d?(1!==q&&0<G&&
(K=(E+x-a[1])*t*b.length+(G+w-a[0]-1)*b.length+O,I+=c[K]),K=(E+x-a[1])*t*b.length+(G+w-a[0])*b.length+O,c[K]=I):(1!==q&&0<G&&(K=(E+x-a[1])*t+G-1+w-a[0],I+=c[O][K]),K=(E+x-a[1])*t+G+w-a[0],c[O][K]=I)}}e(c);return c}catch(Tg){return f(Tg)}},readRasters:function(){var a,b,c;switch(arguments.length){case 0:break;case 1:"function"===typeof arguments[0]?b=arguments[0]:a=arguments[0];break;case 2:"function"===typeof arguments[0]?(b=arguments[0],c=arguments[1]):(a=arguments[0],b=arguments[1]);break;case 3:a=
arguments[0];b=arguments[1];c=arguments[2];break;default:throw Error("Invalid number of arguments passed.");}a=a||{};c=c||function(a){console.error(a)};var d=a.window||[0,0,this.getWidth(),this.getHeight()],e=a.samples;a=a.interleave;if(0>d[0]||0>d[1]||d[2]>this.getWidth()||d[3]>this.getHeight())throw Error("Select window is out of image bounds.");if(d[0]>d[2]||d[1]>d[3])throw Error("Invalid subsets");var f=(d[2]-d[0])*(d[3]-d[1]),g;if(e)for(g=0;g<e.length;++g){if(e[g]>=this.fileDirectory.SamplesPerPixel)throw new RangeError("Invalid sample index '"+
e[g]+"'.");}else for(e=[],g=0;g<this.fileDirectory.SamplesPerPixel;++g)e.push(g);var h;if(a)g=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,h=Math.max.apply(null,this.fileDirectory.BitsPerSample),h=fg(g,h,f*e.length);else for(h=[],g=0;g<e.length;++g)h.push(this.getArrayForSample(e[g],f));if(this.getDecoder().isAsync()){if(!b)throw Error("No callback specified for asynchronous raster reading.");return this._readRasterAsync(d,e,h,a,b,c)}return this._readRaster(d,
e,h,a,b||function(){},c)},readRGB:function(){var a=null,b=null,c=null;switch(arguments.length){case 0:break;case 1:"function"===typeof arguments[0]?b=arguments[0]:a=arguments[0];break;case 2:"function"===typeof arguments[0]?(b=arguments[0],c=arguments[1]):(a=arguments[0],b=arguments[1]);break;case 3:a=arguments[0];b=arguments[1];c=arguments[2];break;default:throw Error("Invalid number of arguments passed.");}var a=a||{},c=c||function(a){console.error(a)},d=a.window||[0,0,this.getWidth(),this.getHeight()];
if(0>d[0]||0>d[1]||d[2]>this.getWidth()||d[3]>this.getHeight())throw Error("Select window is out of image bounds.");if(d[0]>d[2]||d[1]>d[3])throw Error("Invalid subsets");var e=d[2]-d[0],f=d[3]-d[1],g=this.fileDirectory.PhotometricInterpretation,h=Math.pow(2,this.fileDirectory.BitsPerSample[0]);if(g===X.photometricInterpretations.RGB)return this.readRasters({window:a.window,interleave:!0},b,c);switch(g){case X.photometricInterpretations.WhiteIsZero:case X.photometricInterpretations.BlackIsZero:case X.photometricInterpretations.Palette:d=
[0];break;case X.photometricInterpretations.CMYK:d=[0,1,2,3];break;case X.photometricInterpretations.YCbCr:case X.photometricInterpretations.CIELab:d=[0,1,2];break;default:throw Error("Invalid or unsupported photometric interpretation.");}var l=this.fileDirectory;return this.readRasters({window:a.window,interleave:!0,samples:d},function(a){switch(g){case X.photometricInterpretations.WhiteIsZero:return b(Db.fromWhiteIsZero(a,h,e,f));case X.photometricInterpretations.BlackIsZero:return b(Db.fromBlackIsZero(a,
h,e,f));case X.photometricInterpretations.Palette:return b(Db.fromPalette(a,l.ColorMap,e,f));case X.photometricInterpretations.CMYK:return b(Db.fromCMYK(a,e,f));case X.photometricInterpretations.YCbCr:return b(Db.fromYCbCr(a,e,f));case X.photometricInterpretations.CIELab:return b(Db.fromCIELab(a,e,f))}},c)},getTiePoints:function(){if(!this.fileDirectory.ModelTiepoint)return[];for(var a=[],b=0;b<this.fileDirectory.ModelTiepoint.length;b+=6)a.push({i:this.fileDirectory.ModelTiepoint[b],j:this.fileDirectory.ModelTiepoint[b+
1],k:this.fileDirectory.ModelTiepoint[b+2],x:this.fileDirectory.ModelTiepoint[b+3],y:this.fileDirectory.ModelTiepoint[b+4],z:this.fileDirectory.ModelTiepoint[b+5]});return a},getGDALMetadata:function(){var a={};if(!this.fileDirectory.GDAL_METADATA)return null;for(var b=this.fileDirectory.GDAL_METADATA,b=X.parseXml(b.substring(0,b.length-1)),b=b.evaluate("GDALMetadata/Item",b,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null),c=0;c<b.snapshotLength;++c){var d=b.snapshotItem(c);a[d.getAttribute("name")]=
d.textContent}return a},getOrigin:function(){var a=this.fileDirectory.ModelTiepoint;if(!a||6!==a.length)throw Error("The image does not have an affine transformation.");return[a[3],a[4],a[5]]},getResolution:function(){if(!this.fileDirectory.ModelPixelScale)throw Error("The image does not have an affine transformation.");return[this.fileDirectory.ModelPixelScale[0],this.fileDirectory.ModelPixelScale[1],this.fileDirectory.ModelPixelScale[2]]},pixelIsArea:function(){return 1===this.geoKeys.GTRasterTypeGeoKey},
getBoundingBox:function(){var a=this.getOrigin(),b=this.getResolution(),c=a[0],a=a[1],d=c+b[0]*this.getWidth(),b=a+b[1]*this.getHeight();return[Math.min(c,d),Math.min(a,b),Math.max(c,d),Math.max(a,b)]}};var xh=function(){function a(a,c){for(var b=0;b<c.length;b++){var e=c[b];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),Mg=function(){function a(b){if(!(this instanceof
a))throw new TypeError("Cannot call a class as a function");this._dataView=new DataView(b)}xh(a,[{key:"getUint64",value:function(a,c){var b=this.getUint32(a,c);a=this.getUint32(a+4,c);return c?b<<32|a:a<<32|b}},{key:"getInt64",value:function(a,c){var b;if(c)return b=this.getInt32(a,c),a=this.getUint32(a+4,c),b<<32|a;b=this.getUint32(a,c);a=this.getInt32(a+4,c);return a<<32|b}},{key:"getUint8",value:function(a,c){return this._dataView.getUint8(a,c)}},{key:"getInt8",value:function(a,c){return this._dataView.getInt8(a,
c)}},{key:"getUint16",value:function(a,c){return this._dataView.getUint16(a,c)}},{key:"getInt16",value:function(a,c){return this._dataView.getInt16(a,c)}},{key:"getUint32",value:function(a,c){return this._dataView.getUint32(a,c)}},{key:"getInt32",value:function(a,c){return this._dataView.getInt32(a,c)}},{key:"getFloat32",value:function(a,c){return this._dataView.getFloat32(a,c)}},{key:"getFloat64",value:function(a,c){return this._dataView.getFloat64(a,c)}},{key:"buffer",get:function(){return this._dataView.buffer}}]);
return a}(),R=X.fieldTypes,gg=X.fieldTagNames,yh=X.arrayFields,zh=X.geoKeyNames;pf.prototype={getOffset:function(a){return this.bigTiff?this.dataView.getUint64(a,this.littleEndian):this.dataView.getUint32(a,this.littleEndian)},getFieldTypeLength:function(a){switch(a){case R.BYTE:case R.ASCII:case R.SBYTE:case R.UNDEFINED:return 1;case R.SHORT:case R.SSHORT:return 2;case R.LONG:case R.SLONG:case R.FLOAT:return 4;case R.RATIONAL:case R.SRATIONAL:case R.DOUBLE:case R.LONG8:case R.SLONG8:case R.IFD8:return 8;
default:throw new RangeError("Invalid field type: "+a);}},getValues:function(a,b,c){var d,e,f=this.getFieldTypeLength(a),g;switch(a){case R.BYTE:case R.ASCII:case R.UNDEFINED:d=new Uint8Array(b);e=this.dataView.getUint8;break;case R.SBYTE:d=new Int8Array(b);e=this.dataView.getInt8;break;case R.SHORT:d=new Uint16Array(b);e=this.dataView.getUint16;break;case R.SSHORT:d=new Int16Array(b);e=this.dataView.getInt16;break;case R.LONG:d=new Uint32Array(b);e=this.dataView.getUint32;break;case R.SLONG:d=new Int32Array(b);
e=this.dataView.getInt32;break;case R.LONG8:case R.IFD8:d=Array(b);e=this.dataView.getUint64;break;case R.SLONG8:d=Array(b);e=this.dataView.getInt64;break;case R.RATIONAL:d=new Uint32Array(2*b);e=this.dataView.getUint32;break;case R.SRATIONAL:d=new Int32Array(2*b);e=this.dataView.getInt32;break;case R.FLOAT:d=new Float32Array(b);e=this.dataView.getFloat32;break;case R.DOUBLE:d=new Float64Array(b);e=this.dataView.getFloat64;break;default:throw new RangeError("Invalid field type: "+a);}if(a!==R.RATIONAL&&
a!==R.SRATIONAL)for(g=0;g<b;++g)d[g]=e.call(this.dataView,c+g*f,this.littleEndian);else for(g=0;g<b;g+=2)d[g]=e.call(this.dataView,c+g*f,this.littleEndian),d[g+1]=e.call(this.dataView,c+(g*f+4),this.littleEndian);return a===R.ASCII?String.fromCharCode.apply(null,d):d},getFieldValues:function(a,b,c,d){this.getFieldTypeLength(b)*c<=(this.bigTiff?8:4)||(d=this.getOffset(d));d=this.getValues(b,c,d);return 1===c&&-1===yh.indexOf(a)&&b!==R.RATIONAL&&b!==R.SRATIONAL?d[0]:d},parseGeoKeyDirectory:function(a){var b=
a.GeoKeyDirectory;if(!b)return null;for(var c={},d=4;d<4*b[3];d+=4){var e=zh[b[d]],f=b[d+1]?gg[b[d+1]]:null,g=b[d+2],h=b[d+3];if(f){f=a[f];if("undefined"===typeof f||null===f)throw Error("Could not get value of geoKey '"+e+"'.");"string"===typeof f?f=f.substring(h,h+g-1):f.subarray&&(f=f.subarray(h,h+g-1))}else f=h;c[e]=f}return c},parseFileDirectories:function(a){var b=a;for(a=[];0!==b;){for(var c=this.bigTiff?this.dataView.getUint64(b,this.littleEndian):this.dataView.getUint16(b,this.littleEndian),
d={},b=b+(this.bigTiff?8:2),e=0;e<c;b+=this.bigTiff?20:12,++e){var f=this.dataView.getUint16(b,this.littleEndian),g=this.dataView.getUint16(b+2,this.littleEndian),h=this.bigTiff?this.dataView.getUint64(b+4,this.littleEndian):this.dataView.getUint32(b+4,this.littleEndian);d[gg[f]]=this.getFieldValues(f,g,h,b+(this.bigTiff?12:8))}a.push([d,this.parseGeoKeyDirectory(d)]);b=this.getOffset(b)}return a},getImage:function(a){a=this.fileDirectories[a||0];if(!a)throw new RangeError("Invalid image index");
return new of(a[0],a[1],this.dataView,this.littleEndian,this.cache)},getImageCount:function(){return this.fileDirectories.length}};var Ah=va(function(a){var b=function(a,b){var c,d,g,h;if("string"===typeof a||a instanceof String)for(c=new ArrayBuffer(2*a.length),h=new Uint16Array(c),d=0,g=a.length;d<g;++d)h[d]=a.charCodeAt(d);else if(a instanceof ArrayBuffer)c=a;else throw Error("Invalid input data given.");return new pf(c,b)};a.exports.parse=b;"undefined"!==typeof window&&(window.GeoTIFF={parse:b})}),
Ec=function(){var a;a=A.call(this)||this;a.addInputValidator(0,ArrayBuffer);return a};$jscomp.inherits(Ec,A);Ec.prototype._run=function(){var a=this._getInput(0);if(a){var b=!1;try{var c=Ah.parse(a).getImage(),d=c.readRasters({interleave:!0}),e=c.getWidth(),f=c.getHeight(),g=c.getSamplesPerPixel();g==d.length/(e*f)&&(b=!0);b?this._addOutput(E).setData(d,e,f,g):console.warn("Tiff support is experimental and this file is not compatible.")}catch(h){console.warn("This buffer is not from a TIFF file.")}}else console.warn('TiffDecoder requires an ArrayBuffer as input "0". Unable to continue.')};
var Fc=function(){this._rawData=null};Fc.prototype.setRawData=function(a){this._rawData=a};Fc.prototype.parse=function(){var a=null;try{a=this._parseNoException()}catch(b){console.warn("This file is not compatible.")}return a};Fc.prototype._parseNoException=function(){if(!this._rawData)return console.warn("The input buffer is null. Nothing to be parsed here."),null;var a=this._rawData,b=new DataView(a),c,d,e,f,g,h,l;b.getUint16(0,!0);c=b.getUint8(2);c=new Uint8Array(a,3,c);c=String.fromCharCode.apply(String,
c);d=b.getUint16(83,!0);e=b.getUint16(85,!0);f=b.getUint16(87,!0);g=b.getUint16(89,!0);h=b.getUint16(91,!0);l=b.getUint16(93,!0);for(var k=d*e*f*g,m=k*l,r=new Float32Array(k),t=0;t<k;t++)r[t]=b.getFloat32(95+t*l,!0);h=95+m+h;l=b.getUint8(h);l=new Uint8Array(a,h+1,l);String.fromCharCode.apply(String,l);l=h+9;h=Array(8);for(t=0;8>t;t++)k={total:b.getUint16(l+6*t+4,!0),labels:null},h[t]=k;h[0].description="list of labels for measure dimension";h[1].description="list of labels for duration dimension";
h[2].description="list of labels for first space dimension";h[3].description="list of labels for second space dimension";h[4].description="list of scales";h[5].description="list of units";h[6].description="list of transformations";h[7].description="list of contexts";l+=48;for(t=0;t<h.length-2;t++){m=h[t].total;h[t].labels=m?Array(m).fill(""):0;for(var p=0;p<m;p++){if(k=b.getUint8(l)){var q=new Uint8Array(a,l+1,k),q=String.fromCharCode.apply(String,[].concat($jscomp.arrayFromIterable(q)));h[t].labels[p]=
q.replace("\u00e6","\u00b5").replace("\u00fd","\u00b2")}l+=k+1}}t=b.getUint8(l);h[6].labels=t;l+=h[6].total*(t+1);t=h[h.length-1];t.contextsByteLength=Array(t.total);t.types=Array(t.total);t.values=Array(t.total);p=/[a-zA-Z ]*\:{1}([a-zA-Z]*)[\[]?\d*[\]]?/;t.labels=Array(t.total).fill("");for(m=0;m<t.total;m++)k=b.getUint8(l),q=new Uint8Array(a,l+1,k),q=String.fromCharCode.apply(String,q),t.labels[m]=q.split(":")[0],t.contextsByteLength[m]=b.getUint16(l+k+1,!0),q=p.exec(q),t.types[m]=q?q[1].toLowerCase():
null,l+=k+3;for(m=0;m<t.total;m++){k=null;if("single"===t.types[m])k=b.getFloat32(l,!0);else if("boolean"===t.types[m])for(k=Array(t.contextsByteLength[m]),q=0;q<k.length;q++)k[q]=!!b.getUint8(l+q);else"string"===t.types[m]&&(k=b.getUint8(l),q=new Uint8Array(a,l+1,k),k=String.fromCharCode.apply(String,q));l+=t.contextsByteLength[m];t.values[m]=k}for(t=0;t<h.length;t++)delete h[t].total;delete h[7].contextsByteLength;delete h[7].types;return{metadata:{comment:c,sizes:{measure:d,duration:e,firstSpace:f,
secondSpace:g},informationList:h},data:r}};var yd=function(){var a;a=A.call(this)||this;a.addInputValidator(0,ArrayBuffer);a.setMetadata("debug",!1);a._view=null;return a};$jscomp.inherits(yd,A);yd.prototype._run=function(){var a=this._getInput(0);if(a){var b=new Fc;b.setRawData(a);(a=b.parse())&&(this._output[0]=a)}else console.warn('EegModDecoder requires an ArrayBuffer as input "0". Unable to continue.')};var Gc=va(function(a){function b(a){this.value=a}function c(a,b,c){var f=[],e=[],m=!0;return function z(a){function r(){if("object"===
typeof n.node&&null!==n.node){n.keys&&n.node_===n.node||(n.keys=g(n.node));n.isLeaf=0==n.keys.length;for(var b=0;b<e.length;b++)if(e[b].node_===a){n.circular=e[b];break}}else n.isLeaf=!0,n.keys=null;n.notLeaf=!n.isLeaf;n.notRoot=!n.isRoot}var t,p,q,x,v=!0,n={node:c?d(a):a,node_:a,path:[].concat(f),parent:e[e.length-1],parents:e,key:f.slice(-1)[0],isRoot:0===f.length,level:f.length,circular:null,update:function(a,b){n.isRoot||(n.parent.node[n.key]=a);n.node=a;b&&(v=!1)},"delete":function(a){delete n.parent.node[n.key];
a&&(v=!1)},remove:function(a){h(n.parent.node)?n.parent.node.splice(n.key,1):delete n.parent.node[n.key];a&&(v=!1)},keys:null,before:function(a){t=a},after:function(a){p=a},pre:function(a){q=a},post:function(a){x=a},stop:function(){m=!1},block:function(){v=!1}};if(!m)return n;r();var u=b.call(n,n.node);void 0!==u&&n.update&&n.update(u);t&&t.call(n,n.node);if(!v)return n;"object"!=typeof n.node||null===n.node||n.circular||(e.push(n),r(),l(n.keys,function(a,b){f.push(a);q&&q.call(n,n.node[a],a);var d=
z(n.node[a]);c&&k.call(n.node,a)&&(n.node[a]=d.node);d.isLast=b==n.keys.length-1;d.isFirst=0==b;x&&x.call(n,d);f.pop()}),e.pop());p&&p.call(n,n.node);return n}(a).node}function d(a){if("object"===typeof a&&null!==a){var b;if(h(a))b=[];else if("[object Date]"===e(a))b=new Date(a.getTime?a.getTime():a);else if("[object RegExp]"===e(a))b=new RegExp(a);else if("[object Error]"===e(a))b={message:a.message};else if("[object Boolean]"===e(a))b=new Boolean(a);else if("[object Number]"===e(a))b=new Number(a);
else if("[object String]"===e(a))b=new String(a);else if(Object.create&&Object.getPrototypeOf)b=Object.create(Object.getPrototypeOf(a));else if(a.constructor===Object)b={};else{var c=function(){};c.prototype=a.constructor&&a.constructor.prototype||a.__proto__||{};b=new c}l(g(a),function(c){b[c]=a[c]});return b}return a}function e(a){return Object.prototype.toString.call(a)}var f=a.exports=function(a){return new b(a)};b.prototype.get=function(a){for(var b=this.value,c=0;c<a.length;c++){var d=a[c];
if(!b||!k.call(b,d)){b=void 0;break}b=b[d]}return b};b.prototype.has=function(a){for(var b=this.value,c=0;c<a.length;c++){var d=a[c];if(!b||!k.call(b,d))return!1;b=b[d]}return!0};b.prototype.set=function(a,b){for(var c=this.value,d=0;d<a.length-1;d++){var f=a[d];k.call(c,f)||(c[f]={});c=c[f]}return c[a[d]]=b};b.prototype.map=function(a){return c(this.value,a,!0)};b.prototype.forEach=function(a){return this.value=c(this.value,a,!1)};b.prototype.reduce=function(a,b){var c=1===arguments.length,d=c?this.value:
b;this.forEach(function(b){this.isRoot&&c||(d=a.call(this,d,b))});return d};b.prototype.paths=function(){var a=[];this.forEach(function(b){a.push(this.path)});return a};b.prototype.nodes=function(){var a=[];this.forEach(function(b){a.push(this.node)});return a};b.prototype.clone=function(){var a=[],b=[];return function p(c){for(var f=0;f<a.length;f++)if(a[f]===c)return b[f];if("object"===typeof c&&null!==c){var e=d(c);a.push(c);b.push(e);l(g(c),function(a){e[a]=p(c[a])});a.pop();b.pop();return e}return c}(this.value)};
var g=Object.keys||function(a){var b=[],c;for(c in a)b.push(c);return b},h=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},l=function(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c++)b(a[c],c,a)};l(g(b.prototype),function(a){f[a]=function(c){var d=[].slice.call(arguments,1),f=new b(c);return f[a].apply(f,d)}});var k=Object.hasOwnProperty||function(a,b){return b in a}}),K=function(){};K.isPlatformLittleEndian=function(){var a=new Uint32Array([305419896]);
return 18!=(new Uint8Array(a.buffer,a.byteOffset,a.byteLength))[0]};K.arrayBufferToString16=function(a){return String.fromCharCode.apply(null,new Uint16Array(a))};K.string16ToArrayBuffer=function(a){for(var b=new ArrayBuffer(2*a.length),c=new Uint16Array(b),d=0;d<a.length;d++)c[d]=a.charCodeAt(d);return b};K.arrayBufferToString8=function(a){return String.fromCharCode.apply(null,new Uint8Array(a))};K.string8ToArrayBuffer=function(a){for(var b=new ArrayBuffer(a.length),c=new Uint8Array(b),d=0;d<a.length;d++)c[d]=
a.charCodeAt(d);return b};K.setString8InBuffer=function(a,b,c){c=void 0===c?0:c;if(0>c)console.warn("The byte offset cannot be negative.");else if(b&&b instanceof ArrayBuffer)if(a.length+c>b.byteLength)console.warn("The string is too long to be writen in this buffer.");else{b=new Uint8Array(b);for(var d=0;d<a.length;d++)b[d+c]=a.charCodeAt(d)}else console.warn("The buffer must be a valid ArrayBuffer.")};K.getString8FromBuffer=function(a,b,c){c=void 0===c?0:c;return 0>c?(console.warn("The byte offset cannot be negative."),
null):a&&a instanceof ArrayBuffer?b+c>a.byteLength?(console.warn("The string is too long to be writen in this buffer."),null):String.fromCharCode.apply(null,new Uint8Array(a,c,b)):(console.warn("The buffer must be a valid ArrayBuffer."),null)};K.objectToArrayBuffer=function(a){var b=null;a=K.makeSerializeFriendly(a);try{var c=JSON.stringify(a),b=K.string16ToArrayBuffer(c)}catch(d){console.warn(d)}return b};K.ArrayBufferToObject=function(a){var b=null;try{var c=K.arrayBufferToString16(a),b=JSON.parse(c)}catch(d){console.warn(d)}return b};
K.isTypedArray=function(a){return a instanceof Int8Array||a instanceof Uint8Array||a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array};K.mergeBuffers=function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c].byteLength;for(var b=new Uint8Array(b),d=0,c=0;c<a.length;c++)b.set(new Uint8Array(a[c]),d),d+=a[c].byteLength;return b.buffer};K.getGlobalObject=function(){var a=null;
try{a=window}catch(b){try{a=GLOBAL}catch(c){return console.warn("You are not in a Javascript environment?? Weird."),null}}return a};K.extractTypedArray=function(a,b,c,d){if(!a)return console.warn("Input Buffer is null."),null;if(!(a instanceof ArrayBuffer))return console.warn("Buffer must be of type ArrayBuffer"),null;if(0>=d)return console.warn("The number of elements to fetch must be greater than 0"),null;if(0>b)return console.warn("The byte offset must be possitive or 0"),null;if(b>=a.byteLength)return console.warn("The offset cannot be larger than the size of the buffer."),
null;if(c instanceof Function&&!("BYTES_PER_ELEMENT"in c))return console.warn("ArrayType must be a typed array constructor function."),null;if(c.BYTES_PER_ELEMENT*d+b>a.byteLength)console.warn("The requested number of elements is too large for this buffer");else return a=a.slice(b,b+d*c.BYTES_PER_ELEMENT),new c(a)};K.getTypedArrayInfo=function(a){var b=null,c=!1;a instanceof Int8Array?(b="int",c=!1):a instanceof Uint8Array?(b="int",c=!0):a instanceof Uint8ClampedArray?(b="int",c=!0):a instanceof Int16Array?
(b="int",c=!1):a instanceof Uint16Array?(b="int",c=!0):a instanceof Int32Array?(b="int",c=!1):a instanceof Uint32Array?(b="int",c=!0):a instanceof Float32Array?(b="float",c=!1):a instanceof Float64Array&&(b="float",c=!1);return{type:b,signed:c,bytesPerElements:a.BYTES_PER_ELEMENT,byteLength:a.byteLength,length:a.length}};K.howManyTypedArrayAttributes=function(a){var b=0;Gc(a).forEach(function(a){b+=K.isTypedArray(a)});return b};K.hasCircularReference=function(a){var b=!1;Gc(a).forEach(function(a){this.circular&&
(b=!0)});return b};K.removeCircularReference=function(a){var b=!1;a=Gc(a).map(function(a){this.circular&&(this.remove(),b=!0)});return b?a:null};K.replaceTypedArrayAttributesByArrays=function(a){var b=!1;a=Gc(a).map(function(a){if(K.isTypedArray(a)){for(var c=Object.keys(a).length,e=Array(c),f=0;f<c;f++)e[f]=a[f];this.update(e);b=!0}});return b?a:null};K.makeSerializeFriendly=function(a){var b=K.removeCircularReference(a);b&&(a=b);(b=K.replaceTypedArrayAttributesByArrays(a))&&(a=b);return a};var Da=
function(){this._compress=!1;this.reset()};Da.prototype.reset=function(){this._output=this._inputCase=this._input=null};Da.prototype.enableDataCompression=function(a){this._compress=a};Da.prototype.setInput=function(a){if(this._inputCase=Da.isGoodCandidate(a))this._input=a};Da.prototype.getOutput=function(){return this._output};Da.isGoodCandidate=function(a){if(!a)return console.warn("Input object cannot be null."),!1;if(!("_metadata"in a))return console.warn("Input object must contain a _metadata object."),
!1;if(!("_data"in a))return console.warn("Input object must contain a _data object."),!1;var b=a._metadata;a=a._data;try{JSON.stringify(b)}catch(c){return console.warn("The metadata object contains cyclic structures. Cannot be used."),!1}b=Da.determineDataCase(a);null===b&&console.warn("The input is invalid.");return b};Da.prototype.run=function(){var a=this._input;if(a&&this._inputCase){var b=a._data,c=null,d=[],e=!1;switch(this._inputCase){case 1:var f=this._getDataSubsetInfo(b);f.compressedByteLength=
null;this._compress&&(c=Ca.deflate(b.buffer),f.compressedByteLength=c.byteLength);d.push(f);break;case 2:for(var e=!0,c=[],g=0;g<b.length;g++){f=this._getDataSubsetInfo(b[g]);f.isTypedArray||(b[g]=new Uint8Array(K.objectToArrayBuffer(b[g])),f.byteLength=b[g].byteLength);if(this._compress){var h=Ca.deflate(b[g].buffer);f.compressedByteLength=h.byteLength;c.push(h)}d.push(f)}break;case 3:f=this._getDataSubsetInfo(b);b=new Uint8Array(K.objectToArrayBuffer(b));f.byteLength=b.byteLength;this._compress&&
(c=Ca.deflate(b),f.compressedByteLength=c.byteLength);d.push(f);break;default:console.warn("A problem occured.");return}this._compress&&(b=c);g=K.objectToArrayBuffer(a._metadata);a=K.objectToArrayBuffer({byteStreamInfo:d,originalBlockType:a.constructor.name,metadataByteLength:g.byteLength});a=[(new Uint8Array([+K.isPlatformLittleEndian()])).buffer,(new Uint32Array([a.byteLength])).buffer,a,g];if(e)for(g=0;g<b.length;g++)a.push(b[g].buffer);else a.push(b.buffer);this._output=K.mergeBuffers(a)}else console.warn("An input must be given to the PixBlockEncoder.")};
Da.determineDataCase=function(a){return a instanceof Object?K.isTypedArray(a)?1:a instanceof Array?2:3:null};Da.prototype._getDataSubsetInfo=function(a){K.isTypedArray(a)?(a=K.getTypedArrayInfo(a),a.isTypedArray=!0):a={type:a.constructor.name,compressedByteLength:null,byteLength:null,length:null,isTypedArray:!1};return a};var Eb=function(){this.reset()};Eb.prototype.reset=function(){this._output=this._input=null};Eb.prototype.setInput=function(a){a instanceof ArrayBuffer?this._input=a:console.warn("Input should be a valid ArrayBuffer")};
Eb.prototype.getOutput=function(){return this._output};Eb.prototype.run=function(){var a=this._input,b=new DataView(a);b.getUint8(0);var c=0;b.getUint8(0);for(var c=c+1,d=b.getUint32(1,c),c=c+4,b=a.slice(c,c+d),b=K.ArrayBufferToObject(b),c=c+d,d=a.slice(c,c+b.metadataByteLength),d=K.ArrayBufferToObject(d),c=c+b.metadataByteLength,e=[],f=0;f<b.byteStreamInfo.length;f++){var g=b.byteStreamInfo[f].compressedByteLength,h=this._getDataTypeFromByteStreamInfo(b.byteStreamInfo[f]),l=b.byteStreamInfo[f].isTypedArray;
if(g){var k=new Uint8Array(a,c,g),k=Ca.inflate(k),h=l?new h(k.buffer):K.ArrayBufferToObject(k.buffer);e.push(h);c+=g}else l?h=K.extractTypedArray(a,c,this._getDataTypeFromByteStreamInfo(b.byteStreamInfo[f]),b.byteStreamInfo[f].length):(g=K.extractTypedArray(a,c,Uint8Array,b.byteStreamInfo[f].byteLength),h=K.ArrayBufferToObject(g.buffer)),e.push(h),c+=b.byteStreamInfo[f].byteLength}1==e.length&&(e=e[0]);this._output={originalBlockType:b.originalBlockType,_data:e,_metadata:d}};Eb.prototype._getDataTypeFromByteStreamInfo=
function(a){var b="Object",c=K.getGlobalObject();"int"===a.type?(b=a.signed?"Uint":"Int",b+=8*a.bytesPerElements+"Array"):"float"===a.type&&(b="Float"+(8*a.bytesPerElements+"Array"),c=K.getGlobalObject());return c[b]};var hg=va(function(a){(function(){function b(a){a?(r[0]=r[16]=r[1]=r[2]=r[3]=r[4]=r[5]=r[6]=r[7]=r[8]=r[9]=r[10]=r[11]=r[12]=r[13]=r[14]=r[15]=0,this.blocks=r,this.buffer8=t):f?(a=new ArrayBuffer(68),this.buffer8=new Uint8Array(a),this.blocks=new Uint32Array(a)):this.blocks=[0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=0;this.finalized=this.hashed=!1;this.first=!0}var c="object"===typeof window,d=c?window:{};d.JS_MD5_NO_WINDOW&&(c=!1);var c=!c&&"object"===typeof self,e=!d.JS_MD5_NO_NODE_JS&&"object"===typeof db&&db.versions&&db.versions.node;e?d=pb:c&&(d=self);var c=!d.JS_MD5_NO_COMMON_JS&&!0&&a.exports,f=!d.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!==typeof ArrayBuffer,g="0123456789abcdef".split(""),h=[128,32768,8388608,-2147483648],l=[0,
8,16,24],k="hex array digest buffer arrayBuffer base64".split(" "),m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),r=[],t;if(f){var p=new ArrayBuffer(68);t=new Uint8Array(p);r=new Uint32Array(p)}if(d.JS_MD5_NO_NODE_JS||!Array.isArray)Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)};var q=function(a){return function(c){return(new b(!0)).update(c)[a]()}},v=function(a){var b=eval("require('crypto')"),c=eval("require('buffer').Buffer");
return function(d){if("string"===typeof d)return b.createHash("md5").update(d,"utf8").digest("hex");if(null===d||void 0===d)throw"input is invalid type";d.constructor===ArrayBuffer&&(d=new Uint8Array(d));return Array.isArray(d)||ArrayBuffer.isView(d)||d.constructor===c?b.createHash("md5").update(new c(d)).digest("hex"):a(d)}};b.prototype.update=function(a){if(!this.finalized){var b="string"!=typeof a;if(b){if(null===a||void 0===a)throw"input is invalid type";a.constructor===d.ArrayBuffer&&(a=new Uint8Array(a))}var c=
a.length;if(b&&("number"!==typeof c||!(Array.isArray(a)||f&&ArrayBuffer.isView(a))))throw"input is invalid type";for(var e,g=0,h,k=this.blocks,m=this.buffer8;g<c;){this.hashed&&(this.hashed=!1,k[0]=k[16],k[16]=k[1]=k[2]=k[3]=k[4]=k[5]=k[6]=k[7]=k[8]=k[9]=k[10]=k[11]=k[12]=k[13]=k[14]=k[15]=0);if(b)if(f)for(h=this.start;g<c&&64>h;++g)m[h++]=a[g];else for(h=this.start;g<c&&64>h;++g)k[h>>2]|=a[g]<<l[h++&3];else if(f)for(h=this.start;g<c&&64>h;++g)e=a.charCodeAt(g),128>e?m[h++]=e:(2048>e?m[h++]=192|e>>
6:(55296>e||57344<=e?m[h++]=224|e>>12:(e=65536+((e&1023)<<10|a.charCodeAt(++g)&1023),m[h++]=240|e>>18,m[h++]=128|e>>12&63),m[h++]=128|e>>6&63),m[h++]=128|e&63);else for(h=this.start;g<c&&64>h;++g)e=a.charCodeAt(g),128>e?k[h>>2]|=e<<l[h++&3]:(2048>e?k[h>>2]|=(192|e>>6)<<l[h++&3]:(55296>e||57344<=e?k[h>>2]|=(224|e>>12)<<l[h++&3]:(e=65536+((e&1023)<<10|a.charCodeAt(++g)&1023),k[h>>2]|=(240|e>>18)<<l[h++&3],k[h>>2]|=(128|e>>12&63)<<l[h++&3]),k[h>>2]|=(128|e>>6&63)<<l[h++&3]),k[h>>2]|=(128|e&63)<<l[h++&
3]);this.lastByteIndex=h;this.bytes+=h-this.start;64<=h?(this.start=h-64,this.hash(),this.hashed=!0):this.start=h}return this}};b.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var a=this.blocks,b=this.lastByteIndex;a[b>>2]|=h[b&3];56<=b&&(this.hashed||this.hash(),a[0]=a[16],a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0);a[14]=this.bytes<<3;this.hash()}};b.prototype.hash=function(){var a,b,c,d,e,f=this.blocks;this.first?(a=f[0]-680876937,
a=(a<<7|a>>>25)-271733879<<0,d=(-1732584194^a&2004318071)+f[1]-117830708,d=(d<<12|d>>>20)+a<<0,c=(-271733879^d&(a^-271733879))+f[2]-1126478375,c=(c<<17|c>>>15)+d<<0,b=(a^c&(d^a))+f[3]-1316259209):(a=this.h0,b=this.h1,c=this.h2,d=this.h3,a+=(d^b&(c^d))+f[0]-680876936,a=(a<<7|a>>>25)+b<<0,d+=(c^a&(b^c))+f[1]-389564586,d=(d<<12|d>>>20)+a<<0,c+=(b^d&(a^b))+f[2]+606105819,c=(c<<17|c>>>15)+d<<0,b+=(a^c&(d^a))+f[3]-1044525330);b=(b<<22|b>>>10)+c<<0;a+=(d^b&(c^d))+f[4]-176418897;a=(a<<7|a>>>25)+b<<0;d+=(c^
a&(b^c))+f[5]+1200080426;d=(d<<12|d>>>20)+a<<0;c+=(b^d&(a^b))+f[6]-1473231341;c=(c<<17|c>>>15)+d<<0;b+=(a^c&(d^a))+f[7]-45705983;b=(b<<22|b>>>10)+c<<0;a+=(d^b&(c^d))+f[8]+1770035416;a=(a<<7|a>>>25)+b<<0;d+=(c^a&(b^c))+f[9]-1958414417;d=(d<<12|d>>>20)+a<<0;c+=(b^d&(a^b))+f[10]-42063;c=(c<<17|c>>>15)+d<<0;b+=(a^c&(d^a))+f[11]-1990404162;b=(b<<22|b>>>10)+c<<0;a+=(d^b&(c^d))+f[12]+1804603682;a=(a<<7|a>>>25)+b<<0;d+=(c^a&(b^c))+f[13]-40341101;d=(d<<12|d>>>20)+a<<0;c+=(b^d&(a^b))+f[14]-1502002290;c=(c<<
17|c>>>15)+d<<0;b+=(a^c&(d^a))+f[15]+1236535329;b=(b<<22|b>>>10)+c<<0;a+=(c^d&(b^c))+f[1]-165796510;a=(a<<5|a>>>27)+b<<0;d+=(b^c&(a^b))+f[6]-1069501632;d=(d<<9|d>>>23)+a<<0;c+=(a^b&(d^a))+f[11]+643717713;c=(c<<14|c>>>18)+d<<0;b+=(d^a&(c^d))+f[0]-373897302;b=(b<<20|b>>>12)+c<<0;a+=(c^d&(b^c))+f[5]-701558691;a=(a<<5|a>>>27)+b<<0;d+=(b^c&(a^b))+f[10]+38016083;d=(d<<9|d>>>23)+a<<0;c+=(a^b&(d^a))+f[15]-660478335;c=(c<<14|c>>>18)+d<<0;b+=(d^a&(c^d))+f[4]-405537848;b=(b<<20|b>>>12)+c<<0;a+=(c^d&(b^c))+f[9]+
568446438;a=(a<<5|a>>>27)+b<<0;d+=(b^c&(a^b))+f[14]-1019803690;d=(d<<9|d>>>23)+a<<0;c+=(a^b&(d^a))+f[3]-187363961;c=(c<<14|c>>>18)+d<<0;b+=(d^a&(c^d))+f[8]+1163531501;b=(b<<20|b>>>12)+c<<0;a+=(c^d&(b^c))+f[13]-1444681467;a=(a<<5|a>>>27)+b<<0;d+=(b^c&(a^b))+f[2]-51403784;d=(d<<9|d>>>23)+a<<0;c+=(a^b&(d^a))+f[7]+1735328473;c=(c<<14|c>>>18)+d<<0;b+=(d^a&(c^d))+f[12]-1926607734;b=(b<<20|b>>>12)+c<<0;e=b^c;a+=(e^d)+f[5]-378558;a=(a<<4|a>>>28)+b<<0;d+=(e^a)+f[8]-2022574463;d=(d<<11|d>>>21)+a<<0;e=d^a;c+=
(e^b)+f[11]+1839030562;c=(c<<16|c>>>16)+d<<0;b+=(e^c)+f[14]-35309556;b=(b<<23|b>>>9)+c<<0;e=b^c;a+=(e^d)+f[1]-1530992060;a=(a<<4|a>>>28)+b<<0;d+=(e^a)+f[4]+1272893353;d=(d<<11|d>>>21)+a<<0;e=d^a;c+=(e^b)+f[7]-155497632;c=(c<<16|c>>>16)+d<<0;b+=(e^c)+f[10]-1094730640;b=(b<<23|b>>>9)+c<<0;e=b^c;a+=(e^d)+f[13]+681279174;a=(a<<4|a>>>28)+b<<0;d+=(e^a)+f[0]-358537222;d=(d<<11|d>>>21)+a<<0;e=d^a;c+=(e^b)+f[3]-722521979;c=(c<<16|c>>>16)+d<<0;b+=(e^c)+f[6]+76029189;b=(b<<23|b>>>9)+c<<0;e=b^c;a+=(e^d)+f[9]-
640364487;a=(a<<4|a>>>28)+b<<0;d+=(e^a)+f[12]-421815835;d=(d<<11|d>>>21)+a<<0;e=d^a;c+=(e^b)+f[15]+530742520;c=(c<<16|c>>>16)+d<<0;b+=(e^c)+f[2]-995338651;b=(b<<23|b>>>9)+c<<0;a+=(c^(b|~d))+f[0]-198630844;a=(a<<6|a>>>26)+b<<0;d+=(b^(a|~c))+f[7]+1126891415;d=(d<<10|d>>>22)+a<<0;c+=(a^(d|~b))+f[14]-1416354905;c=(c<<15|c>>>17)+d<<0;b+=(d^(c|~a))+f[5]-57434055;b=(b<<21|b>>>11)+c<<0;a+=(c^(b|~d))+f[12]+1700485571;a=(a<<6|a>>>26)+b<<0;d+=(b^(a|~c))+f[3]-1894986606;d=(d<<10|d>>>22)+a<<0;c+=(a^(d|~b))+f[10]-
1051523;c=(c<<15|c>>>17)+d<<0;b+=(d^(c|~a))+f[1]-2054922799;b=(b<<21|b>>>11)+c<<0;a+=(c^(b|~d))+f[8]+1873313359;a=(a<<6|a>>>26)+b<<0;d+=(b^(a|~c))+f[15]-30611744;d=(d<<10|d>>>22)+a<<0;c+=(a^(d|~b))+f[6]-1560198380;c=(c<<15|c>>>17)+d<<0;b+=(d^(c|~a))+f[13]+1309151649;b=(b<<21|b>>>11)+c<<0;a+=(c^(b|~d))+f[4]-145523070;a=(a<<6|a>>>26)+b<<0;d+=(b^(a|~c))+f[11]-1120210379;d=(d<<10|d>>>22)+a<<0;c+=(a^(d|~b))+f[2]+718787259;c=(c<<15|c>>>17)+d<<0;b+=(d^(c|~a))+f[9]-343485551;b=(b<<21|b>>>11)+c<<0;this.first?
(this.h0=a+1732584193<<0,this.h1=b-271733879<<0,this.h2=c-1732584194<<0,this.h3=d+271733878<<0,this.first=!1):(this.h0=this.h0+a<<0,this.h1=this.h1+b<<0,this.h2=this.h2+c<<0,this.h3=this.h3+d<<0)};b.prototype.hex=function(){this.finalize();var a=this.h0,b=this.h1,c=this.h2,d=this.h3;return g[a>>4&15]+g[a&15]+g[a>>12&15]+g[a>>8&15]+g[a>>20&15]+g[a>>16&15]+g[a>>28&15]+g[a>>24&15]+g[b>>4&15]+g[b&15]+g[b>>12&15]+g[b>>8&15]+g[b>>20&15]+g[b>>16&15]+g[b>>28&15]+g[b>>24&15]+g[c>>4&15]+g[c&15]+g[c>>12&15]+
g[c>>8&15]+g[c>>20&15]+g[c>>16&15]+g[c>>28&15]+g[c>>24&15]+g[d>>4&15]+g[d&15]+g[d>>12&15]+g[d>>8&15]+g[d>>20&15]+g[d>>16&15]+g[d>>28&15]+g[d>>24&15]};b.prototype.toString=b.prototype.hex;b.prototype.digest=function(){this.finalize();var a=this.h0,b=this.h1,c=this.h2,d=this.h3;return[a&255,a>>8&255,a>>16&255,a>>24&255,b&255,b>>8&255,b>>16&255,b>>24&255,c&255,c>>8&255,c>>16&255,c>>24&255,d&255,d>>8&255,d>>16&255,d>>24&255]};b.prototype.array=b.prototype.digest;b.prototype.arrayBuffer=function(){this.finalize();
var a=new ArrayBuffer(16),b=new Uint32Array(a);b[0]=this.h0;b[1]=this.h1;b[2]=this.h2;b[3]=this.h3;return a};b.prototype.buffer=b.prototype.arrayBuffer;b.prototype.base64=function(){for(var a,b,c,d="",f=this.array(),e=0;15>e;)a=f[e++],b=f[e++],c=f[e++],d+=m[a>>>2]+m[(a<<4|b>>>4)&63]+m[(b<<2|c>>>6)&63]+m[c&63];a=f[e];return d+=m[a>>>2]+m[a<<4&63]+"=="};p=function(){var a=q("hex");e&&(a=v(a));a.create=function(){return new b};a.update=function(b){return a.create().update(b)};for(var c=0;c<k.length;++c){var d=
k[c];a[d]=q(d)}return a}();c?a.exports=p:d.md5=p})()}),Pa=function(){this._compress=!0;this.reset()};Pa.MAGIC_NUMBER=function(){return"PIXPIPE_PIXBIN"};Pa.prototype.reset=function(){this._inputs=[];this._output=null;this._options={madeWith:"pixbincodec_js",userObject:null,description:null}};Pa.prototype.enableDataCompression=function(a){this._compress=a};Pa.prototype.setOption=function(a,b){a in this._options&&(this._options[a]=b)};Pa.prototype.addInput=function(a){Da.isGoodCandidate(a)&&this._inputs.push(a)};
Pa.prototype.getOutput=function(){return this._output};Pa.prototype.run=function(){if(this._inputs.length){var a=this,b=new Date,c=K.isPlatformLittleEndian(),d=new Da,b={date:b.toISOString(),createdWith:this._options.madeWith,description:this._options.description,userObject:this._options.userObject,pixblocksInfo:[]},e=[],f=b.pixblocksInfo;this._inputs.forEach(function(b,c){d.setInput(b);d.enableDataCompression(a._compress);d.run();var g=d.getOutput();g?(b={type:b.constructor.name,description:"description"in
b._metadata?b._metadata.description:null,byteLength:g.byteLength,checksum:hg(g)},f.push(b),e.push(g)):console.warn("The input of index "+c+" could not be encoded as a PixBlock.")});e.length||console.warn("No input was compatible for PixBlock encoding.");var b=K.objectToArrayBuffer(b),g=Pa.MAGIC_NUMBER(),h=new ArrayBuffer(g.length+5),l=new DataView(h);K.setString8InBuffer(g,h);l.setUint8(g.length,+c);l.setUint32(g.length+1,b.byteLength,c);c=[h,b].concat(e);this._output=K.mergeBuffers(c)}else console.warn("The encoder must be specified at least one input.")};
var ta=function(){this._verifyChecksum=!1;this._binMeta=this._output=this._input=null;this._parsingInfo={offsetToReachFirstBlock:-1,isLittleEndian:-1};this._decodedBlocks={};this._isValid=!1;this.reset()};ta.prototype.setInput=function(a){this.reset();a instanceof ArrayBuffer&&(this._input=a,this._isValid=this._parseIndex())};ta.prototype.isValid=function(){return this._isValid};ta.prototype.getOutput=function(){return this._output};ta.prototype.getNumberOfBlocks=function(){return this._binMeta.pixblocksInfo.length};
ta.prototype.getBinCreationDate=function(){return this._binMeta.date};ta.prototype.getBinDescription=function(){return this._binMeta.description};ta.prototype.getBinUserObject=function(){return this._binMeta.userObject};ta.prototype.getBlockDescription=function(a){return 0>a||a>=this.getNumberOfBlocks()?(console.warn("The block index is out of range."),null):this._binMeta.pixblocksInfo[a].description};ta.prototype.getBlockType=function(a){return 0>a||a>=this.getNumberOfBlocks()?(console.warn("The block index is out of range."),
null):this._binMeta.pixblocksInfo[a].type};ta.prototype.reset=function(){this._isValid=!1;this._binMeta=this._output=this._input=null;this._parsingInfo={offsetToReachFirstBlock:-1,isLittleEndian:-1};this._decodedBlocks={}};ta.prototype.enableBlockVerification=function(a){this._verifyChecksum=a};ta.prototype._parseIndex=function(){var a=this._input;if(!a)return console.warn("Input cannot be null"),!1;var b=a.byteLength,c=Pa.MAGIC_NUMBER();if(b<c.length+5)return console.warn("This buffer does not match a PixBin file."),
!1;var d=new DataView(a);if(K.getString8FromBuffer(a,c.length)!==c)return console.warn("This file is not of PixBin type. (wrong magic number)"),!1;c=c.length;b=d.getUint8(c);if(0!=b&&1!=b)return console.warn("This file is not of PixBin type. (wrong endianess code)"),!1;c+=1;d=d.getUint32(c,b);c+=4;a=K.ArrayBufferToObject(a.slice(c,c+d));this._parsingInfo.offsetToReachFirstBlock=c+d;this._parsingInfo.isLittleEndian=b;this._binMeta=a;return!0};ta.prototype.fetchBlock=function(a,b){b=void 0===b?!1:b;
var c=this.getNumberOfBlocks();if(0>a||a>=c)return console.warn("The block index is out of range."),null;if(a in this._decodedBlocks&&!b)return this._decodedBlocks[a];b=this._parsingInfo.offsetToReachFirstBlock;for(c=0;c<a;c++)b+=this._binMeta.pixblocksInfo[c].byteLength;c=this._binMeta.pixblocksInfo[a];b=this._input.slice(b,b+c.byteLength);if(this._verifyChecksum&&hg(b)!==c.checksum)return console.warn("The block #"+a+" is corrupted."),null;c=new Eb;c.setInput(b);c.run();b=c.getOutput();return b?
this._decodedBlocks[a]=b:(console.warn("The block #"+a+" could not be decoded."),null)};var Hc=function(){var a;a=A.call(this)||this;a.setMetadata("compress",!0);a.setMetadata("description","no description");a.setMetadata("madeWith","Pixpipejs");a.setMetadata("userObject",null);return a};$jscomp.inherits(Hc,A);Hc.MAGIC_NUMBER=function(){return"PIXPIPE_PIXBIN"};Hc.prototype._run=function(){var a=new Pa;a.enableDataCompression(this.getMetadata("compress"));a.setOption("userObject",this.getMetadata("userObject"));
a.setOption("description",this.getMetadata("description"));a.setOption("madeWith",this.getMetadata("madeWith"));this._forEachInput(function(b,c){a.addInput(c)});a.run();this._output[0]=a.getOutput()};var zd=function(){var a;a=A.call(this)||this;a.addInputValidator(0,ArrayBuffer);a.setMetadata("blockVerification",!1);return a};$jscomp.inherits(zd,A);zd.prototype._run=function(){if(this.hasValidInput()){var a=this._getInput(),b=new ta;b.enableBlockVerification(this.getMetadata("blockVerification"));
b.setInput(a);if(b.isValid()){for(var a={creationDate:b.getBinCreationDate(),description:b.getBinDescription(),userObject:b.getBinUserObject(),numberOfBlocks:b.getNumberOfBlocks()},c=b.getNumberOfBlocks(),d=0;d<c;d++){var e=b.getBlockType(d),f=b.fetchBlock(d),g=null,h=Ua.getCoreType(e);h?(g=new h,g.setRawData(f._data),g.setRawMetadata(f._metadata)):(h=K.getGlobalObject(),e in h&&(g=new h[e],g._metadata=f._metadata,g._data=f._data));this._output[d]=g}c&&(this._output.PixBinMeta=a)}else console.warn("The input buffer is invalid.")}else console.warn("PixBinDecoder can only decode ArrayBuffer.")};
var Ma=[],Ba=[],Rg="undefined"!==typeof Uint8Array?Uint8Array:Array,kd=!1,Bh={}.toString,wf=Array.isArray||function(a){return"[object Array]"==Bh.call(a)};y.TYPED_ARRAY_SUPPORT=void 0!==ob.TYPED_ARRAY_SUPPORT?ob.TYPED_ARRAY_SUPPORT:!0;y.poolSize=8192;y._augment=function(a){a.__proto__=y.prototype;return a};y.from=function(a,b,c){return tf(null,a,b,c)};y.TYPED_ARRAY_SUPPORT&&(y.prototype.__proto__=Uint8Array.prototype,y.__proto__=Uint8Array,$jscomp.initSymbol(),$jscomp.initSymbol(),$jscomp.initSymbol());
y.alloc=function(a,b,c){vf(a);a=0>=a?Ta(null,a):void 0!==b?"string"===typeof c?Ta(null,a).fill(b,c):Ta(null,a).fill(b):Ta(null,a);return a};y.allocUnsafe=function(a){return ld(null,a)};y.allocUnsafeSlow=function(a){return ld(null,a)};y.isBuffer=Gf;y.compare=function(a,b){if(!Na(a)||!Na(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,d=b.length,e=0,f=Math.min(c,d);e<f;++e)if(a[e]!==b[e]){c=a[e];d=b[e];break}return c<d?-1:d<c?1:0};y.isEncoding=function(a){switch(String(a).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};y.concat=function(a,b){if(!wf(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return y.alloc(0);var c;if(void 0===b)for(c=b=0;c<a.length;++c)b+=a[c].length;b=y.allocUnsafe(b);var d=0;for(c=0;c<a.length;++c){var e=a[c];if(!Na(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(b,d);d+=e.length}return b};y.byteLength=uf;y.prototype._isBuffer=!0;y.prototype.swap16=function(){var a=this.length;if(0!==a%2)throw new RangeError("Buffer size must be a multiple of 16-bits");
for(var b=0;b<a;b+=2)nb(this,b,b+1);return this};y.prototype.swap32=function(){var a=this.length;if(0!==a%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<a;b+=4)nb(this,b,b+3),nb(this,b+1,b+2);return this};y.prototype.swap64=function(){var a=this.length;if(0!==a%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<a;b+=8)nb(this,b,b+7),nb(this,b+1,b+6),nb(this,b+2,b+5),nb(this,b+3,b+4);return this};y.prototype.toString=function(){var a=
this.length|0;return 0===a?"":0===arguments.length?yf(this,0,a):Pg.apply(this,arguments)};y.prototype.equals=function(a){if(!Na(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:0===y.compare(this,a)};y.prototype.inspect=function(){var a="";0<this.length&&(a=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(a+=" ... "));return"<Buffer "+a+">"};y.prototype.compare=function(a,b,c,d,e){if(!Na(a))throw new TypeError("Argument must be a Buffer");void 0===b&&(b=0);
void 0===c&&(c=a?a.length:0);void 0===d&&(d=0);void 0===e&&(e=this.length);if(0>b||c>a.length||0>d||e>this.length)throw new RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return-1;if(b>=c)return 1;b>>>=0;c>>>=0;d>>>=0;e>>>=0;if(this===a)return 0;var f=e-d,g=c-b,h=Math.min(f,g);d=this.slice(d,e);a=a.slice(b,c);for(b=0;b<h;++b)if(d[b]!==a[b]){f=d[b];g=a[b];break}return f<g?-1:g<f?1:0};y.prototype.includes=function(a,b,c){return-1!==this.indexOf(a,b,c)};y.prototype.indexOf=function(a,
b,c){return zf(this,a,b,c,!0)};y.prototype.lastIndexOf=function(a,b,c){return zf(this,a,b,c,!1)};y.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"===typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b|=0,isFinite(c)?(c|=0,void 0===d&&(d="utf8")):(d=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var e=this.length-b;if(void 0===c||c>e)c=e;if(0<a.length&&(0>c||0>b)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");
d||(d="utf8");for(e=!1;;)switch(d){case "hex":a:{b=Number(b)||0;d=this.length-b;c?(c=Number(c),c>d&&(c=d)):c=d;d=a.length;if(0!==d%2)throw new TypeError("Invalid hex string");c>d/2&&(c=d/2);for(d=0;d<c;++d){e=parseInt(a.substr(2*d,2),16);if(isNaN(e)){a=d;break a}this[b+d]=e}a=d}return a;case "utf8":case "utf-8":return Yb(vc(a,this.length-b),this,b,c);case "ascii":return Yb(Ff(a),this,b,c);case "latin1":case "binary":return Yb(Ff(a),this,b,c);case "base64":return Yb(xf(a),this,b,c);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":var f;
d=a;for(var e=this.length-b,g=[],h=0;h<d.length&&!(0>(e-=2));++h)f=d.charCodeAt(h),a=f>>8,f%=256,g.push(f),g.push(a);return Yb(g,this,b,c);default:if(e)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();e=!0}};y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Bf=4096;y.prototype.slice=function(a,b){var c=this.length;a=~~a;b=void 0===b?c:~~b;0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c);0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c);b<a&&(b=a);if(y.TYPED_ARRAY_SUPPORT)b=
this.subarray(a,b),b.__proto__=y.prototype;else{c=b-a;b=new y(c,void 0);for(var d=0;d<c;++d)b[d]=this[d+a]}return b};y.prototype.readUIntLE=function(a,b,c){a|=0;b|=0;c||ba(a,b,this.length);c=this[a];for(var d=1,e=0;++e<b&&(d*=256);)c+=this[a+e]*d;return c};y.prototype.readUIntBE=function(a,b,c){a|=0;b|=0;c||ba(a,b,this.length);c=this[a+--b];for(var d=1;0<b&&(d*=256);)c+=this[a+--b]*d;return c};y.prototype.readUInt8=function(a,b){b||ba(a,1,this.length);return this[a]};y.prototype.readUInt16LE=function(a,
b){b||ba(a,2,this.length);return this[a]|this[a+1]<<8};y.prototype.readUInt16BE=function(a,b){b||ba(a,2,this.length);return this[a]<<8|this[a+1]};y.prototype.readUInt32LE=function(a,b){b||ba(a,4,this.length);return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]};y.prototype.readUInt32BE=function(a,b){b||ba(a,4,this.length);return 16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])};y.prototype.readIntLE=function(a,b,c){a|=0;b|=0;c||ba(a,b,this.length);c=this[a];for(var d=1,e=0;++e<b&&
(d*=256);)c+=this[a+e]*d;c>=128*d&&(c-=Math.pow(2,8*b));return c};y.prototype.readIntBE=function(a,b,c){a|=0;b|=0;c||ba(a,b,this.length);c=b;for(var d=1,e=this[a+--c];0<c&&(d*=256);)e+=this[a+--c]*d;e>=128*d&&(e-=Math.pow(2,8*b));return e};y.prototype.readInt8=function(a,b){b||ba(a,1,this.length);return this[a]&128?-1*(255-this[a]+1):this[a]};y.prototype.readInt16LE=function(a,b){b||ba(a,2,this.length);a=this[a]|this[a+1]<<8;return a&32768?a|4294901760:a};y.prototype.readInt16BE=function(a,b){b||
ba(a,2,this.length);a=this[a+1]|this[a]<<8;return a&32768?a|4294901760:a};y.prototype.readInt32LE=function(a,b){b||ba(a,4,this.length);return this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24};y.prototype.readInt32BE=function(a,b){b||ba(a,4,this.length);return this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]};y.prototype.readFloatLE=function(a,b){b||ba(a,4,this.length);return uc(this,a,!0,23,4)};y.prototype.readFloatBE=function(a,b){b||ba(a,4,this.length);return uc(this,a,!1,23,4)};y.prototype.readDoubleLE=
function(a,b){b||ba(a,8,this.length);return uc(this,a,!0,52,8)};y.prototype.readDoubleBE=function(a,b){b||ba(a,8,this.length);return uc(this,a,!1,52,8)};y.prototype.writeUIntLE=function(a,b,c,d){a=+a;b|=0;c|=0;d||qa(this,a,b,c,Math.pow(2,8*c)-1,0);d=1;var e=0;for(this[b]=a&255;++e<c&&(d*=256);)this[b+e]=a/d&255;return b+c};y.prototype.writeUIntBE=function(a,b,c,d){a=+a;b|=0;c|=0;d||qa(this,a,b,c,Math.pow(2,8*c)-1,0);d=c-1;var e=1;for(this[b+d]=a&255;0<=--d&&(e*=256);)this[b+d]=a/e&255;return b+c};
y.prototype.writeUInt8=function(a,b,c){a=+a;b|=0;c||qa(this,a,b,1,255,0);y.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));this[b]=a&255;return b+1};y.prototype.writeUInt16LE=function(a,b,c){a=+a;b|=0;c||qa(this,a,b,2,65535,0);y.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8):wc(this,a,b,!0);return b+2};y.prototype.writeUInt16BE=function(a,b,c){a=+a;b|=0;c||qa(this,a,b,2,65535,0);y.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a&255):wc(this,a,b,!1);return b+2};y.prototype.writeUInt32LE=function(a,b,c){a=
+a;b|=0;c||qa(this,a,b,4,4294967295,0);y.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=a&255):xc(this,a,b,!0);return b+4};y.prototype.writeUInt32BE=function(a,b,c){a=+a;b|=0;c||qa(this,a,b,4,4294967295,0);y.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a&255):xc(this,a,b,!1);return b+4};y.prototype.writeIntLE=function(a,b,c,d){a=+a;b|=0;d||(d=Math.pow(2,8*c-1),qa(this,a,b,c,d-1,-d));d=0;var e=1,f=0;for(this[b]=a&255;++d<c&&(e*=256);)0>
a&&0===f&&0!==this[b+d-1]&&(f=1),this[b+d]=(a/e>>0)-f&255;return b+c};y.prototype.writeIntBE=function(a,b,c,d){a=+a;b|=0;d||(d=Math.pow(2,8*c-1),qa(this,a,b,c,d-1,-d));d=c-1;var e=1,f=0;for(this[b+d]=a&255;0<=--d&&(e*=256);)0>a&&0===f&&0!==this[b+d+1]&&(f=1),this[b+d]=(a/e>>0)-f&255;return b+c};y.prototype.writeInt8=function(a,b,c){a=+a;b|=0;c||qa(this,a,b,1,127,-128);y.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));0>a&&(a=255+a+1);this[b]=a&255;return b+1};y.prototype.writeInt16LE=function(a,b,c){a=+a;
b|=0;c||qa(this,a,b,2,32767,-32768);y.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8):wc(this,a,b,!0);return b+2};y.prototype.writeInt16BE=function(a,b,c){a=+a;b|=0;c||qa(this,a,b,2,32767,-32768);y.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a&255):wc(this,a,b,!1);return b+2};y.prototype.writeInt32LE=function(a,b,c){a=+a;b|=0;c||qa(this,a,b,4,2147483647,-2147483648);y.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):xc(this,a,b,!0);return b+4};y.prototype.writeInt32BE=
function(a,b,c){a=+a;b|=0;c||qa(this,a,b,4,2147483647,-2147483648);0>a&&(a=4294967295+a+1);y.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a&255):xc(this,a,b,!1);return b+4};y.prototype.writeFloatLE=function(a,b,c){return Df(this,a,b,!0,c)};y.prototype.writeFloatBE=function(a,b,c){return Df(this,a,b,!1,c)};y.prototype.writeDoubleLE=function(a,b,c){return Ef(this,a,b,!0,c)};y.prototype.writeDoubleBE=function(a,b,c){return Ef(this,a,b,!1,c)};y.prototype.copy=function(a,
b,c,d){c||(c=0);d||0===d||(d=this.length);b>=a.length&&(b=a.length);b||(b=0);0<d&&d<c&&(d=c);if(d===c||0===a.length||0===this.length)return 0;if(0>b)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("sourceStart out of bounds");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length);a.length-b<d-c&&(d=a.length-b+c);var e=d-c;if(this===a&&c<b&&b<d)for(d=e-1;0<=d;--d)a[d+b]=this[d+c];else if(1E3>e||!y.TYPED_ARRAY_SUPPORT)for(d=
0;d<e;++d)a[d+b]=this[d+c];else Uint8Array.prototype.set.call(a,this.subarray(c,c+e),b);return e};y.prototype.fill=function(a,b,c,d){if("string"===typeof a){"string"===typeof b?(d=b,b=0,c=this.length):"string"===typeof c&&(d=c,c=this.length);if(1===a.length){var e=a.charCodeAt(0);256>e&&(a=e)}if(void 0!==d&&"string"!==typeof d)throw new TypeError("encoding must be a string");if("string"===typeof d&&!y.isEncoding(d))throw new TypeError("Unknown encoding: "+d);}else"number"===typeof a&&(a&=255);if(0>
b||this.length<b||this.length<c)throw new RangeError("Out of range index");if(c<=b)return this;b>>>=0;c=void 0===c?this.length:c>>>0;a||(a=0);if("number"===typeof a)for(d=b;d<c;++d)this[d]=a;else for(a=Na(a)?a:vc((new y(a,d)).toString()),e=a.length,d=0;d<c-b;++d)this[d+b]=a[d%e];return this};var Qg=/[^+\/0-9A-Za-z-_]/g,Ch=function(){function a(){}function b(a,b){for(var c=0,d=[],f,e,g=16;0<g&&!a[g-1];)g--;d.push({children:[],index:0});var h=d[0],q;for(f=0;f<g;f++){for(e=0;e<a[f];e++){h=d.pop();for(h.children[h.index]=
b[c];0<h.index;)h=d.pop();h.index++;for(d.push(h);d.length<=f;)d.push(q={children:[],index:0}),h.children[h.index]=q.children,h=q;c++}f+1<g&&(d.push(q={children:[],index:0}),h.children[h.index]=q.children,h=q)}return d[0].children}function c(a,b,c,d,e,r,t,p,q){function g(){if(0<G)return G--,E>>G&1;E=a[b++];if(255==E){var c=a[b++];if(c)throw Error("unexpected marker: "+(E<<8|c).toString(16));}G=7;return E>>>7}function h(a){for(var b;null!==(b=g());){a=a[b];if("number"===typeof a)return a;if("object"!==
typeof a)throw Error("invalid huffman sequence");}return null}function k(a){for(var b=0;0<a;){var c=g();if(null===c)return;b=b<<1|c;a--}return b}function l(a){var b=k(a);return b>=1<<a-1?b:b+(-1<<a)+1}function m(a,b){var c=h(a.huffmanTableDC),c=0===c?0:l(c);b[0]=a.pred+=c;for(c=1;64>c;){var d=h(a.huffmanTableAC),e=d&15,d=d>>4;if(0===e){if(15>d)break;c+=16}else c+=d,b[f[c]]=l(e),c++}}function n(a,b){var c=h(a.huffmanTableDC),c=0===c?0:l(c)<<q;b[0]=a.pred+=c}function C(a,b){b[0]|=g()<<q}function u(a,
b){if(0<F)F--;else for(var c=r;c<=t;){var d=h(a.huffmanTableAC),e=d&15,d=d>>4;if(0===e){if(15>d){F=k(d)+(1<<d)-1;break}c+=16}else c+=d,b[f[c]]=l(e)*(1<<q),c++}}function D(a,b){for(var c=r,d=0;c<=t;){var e=f[c],m=0>b[e]?-1:1;switch(H){case 0:d=h(a.huffmanTableAC);e=d&15;d>>=4;if(0===e)15>d?(F=k(d)+(1<<d),H=4):(d=16,H=1);else{if(1!==e)throw Error("invalid ACn encoding");I=l(e);H=d?2:3}continue;case 1:case 2:b[e]?b[e]+=(g()<<q)*m:(d--,0===d&&(H=2==H?3:0));break;case 3:b[e]?b[e]+=(g()<<q)*m:(b[e]=I<<
q,H=0);break;case 4:b[e]&&(b[e]+=(g()<<q)*m)}c++}4===H&&(F--,0===F&&(H=0))}var y=c.mcusPerLine,A=b,E=0,G=0,F=0,H=0,I,K=d.length,J,L,N,R,S;p=c.progressive?0===r?0===p?n:C:0===p?u:D:m;var P=0;c=1==K?d[0].blocksPerLine*d[0].blocksPerColumn:y*c.mcusPerColumn;e||(e=c);for(var U,V;P<c;){for(L=0;L<K;L++)d[L].pred=0;F=0;if(1==K)for(J=d[0],S=0;S<e;S++)p(J,J.blocks[P/J.blocksPerLine|0][P%J.blocksPerLine]),P++;else for(S=0;S<e;S++){for(L=0;L<K;L++)for(J=d[L],U=J.h,V=J.v,N=0;N<V;N++)for(R=0;R<U;R++)p(J,J.blocks[(P/
y|0)*J.v+N][P%y*J.h+R]);P++;if(P===c)break}G=0;J=a[b]<<8|a[b+1];if(65280>J)throw Error("marker was not found");if(65488<=J&&65495>=J)b+=2;else break}return b-A}function d(a,b){a=[];for(var c=b.blocksPerLine,d=b.blocksPerColumn,f=c<<3,e=new Int32Array(64),g=new Uint8Array(64),h,q,v=0;v<d;v++){var n=v<<3;for(h=0;8>h;h++)a.push(new Uint8Array(f));for(var z=0;z<c;z++){var x,w,M,C,u,D,y,A,E;x=b.blocks[v][z];q=g;var G=e;w=b.quantizationTable;var F=G;for(h=0;64>h;h++)F[h]=x[h]*w[h];for(h=0;8>h;++h){var H=
8*h;0==F[1+H]&&0==F[2+H]&&0==F[3+H]&&0==F[4+H]&&0==F[5+H]&&0==F[6+H]&&0==F[7+H]?(x=5793*F[0+H]+512>>10,F[0+H]=x,F[1+H]=x,F[2+H]=x,F[3+H]=x,F[4+H]=x,F[5+H]=x,F[6+H]=x,F[7+H]=x):(E=5793*F[0+H]+128>>8,A=5793*F[4+H]+128>>8,y=F[2+H],D=F[6+H],u=2896*(F[1+H]-F[7+H])+128>>8,w=2896*(F[1+H]+F[7+H])+128>>8,C=F[3+H]<<4,M=F[5+H]<<4,x=E-A+1>>1,E=E+A+1>>1,A=x,x=3784*y+1567*D+128>>8,y=1567*y-3784*D+128>>8,D=x,x=u-M+1>>1,u=u+M+1>>1,M=x,x=w+C+1>>1,C=w-C+1>>1,w=x,x=E-D+1>>1,E=E+D+1>>1,D=x,x=A-y+1>>1,A=A+y+1>>1,y=x,
x=2276*u+3406*w+2048>>12,u=3406*u-2276*w+2048>>12,w=x,x=799*C+4017*M+2048>>12,C=4017*C-799*M+2048>>12,M=x,F[0+H]=E+w,F[7+H]=E-w,F[1+H]=A+M,F[6+H]=A-M,F[2+H]=y+C,F[5+H]=y-C,F[3+H]=D+u,F[4+H]=D-u)}for(h=0;8>h;++h)H=h,0==F[8+H]&&0==F[16+H]&&0==F[24+H]&&0==F[32+H]&&0==F[40+H]&&0==F[48+H]&&0==F[56+H]?(x=5793*G[h+0]+8192>>14,F[0+H]=x,F[8+H]=x,F[16+H]=x,F[24+H]=x,F[32+H]=x,F[40+H]=x,F[48+H]=x,F[56+H]=x):(E=5793*F[0+H]+2048>>12,A=5793*F[32+H]+2048>>12,y=F[16+H],D=F[48+H],u=2896*(F[8+H]-F[56+H])+2048>>12,
w=2896*(F[8+H]+F[56+H])+2048>>12,C=F[24+H],M=F[40+H],x=E-A+1>>1,E=E+A+1>>1,A=x,x=3784*y+1567*D+2048>>12,y=1567*y-3784*D+2048>>12,D=x,x=u-M+1>>1,u=u+M+1>>1,M=x,x=w+C+1>>1,C=w-C+1>>1,w=x,x=E-D+1>>1,E=E+D+1>>1,D=x,x=A-y+1>>1,A=A+y+1>>1,y=x,x=2276*u+3406*w+2048>>12,u=3406*u-2276*w+2048>>12,w=x,x=799*C+4017*M+2048>>12,C=4017*C-799*M+2048>>12,M=x,F[0+H]=E+w,F[56+H]=E-w,F[8+H]=A+M,F[48+H]=A-M,F[16+H]=y+C,F[40+H]=y-C,F[24+H]=D+u,F[32+H]=D-u);for(h=0;64>h;++h)G=128+(F[h]+8>>4),q[h]=0>G?0:255<G?255:G;F=0;G=
z<<3;for(q=0;8>q;q++)for(x=a[n+q],h=0;8>h;h++)x[G+h]=g[F++]}}return a}function e(a){return 0>a?0:255<a?255:a}var f=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);a.prototype={load:function(a){var b=new XMLHttpRequest;b.open("GET",a,!0);b.responseType="arraybuffer";b.onload=function(){var a=new Uint8Array(b.response||b.mozResponseArrayBuffer);this.parse(a);
if(this.onload)this.onload()}.bind(this);b.send(null)},parse:function(a){function e(){var b=a[m]<<8|a[m+1];m+=2;return b}function g(){var b=e(),b=a.subarray(m,m+b-2);m+=b.length;return b}function k(a){var b=0,c=0,d,f;for(f in a.components)a.components.hasOwnProperty(f)&&(d=a.components[f],b<d.h&&(b=d.h),c<d.v&&(c=d.v));var e=Math.ceil(a.samplesPerLine/8/b),g=Math.ceil(a.scanLines/8/c);for(f in a.components)if(a.components.hasOwnProperty(f)){d=a.components[f];for(var h=Math.ceil(Math.ceil(a.samplesPerLine/
8)*d.h/b),k=Math.ceil(Math.ceil(a.scanLines/8)*d.v/c),l=e*d.h,m=g*d.v,r=[],t=0;t<m;t++){for(var p=[],q=0;q<l;q++)p.push(new Int32Array(64));r.push(p)}d.blocksPerLine=h;d.blocksPerColumn=k;d.blocks=r}a.maxH=b;a.maxV=c;a.mcusPerLine=e;a.mcusPerColumn=g}var m=0,r=null,t=null,p,q,v=[],n=[],z=[],x=[],w=e();if(65496!=w)throw Error("SOI not found");for(w=e();65497!=w;){var u;switch(w){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var C=
g();65504===w&&74===C[0]&&70===C[1]&&73===C[2]&&70===C[3]&&0===C[4]&&(r={version:{major:C[5],minor:C[6]},densityUnits:C[7],xDensity:C[8]<<8|C[9],yDensity:C[10]<<8|C[11],thumbWidth:C[12],thumbHeight:C[13],thumbData:C.subarray(14,14+3*C[12]*C[13])});65518===w&&65===C[0]&&100===C[1]&&111===C[2]&&98===C[3]&&101===C[4]&&0===C[5]&&(t={version:C[6],flags0:C[7]<<8|C[8],flags1:C[9]<<8|C[10],transformCode:C[11]});break;case 65499:for(w=e()+m-2;m<w;){var C=a[m++],y=new Int32Array(64);if(0===C>>4)for(u=0;64>
u;u++){var D=f[u];y[D]=a[m++]}else if(1===C>>4)for(u=0;64>u;u++)D=f[u],y[D]=e();else throw Error("DQT: invalid table spec");v[C&15]=y}break;case 65472:case 65473:case 65474:e();p={};p.extended=65473===w;p.progressive=65474===w;p.precision=a[m++];p.scanLines=e();p.samplesPerLine=e();p.components={};p.componentsOrder=[];C=a[m++];for(w=0;w<C;w++){var y=a[m],D=a[m+1]>>4,A=a[m+1]&15,E=a[m+2];p.componentsOrder.push(y);p.components[y]={h:D,v:A,quantizationIdx:E};m+=3}k(p);n.push(p);break;case 65476:C=e();
for(w=2;w<C;){y=a[m++];D=new Uint8Array(16);for(u=A=0;16>u;u++,m++)A+=D[u]=a[m];E=new Uint8Array(A);for(u=0;u<A;u++,m++)E[u]=a[m];w+=17+A;(0===y>>4?x:z)[y&15]=b(D,E)}break;case 65501:e();q=e();break;case 65498:e();y=a[m++];C=[];for(w=0;w<y;w++)D=p.components[a[m++]],A=a[m++],D.huffmanTableDC=x[A>>4],D.huffmanTableAC=z[A&15],C.push(D);w=a[m++];y=a[m++];D=a[m++];w=c(a,m,p,C,q,w,y,D>>4,D&15);m+=w;break;default:if(255==a[m-3]&&192<=a[m-2]&&254>=a[m-2])m-=3;else throw Error("unknown JPEG marker "+w.toString(16));
}w=e()}if(1!=n.length)throw Error("only single frame JPEGs supported");for(w=0;w<n.length;w++)for(u in q=n[w].components,q)q[u].quantizationTable=v[q[u].quantizationIdx],delete q[u].quantizationIdx;this.width=p.samplesPerLine;this.height=p.scanLines;this.jfif=r;this.adobe=t;this.components=[];for(w=0;w<p.componentsOrder.length;w++)D=p.components[p.componentsOrder[w]],this.components.push({lines:d(p,D),scaleX:D.h/p.maxH,scaleY:D.v/p.maxV})},getData:function(a,b){var c=this.width/a,d=this.height/b,
f,g,h,p,q,v,n,z,x,w,u=0,C,y,D,A,E,G,I=new Uint8Array(a*b*this.components.length);switch(this.components.length){case 1:f=this.components[0];for(w=0;w<b;w++)for(q=f.lines[0|w*f.scaleY*d],x=0;x<a;x++)C=q[0|x*f.scaleX*c],I[u++]=C;break;case 2:f=this.components[0];g=this.components[1];for(w=0;w<b;w++)for(q=f.lines[0|w*f.scaleY*d],v=g.lines[0|w*g.scaleY*d],x=0;x<a;x++)C=q[0|x*f.scaleX*c],I[u++]=C,C=v[0|x*g.scaleX*c],I[u++]=C;break;case 3:G=!0;this.adobe&&this.adobe.transformCode?G=!0:"undefined"!==typeof this.colorTransform&&
(G=!!this.colorTransform);f=this.components[0];g=this.components[1];h=this.components[2];for(w=0;w<b;w++)for(q=f.lines[0|w*f.scaleY*d],v=g.lines[0|w*g.scaleY*d],n=h.lines[0|w*h.scaleY*d],x=0;x<a;x++)G?(C=q[0|x*f.scaleX*c],y=v[0|x*g.scaleX*c],D=n[0|x*h.scaleX*c],p=e(C+1.402*(D-128)),z=e(C-.3441363*(y-128)-.71413636*(D-128)),C=e(C+1.772*(y-128))):(p=q[0|x*f.scaleX*c],z=v[0|x*g.scaleX*c],C=n[0|x*h.scaleX*c]),I[u++]=p,I[u++]=z,I[u++]=C;break;case 4:if(!this.adobe)throw"Unsupported color mode (4 components)";
G=!1;this.adobe&&this.adobe.transformCode?G=!0:"undefined"!==typeof this.colorTransform&&(G=!!this.colorTransform);f=this.components[0];g=this.components[1];h=this.components[2];p=this.components[3];for(w=0;w<b;w++)for(q=f.lines[0|w*f.scaleY*d],v=g.lines[0|w*g.scaleY*d],n=h.lines[0|w*h.scaleY*d],z=p.lines[0|w*p.scaleY*d],x=0;x<a;x++)G?(C=q[0|x*f.scaleX*c],y=v[0|x*g.scaleX*c],D=n[0|x*h.scaleX*c],A=z[0|x*p.scaleX*c],E=255-e(C+1.402*(D-128)),D=255-e(C-.3441363*(y-128)-.71413636*(D-128)),C=255-e(C+1.772*
(y-128))):(E=q[0|x*f.scaleX*c],D=v[0|x*g.scaleX*c],C=n[0|x*h.scaleX*c],A=z[0|x*p.scaleX*c]),I[u++]=255-E,I[u++]=255-D,I[u++]=255-C,I[u++]=255-A;break;default:throw"Unsupported color mode";}return I},copyToImageData:function(a){var b=a.width,c=a.height;a=a.data;var d=this.getData(b,c),f=0,g=0,t,p,q,n,B,z;switch(this.components.length){case 1:for(p=0;p<c;p++)for(t=0;t<b;t++)q=d[f++],a[g++]=q,a[g++]=q,a[g++]=q,a[g++]=255;break;case 3:for(p=0;p<c;p++)for(t=0;t<b;t++)B=d[f++],z=d[f++],q=d[f++],a[g++]=
B,a[g++]=z,a[g++]=q,a[g++]=255;break;case 4:for(p=0;p<c;p++)for(t=0;t<b;t++)B=d[f++],z=d[f++],q=d[f++],n=d[f++],B=255-e(B*(1-n/255)+n),z=255-e(z*(1-n/255)+n),q=255-e(q*(1-n/255)+n),a[g++]=B,a[g++]=z,a[g++]=q,a[g++]=255;break;default:throw"Unsupported color mode";}}};return a}(),Dh={encode:function(a,b){"undefined"===typeof b&&(b=50);return{data:(new Sg(b)).encode(a,b),width:a.width,height:a.height}},decode:function(a,b){var c=new Uint8Array(a);a=new Ch;a.parse(c);b={width:a.width,height:a.height,
data:b?new Uint8Array(a.width*a.height*4):new y(a.width*a.height*4)};a.copyToImageData(b);return b}},Ic=function(){var a;a=A.call(this)||this;a.addInputValidator(0,ArrayBuffer);return a};$jscomp.inherits(Ic,A);Ic.prototype._run=function(){var a=this._getInput(0);if(a)try{var b=Dh.decode(a),c=b.data.length/(b.width*b.height),d=new E,e=new Uint8Array(b.data.buffer);d.setData(e,b.width,b.height,c);this._output[0]=d}catch(f){}else console.warn('JpegDecoder requires an ArrayBuffer as input "0". Unable to continue.')};
var Eh=va(function(a){(function(){function b(){"undefined"!=typeof db&&"development"!=db.env.NODE_ENV||console.log.apply(console,arguments)}var c={};a.exports=c;(function(a,c){a.toRGBA8=function(c){var d=c.width,e=c.height,f=d*e,k=a.decode._getBPP(c),m=Math.ceil(d*k/8),k=new Uint8Array(4*f),r=new Uint32Array(k.buffer),t=c.data,p=c.ctype,q=c.depth,n=a._bin.readUshort;if(6==p){f<<=2;if(8==q)for(c=0;c<f;c++)k[c]=t[c];if(16==q)for(c=0;c<f;c++)k[c]=t[c<<1]}else if(2==p){c=c.tabs.tRNS;m=e=d=-1;c&&(d=c[0],
e=c[1],m=c[2]);if(8==q)for(c=0;c<f;c++)r=c<<2,p=3*c,k[r]=t[p],k[r+1]=t[p+1],k[r+2]=t[p+2],k[r+3]=255,-1!=d&&t[p]==d&&t[p+1]==e&&t[p+2]==m&&(k[r+3]=0);if(16==q)for(c=0;c<f;c++)r=c<<2,p=6*c,k[r]=t[p],k[r+1]=t[p+2],k[r+2]=t[p+4],k[r+3]=255,-1!=d&&n(t,p)==d&&n(t,p+2)==e&&n(t,p+4)==m&&(k[r+3]=0)}else if(3==p){var n=c.tabs.PLTE,B=(p=c.tabs.tRNS)?p.length:0;if(1==q)for(var z=0;z<e;z++){var x=z*m,w=z*d;for(c=0;c<d;c++){var r=w+c<<2,u=t[x+(c>>3)]>>7-((c&7)<<0)&1,C=3*u;k[r]=n[C];k[r+1]=n[C+1];k[r+2]=n[C+2];
k[r+3]=u<B?p[u]:255}}if(2==q)for(z=0;z<e;z++)for(x=z*m,w=z*d,c=0;c<d;c++)r=w+c<<2,u=t[x+(c>>2)]>>6-((c&3)<<1)&3,C=3*u,k[r]=n[C],k[r+1]=n[C+1],k[r+2]=n[C+2],k[r+3]=u<B?p[u]:255;if(4==q)for(z=0;z<e;z++)for(x=z*m,w=z*d,c=0;c<d;c++)r=w+c<<2,u=t[x+(c>>1)]>>4-((c&1)<<2)&15,C=3*u,k[r]=n[C],k[r+1]=n[C+1],k[r+2]=n[C+2],k[r+3]=u<B?p[u]:255;if(8==q)for(c=0;c<f;c++)r=c<<2,u=t[c],C=3*u,k[r]=n[C],k[r+1]=n[C+1],k[r+2]=n[C+2],k[r+3]=u<B?p[u]:255}else if(4==p){if(8==q)for(c=0;c<f;c++)r=c<<2,d=c<<1,e=t[d],k[r]=e,k[r+
1]=e,k[r+2]=e,k[r+3]=t[d+1];if(16==q)for(c=0;c<f;c++)r=c<<2,d=c<<2,e=t[d],k[r]=e,k[r+1]=e,k[r+2]=e,k[r+3]=t[d+2]}else if(0==p){d=c.tabs.tRNS?c.tabs.tRNS:-1;if(1==q)for(c=0;c<f;c++)e=255*(t[c>>3]>>7-(c&7)&1),m=e==255*d?0:255,r[c]=m<<24|e<<16|e<<8|e;if(2==q)for(c=0;c<f;c++)e=85*(t[c>>2]>>6-((c&3)<<1)&3),m=e==85*d?0:255,r[c]=m<<24|e<<16|e<<8|e;if(4==q)for(c=0;c<f;c++)e=17*(t[c>>1]>>4-((c&1)<<2)&15),m=e==17*d?0:255,r[c]=m<<24|e<<16|e<<8|e;if(8==q)for(c=0;c<f;c++)e=t[c],m=e==d?0:255,r[c]=m<<24|e<<16|e<<
8|e;if(16==q)for(c=0;c<f;c++)e=t[c<<1],m=n(t,c<<1)==d?0:255,r[c]=m<<24|e<<16|e<<8|e}else b("unsupported color type",p);return k};a.encode=function(b,c,d,e){null==e&&(e=0);var f=new Uint8Array(b);b=new Uint8Array(f.length+100);for(var g=[137,80,78,71,13,10,26,10],h=0;8>h;h++)b[h]=g[h];var g=8,l=a._bin,p=a.crc.crc;e=a.encode.compress(f,c,d,e);l.writeUint(b,g,13);g+=4;l.writeASCII(b,g,"IHDR");g+=4;l.writeUint(b,g,c);g+=4;l.writeUint(b,g,d);g+=4;b[g]=e.depth;g++;b[g]=e.ctype;g++;b[g]=0;g++;b[g]=0;g++;
b[g]=0;g++;l.writeUint(b,g,p(b,g-17,17));g+=4;l.writeUint(b,g,1);g+=4;l.writeASCII(b,g,"sRGB");g+=4;b[g]=1;g++;l.writeUint(b,g,p(b,g-5,5));g+=4;if(3==e.ctype){c=e.plte.length;l.writeUint(b,g,3*c);g+=4;l.writeASCII(b,g,"PLTE");g+=4;for(h=0;h<c;h++){d=3*h;var f=e.plte[h],q=f>>8&255,n=f>>16&255;b[g+d+0]=f&255;b[g+d+1]=q;b[g+d+2]=n}g+=3*c;l.writeUint(b,g,p(b,g-3*c-4,3*c+4));g+=4;if(e.gotAlpha){l.writeUint(b,g,c);g+=4;l.writeASCII(b,g,"tRNS");g+=4;for(h=0;h<c;h++)b[g+h]=e.plte[h]>>24&255;g+=c;l.writeUint(b,
g,p(b,g-c-4,c+4));g+=4}}c=e.data.length;l.writeUint(b,g,c);g+=4;l.writeASCII(b,g,"IDAT");g+=4;for(h=0;h<c;h++)b[g+h]=e.data[h];g+=c;l.writeUint(b,g,p(b,g-c-4,c+4));g+=4;l.writeUint(b,g,0);g+=4;l.writeASCII(b,g,"IEND");g+=4;l.writeUint(b,g,p(b,g-4,4));return b.buffer.slice(0,g+4)};a.encode.compress=function(b,c,d,e){0!=e&&(b=a.quantize(b,c,d,e));var f=6;e=8;for(var g=[],h=4,l=4*c,p=new Uint32Array(b.buffer),q=!1,n=[],B=0;B<b.length;B+=4){var z=p[B>>2];600>g.length&&null==n[z]&&(n[z]=g.length,g.push(z));
255!=b[B+3]&&(q=!0)}B=g.length;if(256>=B){e=2>=B?1:4>=B?2:16>=B?4:8;l=Math.ceil(e*c/8);f=new Uint8Array(l*d);for(b=0;b<d;b++){B=b*l;h=b*c;if(1==e)for(z=0;z<c;z++)f[B+(z>>3)]|=n[p[h+z]]<<7-(z&7);if(2==e)for(z=0;z<c;z++)f[B+(z>>2)]|=n[p[h+z]]<<6-2*(z&3);if(4==e)for(z=0;z<c;z++)f[B+(z>>1)]|=n[p[h+z]]<<4-4*(z&1);if(8==e)for(z=0;z<c;z++)f[B+z]=n[p[h+z]]}b=f;f=3;h=1}else if(0==q){f=new Uint8Array(c*d*3);l=c*d;for(B=0;B<l;B++)p=3*B,n=4*B,f[p]=b[n],f[p+1]=b[n+1],f[p+2]=b[n+2];b=f;f=2;h=3;l=3*c}c=new Uint8Array(c*
d*h+d);return{ctype:f,depth:e,plte:g,gotAlpha:q,data:a.encode._filterZero(b,d,h,l,c)}};a.encode._filterZero=function(b,d,e,l,k){for(var f=[],g=0;5>g;g++)if(!(5E5<d*l)||2!=g&&3!=g&&4!=g){for(var h=0;h<d;h++)a.encode._filterLine(k,b,h,l,e,g);f.push(c.deflate(k));if(1==e)break}var p;b=1E9;for(d=0;d<f.length;d++)f[d].length<b&&(p=d,b=f[d].length);return f[p]};a.encode._filterLine=function(b,c,d,e,k,m){var f=d*e,g=f+d,h=a.decode._paeth;b[g]=m;g++;if(0==m)for(d=0;d<e;d++)b[g+d]=c[f+d];else if(1==m){for(d=
0;d<k;d++)b[g+d]=c[f+d];for(d=k;d<e;d++)b[g+d]=c[f+d]-c[f+d-k]+256&255}else if(0==d){for(d=0;d<k;d++)b[g+d]=c[f+d];if(2==m)for(d=k;d<e;d++)b[g+d]=c[f+d];if(3==m)for(d=k;d<e;d++)b[g+d]=c[f+d]-(c[f+d-k]>>1)+256&255;if(4==m)for(d=k;d<e;d++)b[g+d]=c[f+d]-h(c[f+d-k],0,0)+256&255}else{if(2==m)for(d=0;d<e;d++)b[g+d]=c[f+d]+256-c[f+d-e]&255;if(3==m){for(d=0;d<k;d++)b[g+d]=c[f+d]+256-(c[f+d-e]>>1)&255;for(d=k;d<e;d++)b[g+d]=c[f+d]+256-(c[f+d-e]+c[f+d-k]>>1)&255}if(4==m){for(d=0;d<k;d++)b[g+d]=c[f+d]+256-h(0,
c[f+d-e],0)&255;for(d=k;d<e;d++)b[g+d]=c[f+d]+256-h(c[f+d-k],c[f+d-e],c[f+d-k-e])&255}}};a.crc={table:function(){for(var a=new Uint32Array(256),b=0;256>b;b++){for(var c=b,d=0;8>d;d++)c=c&1?3988292384^c>>>1:c>>>1;a[b]=c}return a}(),update:function(b,c,d,e){for(var f=0;f<e;f++)b=a.crc.table[(b^c[d+f])&255]^b>>>8;return b},crc:function(b,c,d){return a.crc.update(4294967295,b,c,d)^4294967295}};a.quantize=function(b,c,d,e){var f=new Uint8Array(b.length),g=new Uint16Array(c*d);c*=d;var h=a.quantize.dist;
for(d=0;d<c;d++){var l=d<<2,p=b[l+3]/255;f[l+0]=b[l+0]*p;f[l+1]=b[l+1]*p;f[l+2]=b[l+2]*p;f[l+3]=b[l+3]}for(var q=[],n=[],B=0,z=Math.max(100,10*e);;){var n=[],q=[],x=255-((1<<B)-1),w=1<<B>>1;for(d=0;d<c;d++){var l=d<<2,u=f[l],C=f[l+1],y=f[l+2],p=f[l+3],l=(u&x)+w,C=(C&x)+w,y=(y&x)+w,p=(p&x)+w,u=p<<24|y<<16|C<<8|l;n[u]?q[n[u]].occ++:(n[u]=q.length,q.push({occ:1,r:l,g:C,b:y,a:p}));if(q.length>z)break}if(q.length>z)B++;else break}if(0==B&&q.length<=e)return b;q.sort(function(a,b){return b.occ-a.occ});
e=Math.min(e,q.length);p=new Uint8Array(4*e);for(d=0;d<e;d++)l=d<<2,y=q[d],p[l]=y.r,p[l+1]=y.g,p[l+2]=y.b,p[l+3]=y.a;q=p;b=Math.max(1,Math.min(10,Math.floor(1024/e)));for(n=0;n<b;n++){B=new Uint32Array(e);z=new Uint32Array(4*e);x=new Uint32Array(e);w=new Uint32Array(e);for(d=0;d<e;d++){for(var l=d<<2,u=q[l],C=q[l+1],y=q[l+2],p=q[l+3],D=0,A=1E9,l=0;l<e;l++)if(l!=d){var E=h(u,C,y,p,q,l<<2);E<A&&(D=l,A=E)}x[d]=A;w[d]=D}for(d=0;d<c;d++){var l=d<<2,u=f[l],C=f[l+1],y=f[l+2],p=f[l+3],D=0,A=1E9,D=g[d],A=
h(u,C,y,p,q,D<<2);if(!(A<=x[D]>>1))for(l=0;l<e;l++)if(E=h(u,C,y,p,q,l<<2),E<A){D=l;A=E;if(E<=x[D]>>1)break;E=h(u,C,y,p,q,w[l]<<2);if(E<=x[D]>>1){D=w[l];break}}g[d]=D;B[D]++;D<<=2;z[D]+=u;z[D+1]+=C;z[D+2]+=y;z[D+3]+=p}for(d=0;d<e;d++)l=d<<2,p=1/B[d],q[l]=z[l]*p,q[l+1]=z[l+1]*p,q[l+2]=z[l+2]*p,q[l+3]=z[l+3]*p}for(d=0;d<c;d++)l=d<<2,D=g[d],D<<=2,e=0==q[D+3]?0:255/q[D+3],f[l+0]=q[D+0]*e,f[l+1]=q[D+1]*e,f[l+2]=q[D+2]*e,f[l+3]=q[D+3];return f};a.quantize.dist=function(a,b,c,d,e,m){var f=e[m],g=e[m+1],h=
e[m+2];e=e[m+3];return(f-a)*(f-a)+(g-b)*(g-b)+(h-c)*(h-c)+(e-d)*(e-d)};a.quantize.dither=function(b,c,d,e,k,m){for(var f=new Float32Array(c*d*4),g=a.quantize.dist,h=Math.round,l=c<<2,n=0;n<d;n++)for(var B=0;B<c;B++){for(var z=n*c+B,x=z<<2,w=0;4>w;w++)f[x+w]=Math.max(-8,Math.min(8,f[x+w]));for(var u=h(b[x]+f[x]),y=h(b[x+1]+f[x+1]),A=h(b[x+2]+f[x+2]),D=h(b[x+3]+f[x+3]),E=0,G=1E9,w=0;w<m;w++){var I=g(u,y,A,D,k,w<<2);I<G&&(E=w,G=I)}e[z]=E;z=E<<2;u-=k[z];y-=k[z+1];A-=k[z+2];D-=k[z+3];f[x+4+0]+=.4375*u;
f[x+4+1]+=.4375*y;f[x+4+2]+=.4375*A;f[x+4+3]+=.4375*D;f[x+l-4+0]+=.1875*u;f[x+l-4+1]+=.1875*y;f[x+l-4+2]+=.1875*A;f[x+l-4+3]+=.1875*D;f[x+l+0]+=.3125*u;f[x+l+1]+=.3125*y;f[x+l+2]+=.3125*A;f[x+l+3]+=.3125*D;f[x+l+4+0]+=.0625*u;f[x+l+4+1]+=.0625*y;f[x+l+4+2]+=.0625*A;f[x+l+4+3]+=.0625*D}};a.decode=function(c){c=new Uint8Array(c);for(var d=8,e=a._bin,f=e.readUshort,k={tabs:{}},m=new Uint8Array(c.length),r=0;;){var t=e.readUint(c,d),d=d+4,p=e.readASCII(c,d,4),d=d+4;if("IHDR"==p)a.decode._IHDR(c,d,k);
else if("IDAT"==p){for(var n=0;n<t;n++)m[r+n]=c[d+n];r+=t}else if("pHYs"==p)k.tabs[p]=[e.readUint(c,d),e.readUint(c,d+4),c[d+8]];else if("cHRM"==p)for(k.tabs[p]=[],n=0;8>n;n++)k.tabs[p].push(e.readUint(c,d+4*n));else if("tEXt"==p){null==k.tabs[p]&&(k.tabs[p]={});var v=e.nextZero(c,d),n=e.readASCII(c,d,v-d),v=e.readASCII(c,v+1,d+t-v-1);k.tabs[p][n]=v}else if("iTXt"==p){null==k.tabs[p]&&(k.tabs[p]={});var B=d,v=e.nextZero(c,B),n=e.readASCII(c,B,v-B),B=v+1,B=B+2,v=e.nextZero(c,B);e.readASCII(c,B,v-B);
B=v+1;v=e.nextZero(c,B);e.readUTF8(c,B,v-B);B=v+1;v=e.readUTF8(c,B,t-(B-d));k.tabs[p][n]=v}else if("PLTE"==p)k.tabs[p]=e.readBytes(c,d,t);else if("hIST"==p)for(v=k.tabs.PLTE.length/3,k.tabs[p]=[],n=0;n<v;n++)k.tabs[p].push(f(c,d+2*n));else if("tRNS"==p)3==k.ctype?k.tabs[p]=e.readBytes(c,d,t):0==k.ctype?k.tabs[p]=f(c,d):2==k.ctype?k.tabs[p]=[f(c,d),f(c,d+2),f(c,d+4)]:b("tRNS for unsupported color type",k.ctype,t);else if("gAMA"==p)k.tabs[p]=e.readUint(c,d)/1E5;else if("sRGB"==p)k.tabs[p]=c[d];else if("bKGD"==
p)0==k.ctype||4==k.ctype?k.tabs[p]=[f(c,d)]:2==k.ctype||6==k.ctype?k.tabs[p]=[f(c,d),f(c,d+2),f(c,d+4)]:3==k.ctype&&(k.tabs[p]=c[d]);else if("IEND"==p){0==k.compress?m=a.decode._inflate(m):b("unsupported compression method:",k.interlace);0!=k.filter&&b("unsupported filter method:",k.filter);0==k.interlace?k.data=a.decode._filterZero(m,k,0,k.width,k.height):1==k.interlace?k.data=a.decode._readInterlace(m,k):b("unsupported interlace method:",k.interlace);break}else b("unknown chunk type",p,t);d+=t;
e.readUint(c,d);d+=4}delete k.compress;delete k.interlace;delete k.filter;return k};a.decode._inflate=function(a){return c.inflate(a)};a.decode._readInterlace=function(b,c){for(var d=c.width,e=c.height,f=a.decode._getBPP(c),g=f>>3,r=Math.ceil(d*f/8),t=new Uint8Array(e*r),p=0,n=[0,0,4,0,2,0,1],v=[0,4,0,2,0,1,0],B=[8,8,8,4,4,2,2],z=[8,8,4,4,2,2,1],x=0;7>x;){for(var w=B[x],u=z[x],y=0,A=0,D=n[x];D<e;)D+=w,A++;for(D=v[x];D<d;)D+=u,y++;D=Math.ceil(y*f/8);a.decode._filterZero(b,c,p,y,A);for(var E=0,G=n[x];G<
e;){for(var I=v[x],J=p+E*D<<3;I<d;){if(1==f){var F=b[J>>3],F=F>>7-(J&7)&1;t[G*r+(I>>3)]|=F<<7-((I&3)<<0)}2==f&&(F=b[J>>3],F=F>>6-(J&7)&3,t[G*r+(I>>2)]|=F<<6-((I&3)<<1));4==f&&(F=b[J>>3],F=F>>4-(J&7)&15,t[G*r+(I>>1)]|=F<<4-((I&1)<<2));if(8<=f)for(var F=G*r+I*g,H=0;H<g;H++)t[F+H]=b[(J>>3)+H];J+=f;I+=u}E++;G+=w}0!=y*A&&(p+=A*(1+D));x+=1}return t};a.decode._getBPP=function(a){var c=[1,null,3,1,2,null,4][a.ctype];null==c&&b("unsupported color type",a.ctype);return c*a.depth};a.decode._filterZero=function(b,
c,d,e,k){c=a.decode._getBPP(c);e=Math.ceil(e*c/8);var f=a.decode._paeth;c=Math.ceil(c/8);for(var g=0;g<k;g++){var h=d+g*e,l=h+g+1,n=b[l-1];if(0==n)for(var v=0;v<e;v++)b[h+v]=b[l+v];else if(1==n){for(v=0;v<c;v++)b[h+v]=b[l+v];for(v=c;v<e;v++)b[h+v]=b[l+v]+b[h+v-c]&255}else if(0==g){for(v=0;v<c;v++)b[h+v]=b[l+v];if(2==n)for(v=c;v<e;v++)b[h+v]=b[l+v]&255;if(3==n)for(v=c;v<e;v++)b[h+v]=b[l+v]+(b[h+v-c]>>1)&255;if(4==n)for(v=c;v<e;v++)b[h+v]=b[l+v]+f(b[h+v-c],0,0)&255}else{if(2==n)for(v=0;v<e;v++)b[h+
v]=b[l+v]+b[h+v-e]&255;if(3==n){for(v=0;v<c;v++)b[h+v]=b[l+v]+(b[h+v-e]>>1)&255;for(v=c;v<e;v++)b[h+v]=b[l+v]+(b[h+v-e]+b[h+v-c]>>1)&255}if(4==n){for(v=0;v<c;v++)b[h+v]=b[l+v]+f(0,b[h+v-e],0)&255;for(v=c;v<e;v++)b[h+v]=b[l+v]+f(b[h+v-c],b[h+v-e],b[h+v-c-e])&255}}}return b};a.decode._paeth=function(a,b,c){var d=a+b-c,e=Math.abs(d-a),f=Math.abs(d-b),d=Math.abs(d-c);return e<=f&&e<=d?a:f<=d?b:c};a.decode._IHDR=function(b,c,d){var e=a._bin;d.width=e.readUint(b,c);c+=4;d.height=e.readUint(b,c);c+=4;d.depth=
b[c];c++;d.ctype=b[c];c++;d.compress=b[c];c++;d.filter=b[c];c++;d.interlace=b[c]};a._bin={nextZero:function(a,b){for(;0!=a[b];)b++;return b},readUshort:function(a,b){return a[b]<<8|a[b+1]},writeUshort:function(a,b,c){a[b]=c>>8&255;a[b+1]=c&255},readUint:function(a,b){return 16777216*a[b]+(a[b+1]<<16|a[b+2]<<8|a[b+3])},writeUint:function(a,b,c){a[b]=c>>24&255;a[b+1]=c>>16&255;a[b+2]=c>>8&255;a[b+3]=c&255},readASCII:function(a,b,c){for(var d="",e=0;e<c;e++)d+=String.fromCharCode(a[b+e]);return d},writeASCII:function(a,
b,c){for(var d=0;d<c.length;d++)a[b+d]=c.charCodeAt(d)},readBytes:function(a,b,c){for(var d=[],e=0;e<c;e++)d.push(a[b+e]);return d},pad:function(a){return 2>a.length?"0"+a:a},readUTF8:function(b,c,d){for(var e="",f,g=0;g<d;g++)e+="%"+a._bin.pad(b[c+g].toString(16));try{f=decodeURIComponent(e)}catch(r){return a._bin.readASCII(b,c,d)}return f}}})(c,"function"==typeof pg?Ca:window.pako)})()}),ec=function(){var a;a=A.call(this)||this;a.addInputValidator(0,ArrayBuffer);return a};$jscomp.inherits(ec,A);
ec.prototype._run=function(){var a=this._getInput(0);if(a)if(this._isPng(a))try{var b=Eh.decode(a),c=Math.round(b.data.length/(b.width*b.height)),d=new E,e=new b.data.constructor(b.data.buffer,0,b.width*b.height*c);d.setData(e,b.width,b.height,c);this._output[0]=d}catch(f){console.warn(f)}else console.warn("This is not a PNG file, unable to decode this file.");else console.warn('PngDecoder requires an ArrayBuffer as input "0". Unable to continue.')};ec.prototype._isPng=function(a){a=new Uint8Array(a,
0,8);for(var b=new Uint8Array([137,80,78,71,13,10,26,10]),c=0;c<a.length;c++)if(a[c]!=b[c])return!1;return!0};var Ad=function(){var a;a=A.call(this)||this;a._decoders=[Ec,Ic,ec,dc];return a};$jscomp.inherits(Ad,A);Ad.prototype._run=function(){var a=this._getInput(0);if(a)for(var b=0;b<this._decoders.length;b++){var c=new this._decoders[b];c.addInput(a);c.update();if(c.getNumberOfOutputs()){this._output[0]=c.getOutput();this.setMetadata("decoderConstructor",this._decoders[b]);this.setMetadata("decoderName",
this._decoders[b].name);break}}else console.warn("The input buffer must not be null.")};var Xg=function(a){for(var b=Array(a),c=0;c<a;++c)b[c]=c;return b},Zg="undefined"!==typeof Float64Array,yc={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]},Ea=function(a,b,c,d){if(void 0===a){var e=yc.array[0];return e([])}"number"===typeof a&&(a=[a]);void 0===b&&(b=[a.length]);e=b.length;if(void 0===c){c=Array(e);for(var f=e-1,g=1;0<=
f;--f)c[f]=g,g*=b[f]}if(void 0===d)for(f=d=0;f<e;++f)0>c[f]&&(d-=(b[f]-1)*c[f]);f=Yg(a);for(g=yc[f];g.length<=e+1;)g.push(Wg(f,g.length-1));e=g[e+1];return e(a,b,c,d)},ig=function(a,b){for(var c=1,d=0;d<a.length;++d)c*=a[d];return Ea(new ($g(b||"float64"))(c),a)},Bd=function(){var a;a=A.call(this)||this;a.addInputValidator(0,E);a.setMetadata("componentOffset",0);return a};$jscomp.inherits(Bd,A);Bd.prototype._run=function(){if(this.hasValidInput()){for(var a=this._getInput(0),b=a.getMetadata("width"),
c=a.getMetadata("height"),d=a.getMetadata("ncpp"),e=this.getMetadata("componentOffset"),a=Ea(a.getData(),[b,c,d]),e=a.pick(null,null,e),a=ig([b,c],a.dtype),d=0;d<b;d++)for(var f=0;f<c;f++)a.set(d,f,e.get(d,f));e=new E;e.setData(a.data,b,c,1);this._output[0]=e}else console.warn("A filter of type ComponentProjectionImage2DFilter requires 1 input of Image2D.")};var Cd=function(){var a;a=A.call(this)||this;a.addInputValidator("ALL",E);return a};$jscomp.inherits(Cd,A);Cd.prototype._run=function(){var a=
this;if(2>this.getNumberOfInputs())console.warn("A filter of type ComponentMergeImage2DFilter needs 2 or more inputs.");else if(this.hasValidInput()){var b=this.getInputCategories().map(function(b){return a._getInput(b)});if(ah(b)){var c=b[0].getMetadata("width"),d=b[0].getMetadata("height"),e=b.map(function(a){return a.getMetadata("ncpp")}).reduce(function(a,b){return a+b}),f=Ea(b[0].getData()).dtype,g=ig([c,d,e],f),h=0;b.forEach(function(a,b){b=a.getMetadata("ncpp");a=Ea(a.getData(),[c,d,b]);for(var e=
0;e<c;e++)for(var f=0;f<d;f++)for(var k=0;k<b;k++)g.set(e,f,h+k,a.get(e,f,k));h+=b});this._output[0]=new E;this._output[0].setData(g.data,c,d,e)}else console.warn("A filter of type ComponentMergeImage2DFilter requires inputs to be the same dimensions and array type")}else console.warn("A filter of type ComponentMergeImage2DFilter requires inputs of Image2D.")};var Fh=function(a,b){for(var c=b[1].length-Math.abs(a.arrayBlockIndices[0])|0,d=Array(a.arrayArgs.length),e=Array(a.arrayArgs.length),f=0;f<
a.arrayArgs.length;++f)e[f]=b[2*f],d[f]=b[2*f+1];for(var g=[],h=[],l=[],k=[],m=[],f=0;f<a.arrayArgs.length;++f){0>a.arrayBlockIndices[f]?(l.push(0),k.push(c),g.push(c),h.push(c+a.arrayBlockIndices[f])):(l.push(a.arrayBlockIndices[f]),k.push(a.arrayBlockIndices[f]+c),g.push(0),h.push(a.arrayBlockIndices[f]));for(var r=[],n=0;n<d[f].length;n++)l[f]<=d[f][n]&&d[f][n]<k[f]&&r.push(d[f][n]-l[f]);m.push(r)}h=["SS"];k=["'use strict'"];r=[];for(n=0;n<c;++n)r.push(["s",n,"=SS[",n,"]"].join(""));for(f=0;f<
a.arrayArgs.length;++f){h.push("a"+f);h.push("t"+f);h.push("p"+f);for(n=0;n<c;++n)r.push(["t",f,"p",n,"=t",f,"[",l[f]+n,"]"].join(""));for(n=0;n<Math.abs(a.arrayBlockIndices[f]);++n)r.push(["t",f,"b",n,"=t",f,"[",g[f]+n,"]"].join(""))}for(f=0;f<a.scalarArgs.length;++f)h.push("Y"+f);0<a.shapeArgs.length&&r.push("shape=SS.slice(0)");if(0<a.indexArgs.length){n=Array(c);for(f=0;f<c;++f)n[f]="0";r.push(["index=[",n.join(","),"]"].join(""))}for(f=0;f<a.offsetArgs.length;++f){g=a.offsetArgs[f];l=[];for(n=
0;n<g.offset.length;++n)0!==g.offset[n]&&(1===g.offset[n]?l.push(["t",g.array,"p",n].join("")):l.push([g.offset[n],"*t",g.array,"p",n].join("")));0===l.length?r.push("q"+f+"=0"):r.push(["q",f,"=",l.join("+")].join(""))}f=[].concat(a.pre.thisVars).concat(a.body.thisVars).concat(a.post.thisVars);if(0!==f.length){f.sort();for(var n=1,g=f.length,l=f[0],p,q=1;q<g;++q)p=l,l=f[q],l!==p&&(q===n?n++:f[n++]=l);f.length=n}r=r.concat(f);0<r.length&&k.push("var "+r.join(","));for(f=0;f<a.arrayArgs.length;++f)k.push("p"+
f+"|=0");3<a.pre.body.length&&k.push(od(a.pre,a,e));r=od(a.body,a,e);a:for(f=0,n=m[0].length;f<n;){for(g=1;g<m.length;++g)if(m[g][f]!==m[0][f])break a;++f}f<c?k.push(bh(f,m[0],a,r)):k.push(Jf(m[0],a,r));3<a.post.body.length&&k.push(od(a.post,a,e));a.debug&&console.log("-----Generated cwise routine for ",b,":\n"+k.join("\n")+"\n----------");a=[a.funcName||"unnamed","_cwise_loop_",d[0].join("s"),"m",f,ch(e)].join("");return(new Function(["function ",a,"(",h.join(","),"){",k.join("\n"),"} return ",a].join("")))()},
ua=function(a){var b=new dh;b.pre=a.pre;b.body=a.body;b.post=a.post;var c=a.args.slice(0);b.argTypes=c;for(var d=0;d<c.length;++d){var e=c[d];if("array"===e||"object"===typeof e&&e.blockIndices){b.argTypes[d]="array";b.arrayArgs.push(d);b.arrayBlockIndices.push(e.blockIndices?e.blockIndices:0);b.shimArgs.push("array"+d);if(d<b.pre.args.length&&0<b.pre.args[d].count)throw Error("cwise: pre() block may not reference array args");if(d<b.post.args.length&&0<b.post.args[d].count)throw Error("cwise: post() block may not reference array args");
}else if("scalar"===e)b.scalarArgs.push(d),b.shimArgs.push("scalar"+d);else if("index"===e){b.indexArgs.push(d);if(d<b.pre.args.length&&0<b.pre.args[d].count)throw Error("cwise: pre() block may not reference array index");if(d<b.body.args.length&&b.body.args[d].lvalue)throw Error("cwise: body() block may not write to array index");if(d<b.post.args.length&&0<b.post.args[d].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===e){b.shapeArgs.push(d);if(d<b.pre.args.length&&
b.pre.args[d].lvalue)throw Error("cwise: pre() block may not write to array shape");if(d<b.body.args.length&&b.body.args[d].lvalue)throw Error("cwise: body() block may not write to array shape");if(d<b.post.args.length&&b.post.args[d].lvalue)throw Error("cwise: post() block may not write to array shape");}else if("object"===typeof e&&e.offset)b.argTypes[d]="offset",b.offsetArgs.push({array:e.array,offset:e.offset}),b.offsetArgIndex.push(d);else throw Error("cwise: Unknown argument type "+c[d]);}if(0>=
b.arrayArgs.length)throw Error("cwise: No array arguments specified");if(b.pre.args.length>c.length)throw Error("cwise: Too many arguments in pre() block");if(b.body.args.length>c.length)throw Error("cwise: Too many arguments in body() block");if(b.post.args.length>c.length)throw Error("cwise: Too many arguments in post() block");b.debug=!!a.printCode||!!a.debug;b.funcName=a.funcName||"cwise";b.blockSize=a.blockSize||64;a=["'use strict'","var CACHED={}"];c=[];a.push(["return function ",b.funcName+
"_cwise_thunk","(",b.shimArgs.join(","),"){"].join(""));for(var d=[],e=[],f=[["array",b.arrayArgs[0],".shape.slice(",Math.max(0,b.arrayBlockIndices[0]),0>b.arrayBlockIndices[0]?","+b.arrayBlockIndices[0]+")":")"].join("")],g=[],h=[],l=0;l<b.arrayArgs.length;++l){var k=b.arrayArgs[l];c.push(["t",k,"=array",k,".dtype,r",k,"=array",k,".order"].join(""));d.push("t"+k);d.push("r"+k);e.push("t"+k);e.push("r"+k+".join()");f.push("array"+k+".data");f.push("array"+k+".stride");f.push("array"+k+".offset|0");
0<l&&(g.push("array"+b.arrayArgs[0]+".shape.length===array"+k+".shape.length+"+(Math.abs(b.arrayBlockIndices[0])-Math.abs(b.arrayBlockIndices[l]))),h.push("array"+b.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,b.arrayBlockIndices[0])+"]===array"+k+".shape[shapeIndex+"+Math.max(0,b.arrayBlockIndices[l])+"]"))}1<b.arrayArgs.length&&(a.push("if (!("+g.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),a.push("for(var shapeIndex=array"+b.arrayArgs[0]+".shape.length-"+
Math.abs(b.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),a.push("if (!("+h.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),a.push("}"));for(l=0;l<b.scalarArgs.length;++l)f.push("scalar"+b.scalarArgs[l]);c.push(["type=[",e.join(","),"].join()"].join(""));c.push("proc=CACHED[type]");a.push("var "+c.join(","));a.push(["if(!proc){CACHED[type]=proc=compile([",d.join(","),"])}return proc(",f.join(","),")}"].join(""));b.debug&&console.log("-----Generated thunk:\n"+
a.join("\n")+"\n----------");return(new Function("compile",a.join("\n")))(Fh.bind(void 0,b))},Fb=va(function(a,b){function c(a){if(!a)return e;for(var b=0;b<a.args.length;++b){var c=a.args[b];a.args[b]=0===b?{name:c,lvalue:!0,rvalue:!!a.rvalue,count:a.count||1}:{name:c,lvalue:!1,rvalue:!0,count:1}}a.thisVars||(a.thisVars=[]);a.localVars||(a.localVars=[]);return a}function d(a){for(var b=[],d=0;d<a.args.length;++d)b.push("a"+d);b=new Function("P",["return function ",a.funcName,"_ndarrayops(",b.join(","),
") {P(",b.join(","),");return a0}"].join(""));a=ua({args:a.args,pre:c(a.pre),body:c(a.body),post:c(a.proc),funcName:a.funcName});return b(a)}var e={body:"",args:[],thisVars:[],localVars:[]},f={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var a in f){var c=f[a];b[a]=d({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+c+"c"},funcName:a});b[a+"eq"]=d({args:["array","array"],body:{args:["a","b"],body:"a"+c+"=b"},
rvalue:!0,funcName:a+"eq"});b[a+"s"]=d({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+c+"s"},funcName:a+"s"});b[a+"seq"]=d({args:["array","scalar"],body:{args:["a","s"],body:"a"+c+"=s"},rvalue:!0,funcName:a+"seq"})}})();var g={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var a in g){var c=g[a];b[a]=d({args:["array","array"],body:{args:["a","b"],body:"a="+c+"b"},funcName:a});b[a+"eq"]=d({args:["array"],body:{args:["a"],body:"a="+c+"a"},rvalue:!0,count:2,funcName:a+"eq"})}})();
var h={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var a in h){var c=h[a];b[a]=d({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+c+"c"},funcName:a});b[a+"s"]=d({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+c+"s"},funcName:a+"s"});b[a+"eq"]=d({args:["array","array"],body:{args:["a","b"],body:"a=a"+c+"b"},rvalue:!0,count:2,funcName:a+"eq"});b[a+"seq"]=d({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+c+"s"},
rvalue:!0,count:2,funcName:a+"seq"})}})();var l="abs acos asin atan ceil cos exp floor log round sin sqrt tan".split(" ");(function(){for(var a=0;a<l.length;++a){var c=l[a];b[c]=d({args:["array","array"],pre:{args:[],body:"this_f=Math."+c,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:c});b[c+"eq"]=d({args:["array"],pre:{args:[],body:"this_f=Math."+c,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:c+
"eq"})}})();var k=["max","min","atan2","pow"];(function(){for(var a=0;a<k.length;++a){var c=k[a];b[c]=d({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+c,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:c});b[c+"s"]=d({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+c,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:c+"s"});b[c+"eq"]=d({args:["array","array"],pre:{args:[],
body:"this_f=Math."+c,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:c+"eq"});b[c+"seq"]=d({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+c,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:c+"seq"})}})();var m=["atan2","pow"];(function(){for(var a=0;a<m.length;++a){var c=m[a];b[c+"op"]=d({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+c,thisVars:["this_f"]},
body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:c+"op"});b[c+"ops"]=d({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+c,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:c+"ops"});b[c+"opeq"]=d({args:["array","array"],pre:{args:[],body:"this_f=Math."+c,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:c+"opeq"});b[c+"opseq"]=d({args:["array","scalar"],
pre:{args:[],body:"this_f=Math."+c,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:c+"opseq"})}})();b.any=ua({args:["array"],pre:e,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"});b.all=ua({args:["array"],pre:e,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},
post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"});b.sum=ua({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"});b.prod=ua({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",
localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"});b.norm2squared=ua({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"});b.norm2=ua({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},
body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"});b.norminf=ua({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},
funcName:"norminf"});b.norm1=ua({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"});b.sup=ua({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,
rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});b.inf=ua({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});b.argmin=ua({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",
args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],
thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});b.argmax=ua({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});b.random=d({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"});b.assign=d({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"});b.assigns=
d({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"});b.equals=ua({args:["array","array"],pre:e,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})}),fc=Array(256);(function(a){for(var b=0;256>b;++b){for(var c=b,d=b,e=7,c=c>>>1;c;c>>>=1)d<<=1,d|=c&1,--e;a[b]=d<<e&255}})(fc);var wa={INT_BITS:32,INT_MAX:2147483647,
INT_MIN:-2147483648,sign:function(a){return(0<a)-(0>a)},abs:function(a){var b=a>>31;return(a^b)-b},min:function(a,b){return b^(a^b)&-(a<b)},max:function(a,b){return a^(a^b)&-(a<b)},isPow2:function(a){return!(a&a-1)&&!!a},log2:function(a){var b,c;b=(65535<a)<<4;a>>>=b;c=(255<a)<<3;a>>>=c;b|=c;c=(15<a)<<2;a>>>=c;b|=c;c=(3<a)<<1;return b|c|a>>>c>>1},log10:function(a){return 1E9<=a?9:1E8<=a?8:1E7<=a?7:1E6<=a?6:1E5<=a?5:1E4<=a?4:1E3<=a?3:100<=a?2:10<=a?1:0},popCount:function(a){a-=a>>>1&1431655765;a=(a&
858993459)+(a>>>2&858993459);return 16843009*(a+(a>>>4)&252645135)>>>24},countTrailingZeros:Kf,nextPow2:function(a){a+=0===a;--a;a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=a>>>8;return(a|a>>>16)+1},prevPow2:function(a){a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=a>>>8;a|=a>>>16;return a-(a>>>1)},parity:function(a){a^=a>>>16;a^=a>>>8;return 27030>>>((a^a>>>4)&15)&1},reverse:function(a){return fc[a&255]<<24|fc[a>>>8&255]<<16|fc[a>>>16&255]<<8|fc[a>>>24&255]},interleave2:function(a,b){a&=65535;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;
a=(a|a<<2)&858993459;b&=65535;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1},deinterleave2:function(a,b){a=a>>>b&1431655765;a=(a|a>>>1)&858993459;a=(a|a>>>2)&252645135;a=(a|a>>>4)&16711935;return((a|a>>>16)&65535)<<16>>16},interleave3:function(a,b,c){a&=1023;a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;b&=1023;b=(b|b<<16)&4278190335;b=(b|b<<8)&251719695;b=(b|b<<4)&3272356035;c&=1023;c=(c|c<<16)&4278190335;c=(c|
c<<8)&251719695;c=(c|c<<4)&3272356035;return(a|a<<2)&1227133513|((b|b<<2)&1227133513)<<1|((c|c<<2)&1227133513)<<2},deinterleave3:function(a,b){a=a>>>b&1227133513;a=(a|a>>>2)&3272356035;a=(a|a>>>4)&251719695;a=(a|a>>>8)&4278190335;return((a|a>>>16)&1023)<<22>>22},nextCombination:function(a){var b=a|a-1;return b+1|(~b&-~b)-1>>>Kf(a)+1}},xa=function(a,b){"undefined"===typeof b&&(b=0);switch(typeof a){case "number":if(0<a){a|=0;var c,d;c=Array(a);for(d=0;d<a;++d)c[d]=b;return c}break;case "object":if("number"===
typeof a.length)return Lf(a,b,0)}return[]},Dd=va(function(a,b){function c(a){if(a){var b=wa.log2(a.length||a.byteLength);u[b].push(a)}}function d(a){a=wa.nextPow2(a);var b=wa.log2(a),b=u[b];return 0<b.length?b.pop():new ArrayBuffer(a)}function e(a){return new Uint8Array(d(a),0,a)}function f(a){return new Uint16Array(d(2*a),0,a)}function g(a){return new Uint32Array(d(4*a),0,a)}function h(a){return new Int8Array(d(a),0,a)}function l(a){return new Int16Array(d(2*a),0,a)}function k(a){return new Int32Array(d(4*
a),0,a)}function m(a){return new Float32Array(d(4*a),0,a)}function n(a){return new Float64Array(d(8*a),0,a)}function t(a){return v?new Uint8ClampedArray(d(a),0,a):e(a)}function p(a){return new DataView(d(a),0,a)}function q(a){a=wa.nextPow2(a);var b=wa.log2(a),b=x[b];return 0<b.length?b.pop():new y(a)}pb.__TYPEDARRAY_POOL||(pb.__TYPEDARRAY_POOL={UINT8:xa([32,0]),UINT16:xa([32,0]),UINT32:xa([32,0]),INT8:xa([32,0]),INT16:xa([32,0]),INT32:xa([32,0]),FLOAT:xa([32,0]),DOUBLE:xa([32,0]),DATA:xa([32,0]),
UINT8C:xa([32,0]),BUFFER:xa([32,0])});var v="undefined"!==typeof Uint8ClampedArray,B=pb.__TYPEDARRAY_POOL;B.UINT8C||(B.UINT8C=xa([32,0]));B.BUFFER||(B.BUFFER=xa([32,0]));var u=B.DATA,x=B.BUFFER;b.free=function(a){if(Gf(a))x[wa.log2(a.length)].push(a);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&(a=a.buffer),a){var b=wa.log2(a.length||a.byteLength)|0;u[b].push(a)}};b.freeUint8=b.freeUint16=b.freeUint32=b.freeInt8=b.freeInt16=b.freeInt32=b.freeFloat32=b.freeFloat=b.freeFloat64=
b.freeDouble=b.freeUint8Clamped=b.freeDataView=function(a){c(a.buffer)};b.freeArrayBuffer=c;b.freeBuffer=function(a){x[wa.log2(a.length)].push(a)};b.malloc=function(a,b){if(void 0===b||"arraybuffer"===b)return d(a);switch(b){case "uint8":return e(a);case "uint16":return f(a);case "uint32":return g(a);case "int8":return h(a);case "int16":return l(a);case "int32":return k(a);case "float":case "float32":return m(a);case "double":case "float64":return n(a);case "uint8_clamped":return t(a);case "buffer":return q(a);
case "data":case "dataview":return p(a)}return null};b.mallocArrayBuffer=d;b.mallocUint8=e;b.mallocUint16=f;b.mallocUint32=g;b.mallocInt8=h;b.mallocInt16=l;b.mallocInt32=k;b.mallocFloat32=b.mallocFloat=m;b.mallocFloat64=b.mallocDouble=n;b.mallocUint8Clamped=t;b.mallocDataView=p;b.mallocBuffer=q;b.clearCache=function(){for(var a=0;32>a;++a)B.UINT8[a].length=0,B.UINT16[a].length=0,B.UINT32[a].length=0,B.INT8[a].length=0,B.INT16[a].length=0,B.INT32[a].length=0,B.FLOAT[a].length=0,B.DOUBLE[a].length=
0,B.UINT8C[a].length=0,u[a].length=0,x[a].length=0}}),Ed=function(a,b,c,d,e,f,g){a|=0;b|=0;c|=0;e|=0;f|=0;if(wa.isPow2(c))zc(a,b,c,d,e,f);else{var h;a|=0;b|=0;c|=0;e|=0;f|=0;h=g|0;g=wa.nextPow2(2*c+1);var l=h+c,k=l+c,m=k+g,n=m+g,t=n+g,p=-a*Math.PI/c,q,v,B,u,x,w;for(w=0;w<c;++w)q=w*w%(2*c)*p,B=Math.cos(q),u=Math.sin(q),d[n+(g-w)]=d[n+w]=d[h+w]=B,d[t+(g-w)]=d[t+w]=d[l+w]=u;for(w=c;w<=g-c;++w)d[n+w]=0;for(w=c;w<=g-c;++w)d[t+w]=0;zc(1,1,g,d,n,t);p=0>a?1/c:1;for(a=0;a<b;++a){for(w=0;w<c;++w)q=d[e+w],v=
d[f+w],B=d[h+w],u=-d[l+w],x=B*(q+v),q*=u-B,B=v*(B+u),d[k+w]=x-B,d[m+w]=x+q;for(w=c;w<g;++w)d[k+w]=0;for(w=c;w<g;++w)d[m+w]=0;zc(1,1,g,d,k,m);for(w=0;w<g;++w)q=d[k+w],v=d[m+w],B=d[n+w],u=d[t+w],x=B*(q+v),q*=u-B,B=v*(B+u),d[k+w]=x-B,d[m+w]=x+q;zc(-1,1,g,d,k,m);for(w=0;w<c;++w)q=d[k+w],v=d[m+w],B=d[h+w],u=-d[l+w],x=B*(q+v),q*=u-B,B=v*(B+u),d[e+w]=p*(x-B),d[f+w]=p*(x+q);e+=c;f+=c}}};Ed.scratchMemory=function(a){return wa.isPow2(a)?0:2*a+4*wa.nextPow2(2*a+1)};var jg=function(a,b,c){var d=b.shape,e=d.length,
f=1,g=Array(e),h=0,l,k;for(l=e-1;0<=l;--l)if(g[l]=f,f*=d[l],h=Math.max(h,Ed.scratchMemory(d[l])),b.shape[l]!==c.shape[l])throw Error("Shape mismatch, real and imaginary arrays must have same size");l=4*f+h;var h="array"===b.dtype||"float64"===b.dtype||"custom"===b.dtype?Dd.mallocDouble(l):Dd.mallocFloat(l),m=Ea(h,d.slice(0),g,0),n=Ea(h,d.slice(0),g.slice(0),f),t=Ea(h,d.slice(0),g.slice(0),2*f),g=Ea(h,d.slice(0),g.slice(0),3*f),p,q,v,u=4*f;Fb.assign(m,b);Fb.assign(n,c);for(l=e-1;0<=l;--l){Ed(a,f/d[l],
d[l],h,m.offset,n.offset,u);if(0===l)break;p=1;q=t.stride;v=g.stride;for(k=l-1;k<e;++k)v[k]=q[k]=p,p*=d[k];for(k=l-2;0<=k;--k)v[k]=q[k]=p,p*=d[k];Fb.assign(t,m);Fb.assign(g,n);k=m;m=t;t=k;k=n;n=g;g=k}Fb.assign(b,m);Fb.assign(c,n);Dd.free(h)},Fd={FORWARD:1,INVERSE:-1},Gb=function(a){var b;b=A.call(this)||this;b.direction=a;b.setMetadata("direction",b.direction);if(void 0===Fd[b.direction])throw Error(b.direction+" is not a valid fourier transform direction. Please try one of: "+Object.keys(Fd));b.addInputValidator(0,
oa);b.addInputValidator(1,oa);return b};$jscomp.inherits(Gb,A);Gb.prototype._run=function(){if(this.hasValidInput()){var a=this._getInput(0),b=this._getInput(1),c=a.getMetadata("length");c!==b.getMetadata("length")&&console.warn("The imaginary and real components of the signal need to be of equal length.");a=Ea(a.clone().getData(),[c]);b=Ea(b.clone().getData(),[c]);jg(Fd[this.direction],a,b);this._output[0]=new oa;this._output[0].setData(a.data);this._output[1]=new oa;this._output[1].setData(b.data)}else console.warn("A filter of type BaseFourierSignalFilter requires 2 inputs of Signal1D.")};
var kg=function(){return Gb.call(this,"FORWARD")||this};$jscomp.inherits(kg,Gb);var lg=function(){return Gb.call(this,"INVERSE")||this};$jscomp.inherits(lg,Gb);var Gd={FORWARD:1,INVERSE:-1},Hb=function(a){var b;b=A.call(this)||this;b.direction=a;if(void 0===Gd[b.direction])throw Error(b.direction+" is not a valid fourier transform direction. Please try one of: "+Object.keys(Gd));b.addInputValidator(0,E);b.addInputValidator(1,E);return b};$jscomp.inherits(Hb,A);Hb.prototype._run=function(){if(this.hasValidInput()){var a=
this._getInput(0),b=this._getInput(1);if(1<a.getMetadata("ncpp"))console.warn("Please make sure the input images are made of exactly 1 channel.");else{var c=a.getMetadata("width"),d=a.getMetadata("height");c===b.getMetadata("width")&&d===b.getMetadata("height")||console.warn("Please make sure the real and imaginary input images are the same dimensions");a=Ea(a.getDataAsFloat32Array(),[c,d]);b=Ea(b.getDataAsFloat32Array(),[c,d]);this.setMetadata("direction",this.direction);jg(Gd[this.direction],a,
b);this._output[0]=new E;this._output[0].setData(a.data,c,d,1);this._output[0].setMetadata("ncpp",1);this._output[1]=new E;this._output[1].setData(b.data,c,d,1);this._output[1].setMetadata("ncpp",1)}}else console.warn("A filter of type BaseFourierSignalFilter requires 2 inputs of Signal1D.")};var mg=function(){return Hb.call(this,"FORWARD")||this};$jscomp.inherits(mg,Hb);var ng=function(){return Hb.call(this,"INVERSE")||this};$jscomp.inherits(ng,Hb);var Jc=function(){var a;a=P.call(this)||this;a.addInputValidator(0,
E);return a};$jscomp.inherits(Jc,P);Jc.prototype._run=function(){if(this.hasValidInput()){var a=this._getInput(),b=a.getWidth()*a.getHeight(),c=a.getDataCopy();this._forEachPixelOfSuch(c,0,b,1);this._addOutput(E).setData(c,a.getWidth(),a.getHeight(),a.getComponentsPerPixel())}};Jc.prototype._forEachPixelOfSuch=function(a,b,c,d){if(this.hasEvent("pixel"))for(var e=this._getInput(),f=e.getData(),g=e.getComponentsPerPixel(),h;b<c;b+=d){var l=b*g,k=e.get2dPositionFrom1dIndex(b);h=f.slice(l,l+g);if((h=
this.triggerEvent("pixel",k,h))&&h.length==g)for(k=0;k<g;k++)a[l+k]=h[k]}else console.warn("No function to apply per pixel was specified.")};var Hd=function(){var a;a=P.call(this)||this;a.addInputValidator(0,E);a.addInputValidator(1,E);return a};$jscomp.inherits(Hd,P);Hd.prototype._run=function(){if(this.hasValidInput()&&this.hasSameSizeInput()&&this.hasValidInput()){var a=this._getInput(0),b=this._getInput(1);if(1!=b.getComponentsPerPixel())console.warn("The scaling image must have one single band.");
else{for(var c=a.getWidth()*a.getHeight(),d=a.getComponentsPerPixel(),e=a.getDataCopy(),b=b.getData(),f=0;f<c;f++)for(var g=0;g<d;g++)e[f*d+g]*=b[f];this._addOutput(E).setData(e,a.getWidth(),a.getHeight())}}};var Gh=va(function(a,b){(function(b,d){a.exports=d()})(pb,function(){function a(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1}function b(a,b){this.type=a;this.value=void 0!==b&&null!==b?b:0}function e(a,b){this.tokens=a;this.parser=b;this.unaryOps=b.unaryOps;this.binaryOps=b.binaryOps;
this.ternaryOps=b.ternaryOps;this.functions=b.functions}function f(a){return"string"===typeof a?JSON.stringify(a).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):a}function g(a,c,d,e,f){for(var h=[],k=[],l,m,p,n,r=0,q=a.length;r<q;r++)if(n=a[r],l=n.type,"INUMBER"===l)h.push(n);else if("IVAR"===l&&f.hasOwnProperty(n.value))n=new b("INUMBER",f[n.value]),h.push(n);else if("IOP2"===l&&1<h.length)m=h.pop(),l=h.pop(),n=d[n.value],n=new b("INUMBER",n(l.value,m.value)),h.push(n);else if("IOP3"===
l&&2<h.length)p=h.pop(),m=h.pop(),l=h.pop(),"?"===n.value?h.push(l.value?m.value:p.value):(n=e[n.value],n=new b("INUMBER",n(l.value,m.value,p.value)),h.push(n));else if("IOP1"===l&&0<h.length)l=h.pop(),n=c[n.value],n=new b("INUMBER",n(l.value)),h.push(n);else if("IEXPR"===l){for(;0<h.length;)k.push(h.shift());k.push(new b("IEXPR",g(n.value,c,d,e,f)))}else if("IMEMBER"===l&&0<h.length)l=h.pop(),h.push(new b("INUMBER",l.value[n.value]));else{for(;0<h.length;)k.push(h.shift());k.push(n)}for(;0<h.length;)k.push(h.shift());
return k}function h(a,c,d){for(var e=[],f=0,g=a.length;f<g;f++){var k=a[f],l=k.type;if("IVAR"===l&&k.value===c)for(k=0;k<d.tokens.length;k++)l=d.tokens[k],l="IOP1"===l.type?ba(l.value):"IOP2"===l.type?X(l.value):"IOP3"===l.type?ha(l.value):new b(l.type,l.value),e.push(l);else"IEXPR"===l?e.push(new b("IEXPR",h(k.value,c,d))):e.push(k)}return e}function l(a,b,c){for(var d=[],e,f,g,h,k=0,m=a.length;k<m;k++)if(h=a[k],e=h.type,"INUMBER"===e)d.push(h.value);else if("IOP2"===e)f=d.pop(),e=d.pop(),h=b.binaryOps[h.value],
d.push(h(e,f));else if("IOP3"===e)g=d.pop(),f=d.pop(),e=d.pop(),"?"===h.value?d.push(l(e?f:g,b,c)):(h=b.ternaryOps[h.value],d.push(h(e,f,g)));else if("IVAR"===e)if(h.value in b.functions)d.push(b.functions[h.value]);else if(e=c[h.value],void 0!==e)d.push(e);else throw Error("undefined variable: "+h.value);else if("IOP1"===e)e=d.pop(),h=b.unaryOps[h.value],d.push(h(e));else if("IFUNCALL"===e){h=h.value;for(e=[];0<h--;)e.unshift(d.pop());h=d.pop();if(h.apply&&h.call)d.push(h.apply(void 0,e));else throw Error(h+
" is not a function");}else if("IEXPR"===e)d.push(h.value);else if("IMEMBER"===e)e=d.pop(),d.push(e[h.value]);else throw Error("invalid Expression");if(1<d.length)throw Error("invalid Expression (parity)");return d[0]}function k(a,b){for(var c=[],d,e,g,h,l=0,m=a.length;l<m;l++)if(h=a[l],d=h.type,"INUMBER"===d)"number"===typeof h.value&&0>h.value?c.push("("+h.value+")"):c.push(f(h.value));else if("IOP2"===d)e=c.pop(),d=c.pop(),h=h.value,b?"^"===h?c.push("Math.pow("+d+", "+e+")"):"and"===h?c.push("(!!"+
d+" && !!"+e+")"):"or"===h?c.push("(!!"+d+" || !!"+e+")"):"||"===h?c.push("(String("+d+") + String("+e+"))"):"=="===h?c.push("("+d+" === "+e+")"):"!="===h?c.push("("+d+" !== "+e+")"):c.push("("+d+" "+h+" "+e+")"):c.push("("+d+" "+h+" "+e+")");else if("IOP3"===d)if(g=c.pop(),e=c.pop(),d=c.pop(),h=h.value,"?"===h)c.push("("+d+" ? "+e+" : "+g+")");else throw Error("invalid Expression");else if("IVAR"===d)c.push(h.value);else if("IOP1"===d)d=c.pop(),h=h.value,"-"===h||"+"===h?c.push("("+h+d+")"):b?"not"===
h?c.push("(!"+d+")"):"!"===h?c.push("fac("+d+")"):c.push(h+"("+d+")"):"!"===h?c.push("("+d+"!)"):c.push("("+h+" "+d+")");else if("IFUNCALL"===d){e=h.value;for(d=[];0<e--;)d.unshift(c.pop());h=c.pop();c.push(h+"("+d.join(", ")+")")}else if("IMEMBER"===d)d=c.pop(),c.push(d+"."+h.value);else if("IEXPR"===d)c.push("("+k(h.value,b)+")");else throw Error("invalid Expression");if(1<c.length)throw Error("invalid Expression (parity)");return c[0]}function m(b,c){for(var d=0,e=b.length;d<e;d++){var f=b[d];
"IVAR"===f.type&&-1===a(c,f.value)?c.push(f.value):"IEXPR"===f.type&&m(f.value,c)}}function n(a,b){return Number(a)+Number(b)}function t(a,b){return a-b}function p(a,b){return a*b}function q(a,b){return a/b}function v(a,b){return a%b}function u(a,b){return""+a+b}function z(a,b){return a===b}function x(a,b){return a!==b}function w(a,b){return a>b}function y(a,b){return a<b}function A(a,b){return a>=b}function E(a,b){return a<=b}function D(a,b){return!(!a||!b)}function G(a,b){return!(!a&&!b)}function I(a){return(Math.exp(a)-
Math.exp(-a))/2}function J(a){return(Math.exp(a)+Math.exp(-a))/2}function K(a){return Infinity===a?1:-Infinity===a?-1:(Math.exp(a)-Math.exp(-a))/(Math.exp(a)+Math.exp(-a))}function F(a){return-Infinity===a?a:Math.log(a+Math.sqrt(a*a+1))}function H(a){return Math.log(a+Math.sqrt(a*a-1))}function L(a){return Math.log((1+a)/(1-a))/2}function N(a){return Math.log(a)*Math.LOG10E}function P(a){return-a}function R(a){return!a}function S(a){return 0>a?Math.ceil(a):Math.floor(a)}function U(a){return Math.random()*
(a||1)}function V(a){return da(a+1)}function aa(a){return String(a).length}function Y(){for(var a=0,b=0,c=0,d=arguments.length;c<d;c++){var e=Math.abs(arguments[c]),f;b<e?(f=b/e,a=a*f*f+1,b=e):0<e?(f=e/b,a+=f*f):a+=e}return Infinity===b?Infinity:b*Math.sqrt(a)}function Z(a,b,c){return a?b:c}function da(a){var b,c;c=a;if(isFinite(c)&&c===Math.round(c)){if(0>=a)return isFinite(a)?Infinity:NaN;if(171<a)return Infinity;c=a-2;for(--a;1<c;)a*=c,c--;0===a&&(a=1);return a}if(.5>a)return Math.PI/(Math.sin(Math.PI*
a)*da(1-a));if(171.35<=a)return Infinity;if(85<a){c=a*a;b=c*a;var d=b*a,e=d*a;return Math.sqrt(2*Math.PI/a)*Math.pow(a/Math.E,a)*(1+1/(12*a)+1/(288*c)-139/(51840*b)-571/(2488320*d)+163879/(209018880*e)+5246819/(75246796800*e*a))}--a;c=ia[0];for(b=1;b<ia.length;++b)c+=ia[b]/(a+b);b=a+ka+.5;return Math.sqrt(2*Math.PI)*Math.pow(b,a+.5)*Math.exp(-b)*c}function ea(a,b,c,d){this.type=a;this.value=b;this.line=c;this.column=d}function T(a,b,c,d,e){this.column=this.line=this.pos=0;this.current=null;this.unaryOps=
b;this.binaryOps=c;this.ternaryOps=d;this.consts=e;this.expression=a;this.savedPosition=0;this.savedCurrent=null;this.savedColumn=this.savedLine=0}function ba(a){var c=la[a];c||(c=la[a]=new b("IOP1",a));return c}function X(a){var c=ma[a];c||(c=ma[a]=new b("IOP2",a));return c}function ha(a){var c=na[a];c||(c=na[a]=new b("IOP3",a));return c}function ga(a,b){this.parser=a;this.tokens=b;this.nextToken=this.current=null;this.next();this.savedNextToken=this.savedCurrent=null}function ca(){this.unaryOps=
{sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:Math.sinh||I,cosh:Math.cosh||J,tanh:Math.tanh||K,asinh:Math.asinh||F,acosh:Math.acosh||H,atanh:Math.atanh||L,sqrt:Math.sqrt,log:Math.log,ln:Math.log,lg:Math.log10||N,log10:Math.log10||N,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:Math.trunc||S,"-":P,"+":Number,exp:Math.exp,not:R,length:aa,"!":V};this.binaryOps={"+":n,"-":t,"*":p,"/":q,"%":v,"^":Math.pow,"||":u,"==":z,"!=":x,">":w,"<":y,
">=":A,"<=":E,and:D,or:G};this.ternaryOps={"?":Z};this.functions={random:U,fac:V,min:Math.min,max:Math.max,hypot:Math.hypot||Y,pyt:Math.hypot||Y,pow:Math.pow,atan2:Math.atan2,"if":Z,gamma:da};this.consts={E:Math.E,PI:Math.PI,"true":!0,"false":!1}}b.prototype.toString=function(){switch(this.type){case "INUMBER":case "IOP1":case "IOP2":case "IOP3":case "IVAR":return this.value;case "IFUNCALL":return"CALL "+this.value;case "IMEMBER":return"."+this.value;default:return"Invalid Instruction"}};e.prototype.simplify=
function(a){a=a||{};return new e(g(this.tokens,this.unaryOps,this.binaryOps,this.ternaryOps,a),this.parser)};e.prototype.substitute=function(a,b){b instanceof e||(b=this.parser.parse(String(b)));return new e(h(this.tokens,a,b),this.parser)};e.prototype.evaluate=function(a){a=a||{};return l(this.tokens,this,a)};e.prototype.toString=function(){return k(this.tokens,!1)};e.prototype.symbols=function(){var a=[];m(this.tokens,a);return a};e.prototype.variables=function(){var a=[];m(this.tokens,a);var b=
this.functions;return a.filter(function(a){return!(a in b)})};e.prototype.toJSFunction=function(a,b){var c=this,d=new Function(a,"with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return "+k(this.simplify(b).tokens,!0)+"; }");return function(){return d.apply(c,arguments)}};var ka=4.7421875,ia=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,
-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];ea.prototype.toString=function(){return this.type+": "+this.value};T.prototype.newToken=function(a,b,c,d){return new ea(a,b,null!=c?c:this.line,null!=d?d:this.column)};T.prototype.save=function(){this.savedPosition=this.pos;this.savedCurrent=this.current;this.savedLine=this.line;this.savedColumn=this.column};T.prototype.restore=function(){this.pos=this.savedPosition;
this.current=this.savedCurrent;this.line=this.savedLine;this.column=this.savedColumn};T.prototype.next=function(){if(this.pos>=this.expression.length)return this.newToken("TEOF","EOF");if(this.isWhitespace()||this.isComment())return this.next();if(this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isComma()||this.isNamedOp()||this.isConst()||this.isName())return this.current;this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')};T.prototype.isString=function(){var a=
!1,b=this.line,c=this.column,d=this.pos,e=this.expression.charAt(d);if("'"===e||'"'===e){this.pos++;this.column++;for(var f=this.expression.indexOf(e,d+1);0<=f&&this.pos<this.expression.length;){this.pos=f+1;if("\\"!==this.expression.charAt(f-1)){a=this.expression.substring(d+1,f);this.current=this.newToken("TSTRING",this.unescape(a),b,c);b=a.indexOf("\n");for(c=-1;0<=b;)this.line++,this.column=0,c=b,b=a.indexOf("\n",b+1);this.column+=a.length-c;a=!0;break}f=this.expression.indexOf(e,f+1)}}return a};
T.prototype.isParen=function(){var a=this.expression.charAt(this.pos);return"("===a||")"===a?(this.current=this.newToken("TPAREN",a),this.pos++,this.column++,!0):!1};T.prototype.isComma=function(){return","===this.expression.charAt(this.pos)?(this.current=this.newToken("TCOMMA",","),this.pos++,this.column++,!0):!1};T.prototype.isConst=function(){for(var a=this.pos,b=a;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!==c&&"."!==
c&&("0">c||"9"<c)))break}return b>a&&(a=this.expression.substring(a,b),a in this.consts)?(this.current=this.newToken("TNUMBER",this.consts[a]),this.pos+=a.length,this.column+=a.length,!0):!1};T.prototype.isNamedOp=function(){for(var a=this.pos,b=a;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!==c&&("0">c||"9"<c)))break}return b>a&&(a=this.expression.substring(a,b),a in this.binaryOps||a in this.unaryOps||a in this.ternaryOps)?
(this.current=this.newToken("TOP",a),this.pos+=a.length,this.column+=a.length,!0):!1};T.prototype.isName=function(){for(var a=this.pos,b=a;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!==c&&("0">c||"9"<c)))break}return b>a?(a=this.expression.substring(a,b),this.current=this.newToken("TNAME",a),this.pos+=a.length,this.column+=a.length,!0):!1};T.prototype.isWhitespace=function(){for(var a=!1,b=this.expression.charAt(this.pos);" "===
b||"\t"===b||"\n"===b||"\r"===b;){a=!0;this.pos++;this.column++;"\n"===b&&(this.line++,this.column=0);if(this.pos>=this.expression.length)break;b=this.expression.charAt(this.pos)}return a};var oa=/^[0-9a-f]{4}$/i;T.prototype.unescape=function(a){var b=a.indexOf("\\");if(0>b)return a;for(var c=a.substring(0,b);0<=b;){var d=a.charAt(++b);switch(d){case "'":c+="'";break;case '"':c+='"';break;case "\\":c+="\\";break;case "/":c+="/";break;case "b":c+="\b";break;case "f":c+="\f";break;case "n":c+="\n";
break;case "r":c+="\r";break;case "t":c+="\t";break;case "u":d=a.substring(b+1,b+5);oa.test(d)||this.parseError("Illegal escape sequence: \\u"+d);c+=String.fromCharCode(parseInt(d,16));b+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+d+'"');}++b;d=a.indexOf("\\",b);c+=a.substring(b,0>d?a.length:d);b=d}return c};T.prototype.isComment=function(){if("/"===this.expression.charAt(this.pos)&&"*"===this.expression.charAt(this.pos+1)){var a=this.pos;this.pos=this.expression.indexOf("*/",
this.pos)+2;1===this.pos&&(this.pos=this.expression.length);for(var a=this.expression.substring(a,this.pos),b=a.indexOf("\n");0<=b;)this.line++,this.column=a.length-b,b=a.indexOf("\n",b+1);return!0}return!1};T.prototype.isNumber=function(){for(var a=!1,b=this.pos,c=b,d=b,e=this.column,f=e,g=!1,h=!1,k;b<this.expression.length;)if(k=this.expression.charAt(b),"0"<=k&&"9">=k||!g&&"."===k)"."===k?g=!0:h=!0,b++,e++,a=h;else break;a&&(d=b,f=e);if("e"===k||"E"===k){b++;e++;g=!0;for(h=!1;b<this.expression.length;){k=
this.expression.charAt(b);if(!g||"+"!==k&&"-"!==k)if("0"<=k&&"9">=k)h=!0,g=!1;else break;else g=!1;b++;e++}h||(b=d,e=f)}a?(this.current=this.newToken("TNUMBER",parseFloat(this.expression.substring(c,b))),this.pos=b,this.column=e):(this.pos=d,this.column=f);return a};T.prototype.isOperator=function(){var a=this.expression.charAt(this.pos);if("+"===a||"-"===a||"*"===a||"/"===a||"%"===a||"^"===a||"?"===a||":"===a||"."===a)this.current=this.newToken("TOP",a);else if("\u2219"===a||"\u2022"===a)this.current=
this.newToken("TOP","*");else if(">"===a)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken("TOP",">="),this.pos++,this.column++):this.current=this.newToken("TOP",">");else if("<"===a)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken("TOP","<="),this.pos++,this.column++):this.current=this.newToken("TOP","<");else if("|"===a)if("|"===this.expression.charAt(this.pos+1))this.current=this.newToken("TOP","||"),this.pos++,this.column++;else return!1;else if("="===a)if("="===
this.expression.charAt(this.pos+1))this.current=this.newToken("TOP","=="),this.pos++,this.column++;else return!1;else if("!"===a)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken("TOP","!="),this.pos++,this.column++):this.current=this.newToken("TOP",a);else return!1;this.pos++;this.column++;return!0};T.prototype.parseError=function(a){throw Error("parse error ["+(this.line+1)+":"+(this.column+1)+"]: "+a);};var la={},ma={},na={};ga.prototype.next=function(){this.current=this.nextToken;
return this.nextToken=this.tokens.next()};ga.prototype.tokenMatches=function(b,c){return"undefined"===typeof c?!0:Array.isArray(c)?0<=a(c,b.value):"function"===typeof c?c(b):b.value===c};ga.prototype.save=function(){this.savedCurrent=this.current;this.savedNextToken=this.nextToken;this.tokens.save()};ga.prototype.restore=function(){this.tokens.restore();this.current=this.savedCurrent;this.nextToken=this.savedNextToken};ga.prototype.accept=function(a,b){return this.nextToken.type===a&&this.tokenMatches(this.nextToken,
b)?(this.next(),!0):!1};ga.prototype.expect=function(a,b){if(!this.accept(a,b))throw Error("parse error ["+this.tokens.line+":"+this.tokens.column+"]: Expected "+(b||a));};ga.prototype.parseAtom=function(a){if(this.accept("TNAME"))a.push(new b("IVAR",this.current.value));else if(this.accept("TNUMBER"))a.push(new b("INUMBER",this.current.value));else if(this.accept("TSTRING"))a.push(new b("INUMBER",this.current.value));else if(this.accept("TPAREN","("))this.parseExpression(a),this.expect("TPAREN",
")");else throw Error("unexpected "+this.nextToken);};ga.prototype.parseExpression=function(a){this.parseConditionalExpression(a)};ga.prototype.parseConditionalExpression=function(a){for(this.parseOrExpression(a);this.accept("TOP","?");){var c=[],d=[];this.parseConditionalExpression(c);this.expect("TOP",":");this.parseConditionalExpression(d);a.push(new b("IEXPR",c));a.push(new b("IEXPR",d));a.push(ha("?"))}};ga.prototype.parseOrExpression=function(a){for(this.parseAndExpression(a);this.accept("TOP",
"or");)this.parseAndExpression(a),a.push(X("or"))};ga.prototype.parseAndExpression=function(a){for(this.parseComparison(a);this.accept("TOP","and");)this.parseComparison(a),a.push(X("and"))};ga.prototype.parseComparison=function(a){for(this.parseAddSub(a);this.accept("TOP","== != < <= >= >".split(" "));){var b=this.current;this.parseAddSub(a);a.push(X(b.value))}};ga.prototype.parseAddSub=function(a){for(this.parseTerm(a);this.accept("TOP",["+","-","||"]);){var b=this.current;this.parseTerm(a);a.push(X(b.value))}};
ga.prototype.parseTerm=function(a){for(this.parseFactor(a);this.accept("TOP",["*","/","%"]);){var b=this.current;this.parseFactor(a);a.push(X(b.value))}};ga.prototype.parseFactor=function(a){var b=this.tokens.unaryOps;this.save();if(this.accept("TOP",function(a){return a.value in b}))if("-"!==this.current.value&&"+"!==this.current.value&&"TPAREN"===this.nextToken.type&&"("===this.nextToken.value)this.restore(),this.parseExponential(a);else{var c=this.current;this.parseFactor(a);a.push(ba(c.value))}else this.parseExponential(a)};
ga.prototype.parseExponential=function(a){for(this.parsePostfixExpression(a);this.accept("TOP","^");)this.parseFactor(a),a.push(X("^"))};ga.prototype.parsePostfixExpression=function(a){for(this.parseFunctionCall(a);this.accept("TOP","!");)a.push(ba("!"))};ga.prototype.parseFunctionCall=function(a){var c=this.tokens.unaryOps;if(this.accept("TOP",function(a){return a.value in c})){var d=this.current;this.parseAtom(a);a.push(ba(d.value))}else for(this.parseMemberExpression(a);this.accept("TPAREN","(");)this.accept("TPAREN",
")")?a.push(new b("IFUNCALL",0)):(d=this.parseArgumentList(a),a.push(new b("IFUNCALL",d)))};ga.prototype.parseArgumentList=function(a){for(var b=0;!this.accept("TPAREN",")");)for(this.parseExpression(a),++b;this.accept("TCOMMA");)this.parseExpression(a),++b;return b};ga.prototype.parseMemberExpression=function(a){for(this.parseAtom(a);this.accept("TOP",".");)this.expect("TNAME"),a.push(new b("IMEMBER",this.current.value))};ca.parse=function(a){return(new ca).parse(a)};ca.evaluate=function(a,b){return ca.parse(a).evaluate(b)};
ca.prototype={parse:function(a){var b=[];a=new ga(this,new T(a,this.unaryOps,this.binaryOps,this.ternaryOps,this.consts));a.parseExpression(b);a.expect("TEOF","EOF");return new e(b,this)},evaluate:function(a,b){return this.parse(a).evaluate(b)}};return{Parser:ca,Expression:e}})}),Id=function(){return P.call(this)||this};$jscomp.inherits(Id,P);Id.prototype._run=function(){if(!this.hasMetadata("expression"))console.warn('A filter of type ImageBlendExpressionFilter requires a blending expression.\nUse \'setMetadata("expression", "...")\' to set it.');
else if(this.hasSameNcppInput()&&this.hasSameSizeInput())if(this.getNumberOfInputs()){for(var a=this.getInputCategories(),b=this._getInput(a[0]),c=b.getDataCopy(),d=(new Gh.Parser).parse(this.getMetadata("expression")),e=0;e<c.length;e++){for(var f={},g=0;g<a.length;g++)f[a[g]]=this._getInput(a[g]).getData()[e];c[e]=d.evaluate(f)}this._addOutput(E).setData(c,b.getWidth(),b.getHeight())}else console.warn("A filter of type ImageBlendExpressionFilter requires at least one input.")};var Jd=function(){var a;
a=P.call(this)||this;a.addInputValidator(0,E);a.setMetadata("filter",null);return a};$jscomp.inherits(Jd,P);Jd.prototype._run=function(){if(this.hasValidInput()){var a=this.getMetadata("filter");if(a){var b=this._getInput(0);b.getData();for(var c=b.getNcpp(),d=b.getWidth(),e=b.getHeight(),f=new E({width:d,height:e,color:Array(c).fill(0)}),g=f.getData(),h=a.length,l=a[0].length,k=Math.floor(l/2),m=Math.floor(h/2),n=d-k,e=e-m,t=k;t<n;t++)for(var p=m;p<e;p++)for(var q=(p*d+t)*c,v=0;v<l;v++)for(var u=
0;u<h;u++)for(var z=b.getPixel({x:t+v-k,y:p+u-m}),x=a[u][v],w=0;w<c;w++)g[q+w]+=z[w]*x;this._output[0]=f}else console.warn("A filter must be specified using .setMetadata('filter', [[]])")}else console.warn("A filter of type SpatialConvolutionFilter requires 1 input of category '0' and one input of category '1'.")};var Kd=function(){var a;a=P.call(this)||this;a.addInputValidator(0,E);a.addInputValidator(1,E);return a};$jscomp.inherits(Kd,P);Kd.prototype._run=function(){if(!this.hasValidInput())console.warn("A filter of type MultiplyImageFilter requires 1 input of category '0' and one input of category '1'.");
else if(this.hasSameNcppInput()&&this.hasSameSizeInput()){for(var a=this._getInput(0),b=this._getInput(1).getData(),c=a.getDataCopy(),d=0;d<c.length;d++)c[d]*=b[d];this._addOutput(E).setData(c,a.getWidth(),a.getHeight())}};var Ld=function(){var a;a=P.call(this)||this;a.addInputValidator(0,E);a.setMetadata("threshold",128);a.setMetadata("lowValue",0);a.setMetadata("highValue",255);a.setMetadata("preserveAlpha",!0);return a};$jscomp.inherits(Ld,P);Ld.prototype._run=function(){if(this.hasValidInput()){var a=
this._getInput(0),b=a.clone(),c=a.getComponentsPerPixel(),a=this.getMetadata("threshold"),d=this.getMetadata("lowValue"),e=this.getMetadata("highValue"),f=b.getData();if(1==c||3==c||4==c){if(this.getMetadata("preserveAlpha")&&4==c)for(c=0;c<f.length;c++)3!=c%4&&(f[c]=f[c]<a?d:e);else for(c=0;c<f.length;c++)f[c]=f[c]<a?d:e;this._output[0]=b}else console.warn("The input data must have 1, 3 or 4 components per pixel.")}};var Md=function(){var a;a=P.call(this)||this;a.addInputValidator(0,E);a.setMetadata("dxFilter",
[[1,-1]]);a.setMetadata("dyFilter",[[1],[-1]]);return a};$jscomp.inherits(Md,P);Md.prototype._run=function(){if(this.hasValidInput()){var a=this._getInput(0),b=this.getMetadata("dxFilter"),c=this.getMetadata("dyFilter"),d=new pixpipe.SpatialConvolutionFilter;d.addInput(a);d.setMetadata("filter",b);d.update();this._output.dx=d.getOutput();d.setMetadata("filter",c);d.update();this._output.dy=d.getOutput()}else console.warn("A filter of type ImageDerivativeFilter requires 1 input of category '0' and one input of category '1'.")};
var Nd=function(){var a;a=P.call(this)||this;a.addInputValidator("dx",E);a.addInputValidator("dy",E);return a};$jscomp.inherits(Nd,P);Nd.prototype._run=function(){if(!this.hasValidInput())console.warn("A filter of type GradientImageFilter requires 1 input of category 'dx' and 1 input of category 'dy'.");else if(this.hasSameSizeInput()&&this.hasSameNcppInput()){for(var a=this._getInput("dx"),b=a.getData(),c=this._getInput("dy").getData(),d=a.hollowClone(),e=d.getData(),a=a.hollowClone(),f=a.getData(),
g=Infinity,h=-Infinity,l=Infinity,k=-Infinity,m=0;m<b.length;m++)e[m]=Math.sqrt(b[m]*b[m]+c[m]*c[m]),isNaN(e[m])||(g=Math.min(g,e[m]),h=Math.max(h,e[m])),f[m]=Math.atan(c[m]/b[m]),isNaN(f[m])||(l=Math.min(l,f[m]),k=Math.max(k,f[m]));d.setMetadata("min",g);d.setMetadata("max",h);a.setMetadata("min",l);a.setMetadata("max",k);this._output.direction=a;this._output.magnitude=d}};var Od=function(){var a;a=P.call(this)||this;a.addInputValidator(0,E);a.setMetadata("max",NaN);return a};$jscomp.inherits(Od,
P);Od.prototype._run=function(){if(this.hasValidInput()){var a=this._input[0],b=a.getData(),c=a.hollowClone(),d=c.getData(),e=this.getMetadata("max");isNaN(e)&&(e=a.getMax());for(a=0;a<b.length;a++)d[a]=b[a]/e;this._output[0]=c}else console.warn("A filter of type */ requires 1 input of category '0'.")};var gc=function(){var a;a=A.call(this)||this;a.addInputValidator(0,E);a.setMetadata("connexity",8);a.setMetadata("seed",[0,0]);a._directionListConnexity4=[[0,-1],[-1,0],[0,1],[1,0]];a._directionListConnexity8=
[[0,-1],[-1,-1],[-1,0],[-1,1],[0,1],[1,1],[1,0],[1,-1]];return a};$jscomp.inherits(gc,A);gc.prototype._run=function(){function a(a,b){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!=b[c])return!1;return!0}function b(){v[0]=q[0]+f[l][0];v[1]=q[1]+f[l][1];if(0>v[0]||0>v[1]||v[0]>=d||v[1]>=e)return 2;var b=c.getPixel({x:v[0],y:v[1]});if(a(b,k)){if(v[0]==u[0]&&v[1]==u[1])return 0;q[0]=v[0];q[1]=v[1];u.push(q[0]);u.push(q[1]);return 1}return 2}if(this.hasValidInput()){var c=this._getInput(0);
c.getNcpp();var d=c.getWidth(),e=c.getHeight(),f=null,f=8==this.getMetadata("connexity")?this._directionListConnexity8:this._directionListConnexity4,g=this._metadata.seed.slice(),h=f.length/4,l=h;if(0>g[0]||0>g[1]||g[0]>=d||g[1]>=e)console.warn("The seed is out of image range.");else{for(var k=c.getPixel({x:g[0],y:g[1]}),m=k,n=g.slice(),t=!1,m=0;m<this._directionListConnexity4.length;m++){var p=c.getPixel({x:g[0]+this._directionListConnexity4[m][0],y:g[1]+this._directionListConnexity4[m][1]});if(!a(p,
k)){t=!0;l=m;8==this.getMetadata("connexity")&&(l*=2);l+=h;break}}for(;!t;){n[0]+=f[0][0];n[1]+=f[0][1];if(0>n[0]){g[0]=0;g[1]=n[1];break}if((m=c.getPixel({x:n[0],y:n[1]}))&&a(m,k))g[0]=n[0],g[1]=n[1];else break}var q=g.slice(),v=[0,0],u=[];u.push(g[0]);u.push(g[1]);a:for(;;)if(l-=h,0>l&&(l=f.length-h),g=b(),0==g)break a;else if(1!=g){m=n=0;b:for(;m<f.length-1;m++)if(l++,l%=f.length,g=b(),0==g)break a;else if(1==g)break b;else n++;if(n==f.length-1)break}h=new aa;h.setData(u);h.setMetadata("closed",
!0);this._output[0]=h}}else console.warn("A filter of type AngleToHueWheelHelper requires 1 input of category '0'.")};var Kc=function(){var a;a=P.call(this)||this;a.addInputValidator(0,E);a.setMetadata("tolerance",1);a.setMetadata("connexity",4);a.setMetadata("color",null);a.setMetadata("onlyHits",!1);a._directionListConnexity4=[[0,-1],[-1,0],[0,1],[1,0]];a._directionListConnexity8=[[0,-1],[-1,-1],[-1,0],[-1,1],[0,1],[1,1],[1,0],[1,-1]];return a};$jscomp.inherits(Kc,P);Kc.prototype._run=function(){if(this.hasValidInput()){var a=
this._getInput(0),b=a.getNcpp(),c=a.getWidth(),d=a.getHeight(),e;e=8==this.getMetadata("connexity")?this._directionListConnexity8:this._directionListConnexity4;var f=Array(b);f[0]=255;f=this.getMetadata("color")||f;if(f.length==b||3==f.length&&4==b){var b=new E({width:c,height:d,color:[0]}),g=this.getMetadata("seed"),h=a.getPixel({x:g[0],y:g[1]}),l=this.getMetadata("tolerance"),k=this.getMetadata("onlyHits"),m=null;k||(m=a.clone());var n=[],t=[];for(t.push(g);0<t.length;){var g=t.pop(),p=g[0],q=g[1];
if(!(0>p||p>=c||0>q||q>=d)&&0==b.getPixel({x:p,y:q})[0]){b.setPixel({x:p,y:q},[1]);k||m.setPixel({x:p,y:q},f);for(var v=[0,0],u=!1,z=0;z<e.length;z++)if(v[0]=p+e[z][0],v[1]=q+e[z][1],!(0>v[0]||v[0]>=c||0>v[1]||v[1]>=d)){for(var x=a.getPixel({x:v[0],y:v[1]}),w=!0,y=0;y<h.length;y++)if(Math.abs(x[y]-h[y])>l){w=!1;u=!0;break}w&&t.push([v[0],v[1]])}u&&0!=p&&p!=c-1&&0!=q&&q!=d-1&&n.push(g)}}k||(this._output[0]=m);this._output.edgePoints=n}else console.warn("The color to fill must have the same number of components as the input image. (RGB color for RGBA image is accepted)")}else console.warn("A filter of type FloodFillImageFilter requires 1 input of category '0'.")};
var Pd=function(){var a;a=A.call(this)||this;a.addInputValidator(0,E);a.setMetadata("connexity",4);a.setMetadata("seed",[0,0]);return a};$jscomp.inherits(Pd,A);Pd.prototype._run=function(){if(this.hasValidInput()){var a=this._getInput(0);a.getNcpp();a.getWidth();a.getHeight();var b=[],c=this.getMetadata("connexity"),d=this.getMetadata("seed"),e=new gc;e.addInput(a);e.setMetadata("connexity",c);e.setMetadata("seed",d);e.update();b.push(e.getOutput());e=new Kc;e.addInput(a);e.setMetadata("onlyHits",
!1);e.setMetadata("connexity",4);e.setMetadata("tolerance",0);e.setMetadata("seed",d);e.update();d=e.getOutput("edgePoints");e=new gc;e.setMetadata("time",!1);for(var f=0;f<d.length;f++){for(var g=d[f],h=!1,l=0;l<b.length;l++)if(b[l].hasPoint(g)){h=!0;break}h||(e.addInput(a),e.setMetadata("connexity",c),e.setMetadata("seed",g),e.update(),b.push(e.getOutput()))}for(f=0;f<b.length;f++)this._output[f]=b[f]}else console.warn("A filter of type ContourHolesImage2DFilter requires 1 input of category '0'.")};
var Qd=function(){var a;a=A.call(this)||this;a.addInputValidator(0,E);return a};$jscomp.inherits(Qd,A);Qd.prototype._run=function(){if(this.hasValidInput())if(this.hasEvent("pixel")){var a=this._getInput(0);a.getNcpp();for(var b=a.getWidth(),c=a.getHeight(),d=0;d<c;d++)for(var e=0;e<b;e++){var f={x:e,y:d},g=a.getPixel(f);this.triggerEvent("pixel",f,g)}}else console.warn("No function to apply per pixel was specified.");else console.warn("A filter of type ForEachPixelReadOnlyFilter requires 1 input of category '0'.")};
var Rd=function(){var a;a=P.call(this)||this;a.addInputValidator(0,E);return a};$jscomp.inherits(Rd,P);Rd.prototype._run=function(){if(this.hasValidInput()){var a=this._getInput(0),b=a.getNcpp(),c=a.getWidth(),d=a.getHeight();if(3>b)console.warn("A filter of type TerrainRgbToElevationImageFilter requires an input with at least 3 components per pixel.");else{var e=new pixpipe.Image2D({width:c,height:d,color:[0]}),b=new pixpipe.ForEachPixelReadOnlyFilter;b.addInput(a);b.on("pixel",function(a,b){e.setPixel(a,
[-1E4+.1*(65536*b[0]+256*b[1]+b[2])])});b.update();this._output[0]=e}}else console.warn("A filter of type TerrainRgbToElevationImageFilter requires 1 input of category '0'.")};var Sd=function(){var a;a=A.call(this)||this;a.setMetadata("outputSize",{width:0,height:0});return a};$jscomp.inherits(Sd,A);Sd.prototype._run=function(){var a;if("0"in this._input){a=this._input[0];var b=this.getMetadata("outputSize");if(0==b.width||0==b.height)console.warn("The output size cannot be 0.");else{for(var c=new pixpipe.Image2D({width:b.width,
height:b.height,color:[0]}),d=0;d<b.width;d++)for(var e=0;e<b.height;e++){for(var f=0,g=Infinity,h=0;h<a.length;h++){var l=Math.sqrt(Math.pow(a[h].x-d,2)+Math.pow(a[h].y-e,2));l<g&&(g=l,f=h)}c.setPixel({x:d,y:e},[a[f].value])}this._output[0]=c}}else console.warn("No input point set were given.")};var Td=function(){var a;a=A.call(this)||this;a.setMetadata("strength",2);a.setMetadata("outputSize",{width:0,height:0});return a};$jscomp.inherits(Td,A);Td.prototype._run=function(){var a;if("0"in this._input){a=
this._input[0];var b=this.getMetadata("outputSize");if(0==b.width||0==b.height)console.warn("The output size cannot be 0.");else{var c=new pixpipe.Image2D({width:b.width,height:b.height,color:[0]}),d=this.getMetadata("strength");new Float32Array(a.length);for(var e=0;e<b.width;e++)for(var f=0;f<b.height;f++){90==e&&90==f&&console.log("here");for(var g=0,h=0,l=null,k=!1,m=0;m<a.length;m++){var n=Math.sqrt(Math.pow(a[m].x-e,2)+Math.pow(a[m].y-f,2));if(0==n){k=!0;l=a[m].value;break}g+=a[m].value/Math.pow(n,
d);h+=1/Math.pow(n,d)}c.setPixel({x:e,y:f},[k?l:g/h])}this._output[0]=c}}else console.warn("No input point set were given.")};var og=va(function(a){var b;(function(){function c(a){var b=Number.POSITIVE_INFINITY,c=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,e=Number.NEGATIVE_INFINITY,f;for(f=a.length;f--;)a[f][0]<b&&(b=a[f][0]),a[f][0]>d&&(d=a[f][0]),a[f][1]<c&&(c=a[f][1]),a[f][1]>e&&(e=a[f][1]);a=d-b;d=e-c;e=Math.max(a,d);b+=.5*a;c+=.5*d;return[[b-20*e,c-e],[b,c+20*e],[b+20*e,c-e]]}function d(a,
b,c,d){var e=a[b][0],g=a[b][1],h=a[c][0],k=a[c][1],l=a[d][0],n=a[d][1],u=Math.abs(g-k),z=Math.abs(k-n),x,w;if(u<f&&z<f)throw Error("Eek! Coincident points!");u<f?(a=(h+e)/2,u=-((l-h)/(n-k))*(a-(h+l)/2)+(k+n)/2):z<f?(a=(l+h)/2,u=-((h-e)/(k-g))*(a-(e+h)/2)+(g+k)/2):(x=-((h-e)/(k-g)),w=-((l-h)/(n-k)),e=(e+h)/2,l=(h+l)/2,g=(g+k)/2,n=(k+n)/2,a=(x*e-w*l+n-g)/(x-w),u=u>z?x*(a-e)+g:w*(a-l)+n);h-=a;k-=u;return{i:b,j:c,k:d,x:a,y:u,r:h*h+k*k}}function e(a){var b,c,d,e,f,g;for(c=a.length;c;)for(e=a[--c],d=a[--c],
b=c;b;)if(g=a[--b],f=a[--b],d===f&&e===g||d===g&&e===f){a.splice(c,2);a.splice(b,2);break}}var f=1/1048576;b={triangulate:function(a,b){var g=a.length,h,m,n,t,p,q,v,u;if(3>g)return[];a=a.slice(0);if(b)for(h=g;h--;)a[h]=a[h][b];b=Array(g);for(h=g;h--;)b[h]=h;b.sort(function(b,c){var d=a[c][0]-a[b][0];return 0!==d?d:b-c});h=c(a);a.push(h[0],h[1],h[2]);n=[d(a,g+0,g+1,g+2)];t=[];p=[];for(h=b.length;h--;p.length=0){u=b[h];for(m=n.length;m--;)q=a[u][0]-n[m].x,0<q&&q*q>n[m].r?(t.push(n[m]),n.splice(m,1)):
(v=a[u][1]-n[m].y,q*q+v*v-n[m].r>f||(p.push(n[m].i,n[m].j,n[m].j,n[m].k,n[m].k,n[m].i),n.splice(m,1)));e(p);for(m=p.length;m;)v=p[--m],q=p[--m],n.push(d(a,q,v,u))}for(h=n.length;h--;)t.push(n[h]);n.length=0;for(h=t.length;h--;)t[h].i<g&&t[h].j<g&&t[h].k<g&&n.push(t[h].i,t[h].j,t[h].k);return n},contains:function(a,b){if(b[0]<a[0][0]&&b[0]<a[1][0]&&b[0]<a[2][0]||b[0]>a[0][0]&&b[0]>a[1][0]&&b[0]>a[2][0]||b[1]<a[0][1]&&b[1]<a[1][1]&&b[1]<a[2][1]||b[1]>a[0][1]&&b[1]>a[1][1]&&b[1]>a[2][1])return null;
var c=a[1][0]-a[0][0],d=a[2][0]-a[0][0],e=a[1][1]-a[0][1],f=a[2][1]-a[0][1],g=c*f-d*e;if(0===g)return null;d=(f*(b[0]-a[0][0])-d*(b[1]-a[0][1]))/g;a=(c*(b[1]-a[0][1])-e*(b[0]-a[0][0]))/g;return 0>d||0>a||1<d+a?null:[d,a]}};a.exports=b})()}),Ud=function(){var a;a=A.call(this)||this;a.setMetadata("outputSize",{width:0,height:0});return a};$jscomp.inherits(Ud,A);Ud.prototype._run=function(){function a(a,b,c){var d=[a[0]-b[0],a[1]-b[1]];b=[b[0]-c[0],b[1]-c[1]];c=[c[0]-a[0],c[1]-a[1]];a=Math.sqrt(b[0]*
b[0]+b[1]*b[1]);c=Math.sqrt(c[0]*c[0]+c[1]*c[1]);d=Math.sqrt(d[0]*d[0]+d[1]*d[1]);b=(a+c+d)/2;return Math.sqrt(b*(b-a)*(b-c)*(b-d))}var b=null;if("0"in this._input){var b=this._input[0],c=this.getMetadata("outputSize");if(0==c.width||0==c.height)console.warn("The output size cannot be 0.");else{for(var d=b.map(function(a){return[a.x,a.y]}),e=og.triangulate(d),f=[],g=0;g<=e.length-3;g+=3)f.push([e[g],e[g+1],e[g+2]]);console.log(d);console.log(f);e=new pixpipe.Image2D({width:Math.round(c.width),height:Math.round(c.height),
color:[0]});for(g=0;g<c.width;g++)for(var h=0;h<c.height;h++){for(var l=0,k=!1,m=0,n=0;n<f.length;n++)if(og.contains([d[f[n][0]],d[f[n][1]],d[f[n][2]]],[g,h])){k=!0;m=f[n];break}if(k)var n=d[m[0]],t=d[m[1]],p=d[m[2]],q=[g,h],l=a(n,t,p),k=a(n,t,q),t=a(t,p,q),n=a(p,n,q),l=k/l*b[m[2]].value+t/l*b[m[0]].value+n/l*b[m[1]].value;e.setPixel({x:g,y:h},[l])}this._output[0]=e}}else console.warn("No input point set were given.")};var Vd=function(){var a;a=P.call(this)||this;a.addInputValidator(0,E);a.setMetadata("x",
0);a.setMetadata("y",0);a.setMetadata("w",0);a.setMetadata("h",0);return a};$jscomp.inherits(Vd,P);Vd.prototype._run=function(){if(this.hasValidInput()){var a=Math.round(this.getMetadata("x")),b=Math.round(this.getMetadata("y")),c=Math.round(this.getMetadata("w")),d=Math.round(this.getMetadata("h")),e=a+c,f=b+d,g=this._getInput(0),h=g.getWidth(),l=g.getHeight(),k=g.getNcpp();if(0>a||0>b||a>=h||b>=l||0>e||0>f||e>=h||f>=l)console.warn("The query area is out of bound");else{e=g.getData();k=new E({width:c,
height:d,color:new e.constructor(k)});for(e=0;e<c;e++)for(f=0;f<d;f++)h=g.getPixel({x:e+a,y:f+b}),k.setPixel({x:e,y:f},h);this._output[0]=k}}else console.warn("A filter of type CropImageFilter requires 1 input of category '0' (Image2D)")};var Hh=va(function(a){(function(){a.exports=function(a,c,d){c=void 0!==c?c*c:1;var b;if(d)b=a;else{d=a[0];for(var f=[d],g=1,h=a.length;g<h;g++){b=a[g];var l=b.x-d.x,k=b.y-d.y;l*l+k*k>c&&(f.push(b),d=b)}d!==b&&f.push(b);b=f}a=b.length;d=new ("undefined"!==typeof Uint8Array?
Uint8Array:Array)(a);var f=0,g=a-1,h=[],l=[],m,n,t;for(d[f]=d[g]=1;g;){m=0;for(k=f+1;k<g;k++){n=b[k];var p=b[f],q=b[g],v=p.x,p=p.y,u=q.x-v,y=q.y-p;if(0!==u||0!==y){var x=((n.x-v)*u+(n.y-p)*y)/(u*u+y*y);1<x?(v=q.x,p=q.y):0<x&&(v+=u*x,p+=y*x)}u=n.x-v;y=n.y-p;n=u*u+y*y;n>m&&(t=k,m=n)}m>c&&(d[t]=1,h.push(f,t,t,g));g=h.pop();f=h.pop()}for(k=0;k<a;k++)d[k]&&l.push(b[k]);return l}})()}),Wd=function(){var a;a=A.call(this)||this;a.addInputValidator(0,aa);a.setMetadata("tolerance",.1);return a};$jscomp.inherits(Wd,
A);Wd.prototype._run=function(){if(this.hasValidInput()){var a=this._getInput(0),b=a.getNod(),c=a.getData(),d=this.getMetadata("tolerance");if(2!=b)console.warn("SimplifyLineStringFilter is only for 2D LineStrings.");else{for(var e=Array(c.length/2),f=0;f<e.length;f++)e[f]={x:c[2*f],y:c[2*f+1]};d=Hh(e,d,!0);c=Array(2*d.length);for(f=0;f<d.length-1;f++)c[2*f]=d[f].x,c[2*f+1]=d[f+1].y;f=new aa;f.setData(c,b);f.copyMetadataFrom(a);this._output[0]=f}}else console.warn("A filter of type SimplifyLineStringFilter requires 1 input of category '0' (LineString)")};
var Lc=function(){var a;a=P.call(this)||this;a.addInputValidator(0,E);a.setMetadata("component",0);a.setMetadata("minAngle",0);a.setMetadata("maxAngle",Math.PI/2);return a};$jscomp.inherits(Lc,P);Lc.prototype._run=function(){if(this.hasValidInput()){var a=this,b=this._getInput(0).getNcpp(),c=this.getMetadata("component");if(0>c&&c>=b)console.warn("The component to filter must be valid.");else{var d=this._getInput(),e=d.getWidth(),f=d.getHeight(),b=d.getNcpp(),g=this.getMetadata("minAngle"),h=this.getMetadata("maxAngle");
if("auto"===g||"auto"===h)g=d.getMin(),h=d.getMax();b=new E({width:e,height:f,color:[0,0,0,255]});e=new pixpipe.ForEachPixelImageFilter;e.addInput(b);e.on("pixel",function(b,e){b=(d.getPixel(b)[c]-g)/(h-g)*360;return a._hsl2Rgba(b,100,50)});e.update();0==e.getNumberOfOutputs()?console.warn("No output of ForEachPixelImageFilter."):this._output[0]=e.getOutput()}}else console.warn("A filter of type AngleToHueWheelHelper requires 1 input of category '0'.")};Lc.prototype._hsl2Rgba=function(a,b,c){b=void 0===
b?100:b;c=void 0===c?100:c;a=360===a?1:a%360/360;b=100===b?1:b%100/100;c=100===c?1:c%100/100;if(0===b)c=b=a=c;else{var d=function(a,b,c){0>c&&(c+=1);1<c&&--c;return c<1/6?a+6*(b-a)*c:.5>c?b:c<2/3?a+(b-a)*(2/3-c)*6:a},e=.5>c?c*(1+b):c+b-c*b,f=2*c-e;c=d(f,e,a+1/3);b=d(f,e,a);a=d(f,e,a-1/3)}return[Math.round(255*c),Math.round(255*b),Math.round(255*a),255]};var Mc=function(){var a;a=P.call(this)||this;a.addInputValidator(0,E);a.setMetadata("lineStrings",[]);a.setMetadata("lineStringsColors",[]);return a};
$jscomp.inherits(Mc,P);Mc.prototype.addLineString=function(a,b){this._metadata.lineStrings.push(a);this._metadata.lineStringsColors.push(b)};Mc.prototype._run=function(){if(this.hasValidInput()){var a=this._getInput(),b=a.clone();a.getWidth();a.getHeight();for(var a=a.getNcpp(),c=!1,d=this._metadata.lineStrings,e=this._metadata.lineStringsColors,f=0;f<d.length;f++)if(2!=d[f].getMetadata("nod"))console.warn("Linstring must be 2D to be printed on images.");else if(a==e[f].length||4==a&&3==e[f].length){for(var c=
d[f].getData(),g=0;g<c.length-1;g+=2)b.setPixel({x:c[g],y:c[g+1]},e[f]);c=!0}c&&(this._output[0]=b)}else console.warn("A filter of type LineStringPrinterOnImage2DHelper requires 1 input of category '0'.")};var Nc={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,
rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],cool:[{index:0,rgb:[0,255,255]},{index:1,rgb:[255,0,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,
0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},
{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,
42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},
{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,
rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,
rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},
{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,
rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool2:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},
{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,
76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,
41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,
4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,
237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,
rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,
221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,
88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,
165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,
rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]},ka=function(a){var b;a=void 0===a?{}:a;b=Z.call(this)||this;b._type=ka.TYPE();b._colormapDescription=null;b._LUT=[];var c=b._getOption(a,"style",null);c?b.setStyle(c):(c=b._getOption(a,"description",null),b.setDescription(c));b._colormapDescription&&(a=b._getOption(a,"lutSize",null))&&b.buildLut(a);return b};$jscomp.inherits(ka,Z);ka.TYPE=function(){return"COLORMAP"};ka.getAvailableStyles=function(){return Object.keys(Nc)};ka.prototype.setStyle=function(a){a in
Nc?this._validateDescription(Nc[a])&&(this._colormapDescription=JSON.parse(JSON.stringify(Nc[a]))):console.warn("The given colormap style des not exist.")};ka.prototype.setDescription=function(a){(a="string"===typeof a?JSON.parse(a):a)&&this._validateDescription(a)&&(this._colormapDescription=a)};ka.prototype._validateDescription=function(a){if(!Array.isArray(a))return console.warn("The colormap description has to be an Array"),!1;for(var b=0;b<a.length;b++)if(null!==a[b]&&"object"===typeof a[b])if("index"in
a[b]&&"rgb"in a[b]){if("number"===typeof a[b].index){if(0>a[b].index||1<a[b].index)return console.warn("Each colormap segment 'index' property should be in [0, 1]"),!1}else return console.warn("Each colormap segment 'index' property should be a number."),!1;if(Array.isArray(a[b].rgb))if(3==a[b].rgb.length)for(var c=0;c<a[b].rgb.length;c++){if(0>a[b].rgb[c]||255<a[b].rgb[c])return console.warn("The colormap must have only values in [0, 255]"),!1}else return console.warn("Each colormap segment 'rgb' should contain 3 values"),
!1}else return console.warn("Each colormap segment must have a 'index' property and a 'rgb' property."),!1;else return console.warn("Each colormap segment must be a non-null object"),!1;return!0};ka.prototype.getValueAt=function(a){if(!this._colormapDescription)return console.warn("The colormap description is not defined."),null;if(a<=this._colormapDescription[0].index)return this._colormapDescription[0].rgb.slice();if(a>=this._colormapDescription[this._colormapDescription.length-1].index)return this._colormapDescription[this._colormapDescription.length-
1].rgb.slice();for(var b=0;b<this._colormapDescription.length-1;b++)if(a>=this._colormapDescription[b].index&&a<this._colormapDescription[b+1].index){a=(a-this._colormapDescription[b].index)/(this._colormapDescription[b+1].index-this._colormapDescription[b].index);var c=1-a;return[Math.round(this._colormapDescription[b].rgb[0]*c+this._colormapDescription[b+1].rgb[0]*a),Math.round(this._colormapDescription[b].rgb[1]*c+this._colormapDescription[b+1].rgb[1]*a),Math.round(this._colormapDescription[b].rgb[2]*
c+this._colormapDescription[b+1].rgb[2]*a)]}};ka.prototype.buildLut=function(a){if(!this._colormapDescription)return console.warn("The colormap description is not defined, the LUT cannot be created"),null;if(0>a)console.warn("Size of the colormap can not be negative.");else{this._LUT=Array(a);for(var b=0;b<a;b++)this._LUT[b]=this.getValueAt(b/a+.5/a)}};ka.prototype.getLutAt=function(a){return 0>a||a>this._LUT.length?null:this._LUT[a]};ka.prototype.createHorizontalLutImage=function(a){a=void 0===a?
!1:a;if(this._LUT){for(var b=this._LUT.length,c=new E({width:b,height:1,color:[0,0,0]}),d=0;d<b;d++)c.setPixel({x:d,y:0},this._LUT[a?b-d-1:d]);return c}console.warn("The LUT must be built before creating a LUT image.")};ka.prototype.createVerticalLutImage=function(a){a=void 0===a?!1:a;if(this._LUT){for(var b=this._LUT.length,c=new E({width:1,height:b,color:[0,0,0]}),d=0;d<b;d++)c.setPixel({x:0,y:d},this._LUT[a?b-d-1:d]);return c}console.warn("The LUT must be built before creating a LUT image.")};
ka.prototype.addColor=function(a,b){this._colormapDescription||(this._colormapDescription=[]);if(0>a||1<a)return console.warn("The color cannot be added because its index is out of range [0, 1]"),!1;if(this._colormapDescription.find(function(b){return b.index==a}))return console.warn("A color is already present at index "+a),!1;if(b&&Array.isArray(b)&&3==b.length)for(var c=0;c<b.length;c++){if("number"!==typeof b[c]||0>b[c]||255<b[c])return console.warn("The rgb colors must be in [0, 255]"),!1}else return console.warn("The color cannot be added because its rgb array is the wrong size."),
!1;this._colormapDescription.push({index:a,rgb:b.slice()});this._colormapDescription.sort(function(a,b){return a.index-b.index});return!0};ka.prototype.removeColor=function(a){if(!this._colormapDescription)return console.warn("The colormap description is empty."),!1;var b=this._colormapDescription.findIndex(function(b){return b.index==a});if(-1==b)return console.warn("Such index does not exist."),!1;this._colormapDescription.splice(b,1);return!0};ka.prototype.toJson=function(){return JSON.stringify(this._colormapDescription)};
var Xd=function(){var a;a=A.call(this)||this;a.addInputValidator(0,U);a.setMetadata("maxWidth",4096);a.setMetadata("maxHeight",4096);a.setMetadata("axis","xspace");a.setMetadata("time",0);return a};$jscomp.inherits(Xd,A);Xd.prototype._run=function(){function a(a,b,c,e){return d.getIntensity_xyz(c,a,b,e)}function b(a,b,c,e){return d.getIntensity_xyz(a,c,b,e)}function c(a,b,c,e){return d.getIntensity_xyz(a,b,c,e)}if(this.hasValidInput()){var d=this._getInput(0),e=d.getMetadata(this.getMetadata("axis"));
if(e){var f=e.space_length,g=e.width,e=e.height,h=0,l=1;if(d.hasMetadata("time")){var k=d.getMetadata("time").space_length;-1==this._metadata.time?(h=0,l=k):this._metadata.time<k&&(h=this._metadata.time,l=h+1)}var m=f*(l-h),k=Math.floor(this.getMetadata("maxWidth")/g),n=Math.floor(this.getMetadata("maxHeight")/e),t=k*g,p=n*e,n=k*n;1==Math.ceil(m/n)&&(p=Math.ceil(m/k)*e);this.setMetadata("gridWidth",t/g);this.setMetadata("gridHeight",p/e);var q=m=0,u=0,y=null,z=null;"xspace"===this._metadata.axis?
z=a:"yspace"===this._metadata.axis?z=b:"zspace"===this._metadata.axis&&(z=c);if(z)for(var x=Array(d.getMetadata("ncpp")).fill(0);h<l;h++)for(var w=0;w<f;w++){0==q%n&&(y=new E({width:t,height:p,color:x}),this._output[m]=y,u=0,m++);var A=u%k,C=Math.floor(u/k);u++;for(var A=A*g,C=C*e,G=0;G<e;G++)for(var D=0;D<g;D++){var I=[z(D,G,w,h)];y.setPixel({x:A+D,y:C+G},I)}q++}else console.warn("The axis to sample along for the mosaic was not properly set.")}else console.warn("Sampling axis for mosaicing was not poperly set. Has to be 'xspace', 'yspace' or 'zspace'.")}};
n.CoreTypes=Ua;n.PixpipeObject=Z;n.Filter=A;n.Signal1D=oa;n.Image2D=E;n.Image3D=U;n.ImageToImageFilter=P;n.MniVolume=ra;n.LineString=aa;n.CanvasImageWriter=Ab;n.UrlImageReader=Ac;n.FileImageReader=Bc;n.FileToArrayBufferReader=bc;n.UrlToArrayBufferReader=Cc;n.BrowserDownloadBuffer=sd;n.Minc2Decoder=I;n.NiftiDecoder=qb;n.PixpEncoder=cc;n.PixpDecoder=dc;n.Image3DGenericDecoder=td;n.TiffDecoder=Ec;n.MghDecoder=Cb;n.EegModDecoder=yd;n.PixBinEncoder=Hc;n.PixBinDecoder=zd;n.JpegDecoder=Ic;n.PngDecoder=ec;
n.Image2DGenericDecoder=Ad;n.ComponentProjectionImage2DFilter=Bd;n.ComponentMergeImage2DFilter=Cd;n.ForwardFourierSignalFilter=kg;n.InverseFourierSignalFilter=lg;n.ForwardFourierImageFilter=mg;n.InverseFourierImageFilter=ng;n.ForEachPixelImageFilter=Jc;n.SpectralScaleImageFilter=Hd;n.ImageBlendExpressionFilter=Id;n.SpatialConvolutionFilter=Jd;n.MultiplyImageFilter=Kd;n.SimpleThresholdFilter=Ld;n.ImageDerivativeFilter=Md;n.GradientImageFilter=Nd;n.NormalizeImageFilter=Od;n.ContourImage2DFilter=gc;
n.FloodFillImageFilter=Kc;n.ContourHolesImage2DFilter=Pd;n.ForEachPixelReadOnlyFilter=Qd;n.TerrainRgbToElevationImageFilter=Rd;n.NearestNeighborSparseInterpolationImageFilter=Sd;n.IDWSparseInterpolationImageFilter=Td;n.TriangulationSparseInterpolationImageFilter=Ud;n.CropImageFilter=Vd;n.SimplifyLineStringFilter=Wd;n.AngleToHueWheelHelper=Lc;n.LineStringPrinterOnImage2DHelper=Mc;n.Colormap=ka;n.Image3DToMosaicFilter=Xd;Object.defineProperty(n,"__esModule",{value:!0})});
